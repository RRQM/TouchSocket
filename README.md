<p></p>
<p></p>
<p align="center">
<img src="logo.png" width = "100" height = "100" alt="å›¾ç‰‡åç§°" align=center />
</p>

 <div align="center"> 

[![NuGet(TouchSocket)](https://img.shields.io/nuget/v/TouchSocket.svg?label=TouchSocket)](https://www.nuget.org/packages/TouchSocket/)
[![NuGet(TouchSocket)](https://img.shields.io/nuget/dt/TouchSocket.svg)](https://www.nuget.org/packages/TouchSocket/)
[![License](https://img.shields.io/badge/license-Apache%202-4EB1BA.svg)](https://www.apache.org/licenses/LICENSE-2.0.html)
[![star](https://gitee.com/dotnetchina/TouchSocket/badge/star.svg?theme=gvp)](https://gitee.com/dotnetchina/TouchSocket/stargazers) 
[![fork](https://gitee.com/dotnetchina/TouchSocket/badge/fork.svg?theme=gvp)](https://gitee.com/dotnetchina/TouchSocket/members)
<a href="https://jq.qq.com/?_wv=1027&k=gN7UL4fw">
<img src="https://img.shields.io/badge/QQç¾¤-234762506-red" alt="QQ">
</a>
</div>  

<div align="center">

é›„å…³æ¼«é“çœŸå¦‚é“ï¼Œè€Œä»Šè¿ˆæ­¥ä»å¤´è¶Šã€‚ä»å¤´è¶Šï¼Œè‹å±±å¦‚æµ·ï¼Œæ®‹é˜³å¦‚è¡€ã€‚

</div>

ä¸­æ–‡ | [English](README.en.md)

## ğŸ€æè¿°

 **_ä»¥ä¸‹NugetåŒ…ï¼Œå‡å·²åœ¨æ­¤ä»“ä½¿ç”¨Apache License 2.0å¼€æºåè®®å¼€æºã€‚_** 

| åç§°|åœ°å€ |æè¿°|
|---|---|---|
|[![NuGet version (TouchSocket)](https://img.shields.io/nuget/v/TouchSocket.svg?label=TouchSocket)](https://www.nuget.org/packages/TouchSocket)|[Gitee](https://gitee.com/dotnetchina/TouchSocket)<br>[Github](https://github.com/RRQM/TouchSocket)| TouchSocketè¿™æ˜¯ä¸€ä¸ªè½»é‡çº§çš„ã€æ”¯æŒæ’ä»¶çš„ç»¼åˆç½‘ç»œé€šä¿¡åº“ã€‚<br>åŸºç¡€é€šä¿¡åŠŸèƒ½åŒ…å«Tcpã€Udpã€Sslã€Rpcã€Httpç­‰ã€‚å…¶ä¸­http<br>æœåŠ¡å™¨æ”¯æŒWebSocketã€é™æ€ç½‘é¡µã€XmlRpcã€WebApiã€JsonRpc<br>ç­‰æ‰©å±•æ’ä»¶ã€‚å’Œè‡ªå®šä¹‰åè®®çš„TouchRpcï¼Œæ”¯æŒSslåŠ å¯†ã€å¼‚æ­¥è°ƒç”¨ã€<br>æƒé™ç®¡ç†ã€é”™è¯¯çŠ¶æ€è¿”å›ã€æœåŠ¡å›è°ƒã€åˆ†å¸ƒå¼è°ƒç”¨ç­‰ã€‚åœ¨ç©ºè½½å‡½æ•°<br>æ‰§è¡Œæ—¶ï¼Œ10ä¸‡æ¬¡è°ƒç”¨ä»…3.8ç§’ï¼Œåœ¨ä¸è¿”å›çŠ¶æ€æ—¶ï¼Œä»…0.9ç§’ã€‚|
| [![NuGet version (TouchSocket.AspNetCore)](https://img.shields.io/nuget/v/TouchSocket.AspNetCore.svg?label=TouchSocket.AspNetCore)](https://www.nuget.org/packages/TouchSocket.AspNetCore)|[Gitee](https://gitee.com/dotnetchina/TouchSocket)<br>[Github](https://github.com/RRQM/TouchSocket) | TouchSocket.AspNetCoreæ˜¯é€‚ç”¨äºAspNetCoreçš„ä¸“å±ç‰ˆæœ¬ã€‚|

## ğŸ«ä¼ä¸šç‰ˆæè¿°
 **_ä»¥ä¸‹NugetåŒ…ï¼Œå¹¶æœªå¼€æºï¼Œå…¶æºä»£ç éœ€è¦ä»˜è´¹è´­ä¹°ã€‚_** 
| åç§°|åœ°å€ |æè¿°|
|---|---|---|
|[![NuGet version (TouchSocketPro)](https://img.shields.io/nuget/v/TouchSocketPro.svg?label=TouchSocketPro)](https://www.nuget.org/packages/TouchSocketPro)|[Gitee](https://gitee.com/dotnetchina/TouchSocket)<br>[Github](https://github.com/RRQM/TouchSocket)| TouchSocketProæ˜¯TouchSocketçš„å¢å¼ºä¼ä¸šç‰ˆã€‚å…¶ä¸­<br>æœªå¼€æºçš„ä¼ä¸šç‰ˆåŠŸèƒ½ï¼Œè¿™éœ€è¦å¯†é’¥æ‰èƒ½ä½¿ç”¨ï¼Œå¯ä»¥å…ˆè¯•<br>ç”¨ã€‚æ‰€ä»¥ä¸¤è€…åœ¨**åŸºç¡€åŠŸèƒ½**æ²¡æœ‰åŒºåˆ«ï¼Œåªæ˜¯åœ¨æ‰©å±•åŠŸèƒ½ä¸Š<br>æœ‰ä¸€å®šå·®å¼‚æ€§ã€‚å…·ä½“å·®å¼‚è¯·çœ‹[ä¼ä¸šç‰ˆç›¸å…³](https://www.yuque.com/rrqm/touchsocket/80696720a95e415d94c87fa03642513d)|
| [![NuGet version (TouchSocket.AspNetCore)](https://img.shields.io/nuget/v/TouchSocket.AspNetCore.svg?label=TouchSocket.AspNetCore)](https://www.nuget.org/packages/TouchSocket.AspNetCore)|[Gitee](https://gitee.com/dotnetchina/TouchSocket)<br>[Github](https://github.com/RRQM/TouchSocket) | TouchSocket.AspNetCoreæ˜¯é€‚ç”¨äºAspNetCoreçš„ä¸“å±ç‰ˆæœ¬ã€‚|


## ğŸ–¥æ”¯æŒç¯å¢ƒ
- .NET Framework4.5åŠä»¥ä¸Šã€‚
- .NET Core3.1åŠä»¥ä¸Šã€‚
- .NET Standard2.0åŠä»¥ä¸Šã€‚

## ğŸ¥ªæ”¯æŒæ¡†æ¶
- WPF
- Winform
- Blazor
- Xamarin
- Mono
- Unityï¼ˆåœ¨IL2cppç¼–è¯‘æ—¶ï¼Œéœ€è¦å¯¼å…¥æºç æˆ–æ·»åŠ link.xmlï¼Œäº¦æˆ–è€…ç›´æ¥å®‰è£…RRQMSocketFrameworkï¼ŒMonoåˆ™ç›´æ¥åŠ è½½dllå³å¯ï¼‰
- å…¶ä»–ï¼ˆå³æ‰€æœ‰C#ç³»ï¼‰

### unityå†…link.xmlè®¾ç½®(æ”¾ç½®åœ¨Assetsæ–‡ä»¶å¤¹å†…)
[unityå®˜æ–¹æ–‡æ¡£ æ‰˜ç®¡ä»£ç å‰¥ç¦»](https://docs.unity3d.com/cn/current/Manual/ManagedCodeStripping.html#LinkXML)
```
<linker>
	<assembly fullname="RRQMCore" />
	<assembly fullname="RRQMSocket" />
</linker>
```


## ğŸŒ´RRQMSocketç‰¹ç‚¹é€Ÿè§ˆ

#### ä¼ ç»ŸIOCPå’ŒRRQMSocket

RRQMSocketçš„IOCPå’Œä¼ ç»Ÿä¹Ÿä¸ä¸€æ ·ï¼Œå°±ä»¥å¾®è½¯å®˜æ–¹ç¤ºä¾‹ä¸ºä¾‹ï¼Œä½¿ç”¨MemoryBufferå¼€è¾Ÿä¸€å—å†…å­˜ï¼Œå‡åˆ†ï¼Œç„¶åç»™æ¯ä¸ªä¼šè¯åˆ†é…ä¸€ä¸ªåŒºæ¥æ”¶ï¼Œç­‰æ”¶åˆ°æ•°æ®åï¼Œå†**å¤åˆ¶**æºæ•°æ®ï¼Œç„¶åæŠŠå¤åˆ¶çš„æ•°æ®è¿›è¡Œå¤„ç†ã€‚è€ŒRRQMSocketæ˜¯æ¯æ¬¡æ¥æ”¶ä¹‹å‰ï¼Œä»å†…å­˜æ± æ‹¿ä¸€ä¸ªå¯ç”¨å†…å­˜å—ï¼Œç„¶å**ç›´æ¥ç”¨äºæ¥æ”¶**ï¼Œç­‰æ”¶åˆ°æ•°æ®ä»¥åï¼Œç›´æ¥å°±æŠŠè¿™ä¸ªå†…å­˜å—æŠ›å‡ºå¤„ç†ï¼Œè¿™æ ·å°±é¿å…äº†**å¤åˆ¶æ“ä½œ**ï¼Œè™½ç„¶åªæ˜¯ç»†å°çš„è®¾è®¡ï¼Œä½†æ˜¯åœ¨ä¼ è¾“**1000w**æ¬¡**64kb**çš„æ•°æ®æ—¶ï¼Œæ€§èƒ½ç›¸å·®äº†**10å€**ã€‚

#### æ•°æ®å¤„ç†é€‚é…å™¨

ç›¸ä¿¡å¤§å®¶éƒ½ä½¿ç”¨è¿‡å…¶ä»–çš„Socketäº§å“ï¼Œé‚£ä¹ˆRRQMSocketåœ¨è®¾è®¡æ—¶ä¹Ÿæ˜¯å€Ÿé‰´äº†å…¶ä»–äº§å“çš„ä¼˜ç§€è®¾è®¡ç†å¿µï¼Œæ•°æ®å¤„ç†é€‚é…å™¨å°±æ˜¯å…¶ä¸­ä¹‹ä¸€ï¼Œä½†å’Œå…¶ä»–äº§å“çš„è®¾è®¡ä¸åŒçš„æ˜¯ï¼ŒRRQMSocketçš„é€‚é…å™¨åŠŸèƒ½æ›´åŠ å¼ºå¤§ï¼Œå®ƒä¸ä»…å¯ä»¥æå‰è§£ææ•°æ®åŒ…ï¼Œè¿˜å¯ä»¥è§£ææ•°æ®å¯¹è±¡ã€‚ä¾‹å¦‚ï¼šå¯ä»¥ä½¿ç”¨å›ºå®šåŒ…å¤´å¯¹æ•°æ®è¿›è¡Œé¢„å¤„ç†ï¼Œä»è€Œè§£å†³**æ•°æ®åˆ†åŒ…**ã€**ç²˜åŒ…**çš„é—®é¢˜ã€‚ä¹Ÿå¯ä»¥ç›´æ¥è§£æ**HTTP**æ•°æ®åè®®ã€WebSocketæ•°æ®åè®®ç­‰ã€‚

#### å…¼å®¹æ€§ä¸é€‚é…

RRQMSocketæä¾›å¤šç§æ¡†æ¶æ¨¡å‹ï¼Œèƒ½å¤Ÿå®Œå…¨å…¼å®¹åŸºäºTCPã€UDPåè®®çš„æ‰€æœ‰åè®®ã€‚ä¾‹å¦‚ï¼šTcpServiceä¸TcpClientï¼Œå…¶åŸºç¡€åŠŸèƒ½å’ŒSocketä¸€æ¨¡ä¸€æ ·ï¼Œåªæ˜¯å¢å¼ºäº†æ¡†æ¶çš„**åšå›ºæ€§**å’Œ**å¹¶å‘æ€§**ï¼Œå°†**è¿æ¥**å’Œ**æ¥æ”¶æ•°æ®**é€šè¿‡äº‹ä»¶çš„å½¢å¼æŠ›å‡ºï¼Œè®©ä½¿ç”¨è€…èƒ½å¤Ÿæ›´åŠ å‹å¥½çš„ä½¿ç”¨ã€‚

## ğŸ”—è”ç³»ä½œè€…

- [CSDNåšå®¢ä¸»é¡µ](https://blog.csdn.net/qq_40374647)
- [å“”å“©å“”å“©è§†é¢‘](https://space.bilibili.com/94253567)
- [æºä»£ç ä»“åº“ä¸»é¡µ](https://gitee.com/RRQM_Home) 
- äº¤æµQQç¾¤ï¼š234762506

## ğŸŒŸè¯´æ˜æ–‡æ¡£
- [ æ–‡æ¡£é¦–é¡µ ](https://www.yuque.com/rrqm/touchsocket/index)

## âœ¨ç®€å•ç¤ºä¾‹

 **_ä»¥ä¸‹ä»…ä»¥æœ€ç®€æ–¹å¼åˆ›å»ºç¤ºä¾‹ï¼Œæ›´å¤šè¯¦æƒ…è¯·æŸ¥çœ‹[è¯´æ˜æ–‡æ¡£](https://www.yuque.com/rrqm/touchsocket/index)ã€‚_** 

 **ã€TcpServiceã€‘** 

```
TcpService service = new TcpService();
service.Connecting += (client, e) => { };//æœ‰å®¢æˆ·ç«¯æ­£åœ¨è¿æ¥
service.Connected += (client, e) => { };//æœ‰å®¢æˆ·ç«¯è¿æ¥
service.Disconnected += (client, e) => { };//æœ‰å®¢æˆ·ç«¯æ–­å¼€è¿æ¥
service.Received += (client, byteBlock, requestInfo) =>
{
    //ä»å®¢æˆ·ç«¯æ”¶åˆ°ä¿¡æ¯
    string mes = byteBlock.ToString();
    Console.WriteLine($"å·²ä»{client.ID}æ¥æ”¶åˆ°ä¿¡æ¯ï¼š{mes}");

    client.Send(mes);//å°†æ”¶åˆ°çš„ä¿¡æ¯ç›´æ¥è¿”å›ç»™å‘é€æ–¹

    //client.Send("id",mes);//å°†æ”¶åˆ°çš„ä¿¡æ¯è¿”å›ç»™ç‰¹å®šIDçš„å®¢æˆ·ç«¯

    var clients = service.GetClients();
    foreach (var targetClient in clients)//å°†æ”¶åˆ°çš„ä¿¡æ¯è¿”å›ç»™åœ¨çº¿çš„æ‰€æœ‰å®¢æˆ·ç«¯ã€‚
    {
        if (targetClient.ID != client.ID)
        {
            targetClient.Send(mes);
        }
    }
};

service.Setup(new RRQMConfig()//è½½å…¥é…ç½®     
    .SetListenIPHosts(new IPHost[] { new IPHost("127.0.0.1:7789"), new IPHost(7790) })//åŒæ—¶ç›‘å¬ä¸¤ä¸ªåœ°å€
    .SetMaxCount(10000)
    .SetThreadCount(100))
    .Start();//å¯åŠ¨
```

 **ã€TcpClientã€‘** 
```
TcpClient tcpClient = new TcpClient();
tcpClient.Connected += (client, e) => { };//æˆåŠŸè¿æ¥åˆ°æœåŠ¡å™¨
tcpClient.Disconnected += (client, e) => { };//ä»æœåŠ¡å™¨æ–­å¼€è¿æ¥ï¼Œå½“è¿æ¥ä¸æˆåŠŸæ—¶ä¸ä¼šè§¦å‘ã€‚
tcpClient.Received += (client, byteBlock, requestInfo) =>
{
    //ä»æœåŠ¡å™¨æ”¶åˆ°ä¿¡æ¯
    string mes = Encoding.UTF8.GetString(byteBlock.Buffer, 0, byteBlock.Len);
    Console.WriteLine($"æ¥æ”¶åˆ°ä¿¡æ¯ï¼š{mes}");
};

//å£°æ˜é…ç½®
RRQMConfig config = new RRQMConfig();
config.SetRemoteIPHost(new IPHost("127.0.0.1:7789"))
    .UsePlugin()
    .SetBufferLength(1024 * 10);

//è½½å…¥é…ç½®
tcpClient.Setup(config);
tcpClient.Connect();
tcpClient.Send("RRQM");
```

 **ã€TcpClient æ–­çº¿é‡è¿ã€‘** 

```
tcpClient.UseReconnection(tryCount:5,printLog:true);
```

 **ã€FixedHeaderPackageAdapteråŒ…æ¨¡å¼ã€‘** 

è¯¥é€‚é…å™¨ä¸»è¦è§£å†³TCPç²˜åˆ†åŒ…é—®é¢˜ï¼Œæ•°æ®æ ¼å¼é‡‡ç”¨ç®€å•è€Œé«˜æ•ˆçš„â€œåŒ…å¤´+æ•°æ®ä½“â€çš„æ¨¡å¼ï¼Œå…¶ä¸­åŒ…å¤´æ”¯æŒï¼š

- Byteæ¨¡å¼ï¼ˆ1+nï¼‰ï¼Œä¸€æ¬¡æ€§æœ€å¤§æ¥æ”¶255å­—èŠ‚çš„æ•°æ®ã€‚
- Ushortæ¨¡å¼ï¼ˆ2+nï¼‰ï¼Œä¸€æ¬¡æœ€å¤§æ¥æ”¶65535å­—èŠ‚ã€‚
- Intæ¨¡å¼ï¼ˆ4+nï¼‰ï¼Œä¸€æ¬¡æœ€å¤§æ¥æ”¶2Gæ•°æ®ã€‚

ä»¥ä¸Šæ•°æ®å¤´å‡é‡‡ç”¨RRQMBitConverterçš„é»˜è®¤ç«¯æ¨¡å¼ï¼ˆå°ç«¯æ¨¡å¼ï¼‰ï¼Œä½¿ç”¨è€…å¯ä»¥æ ¹æ®éœ€æ±‚åˆ‡æ¢é»˜è®¤ç«¯æ¨¡å¼ã€‚

```
RRQMBitConverter.DefaultEndianType = EndianType.Little;
```

 **ã€CustomFixedHeaderDataHandlingAdapterã€‘** 

ç”¨æˆ·è‡ªå®šä¹‰å›ºå®šåŒ…å¤´é€‚é…å™¨ï¼Œä¸»è¦å¸®åŠ©ç”¨æˆ·è§£å†³å…·æœ‰å›ºå®šåŒ…å¤´çš„æ•°æ®å¸§ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼šä¸‹åˆ—æ•°æ®æ ¼å¼ï¼Œä»…éœ€è¦å®ç°å‡ ä¸ªæ¥å£ï¼Œå°±èƒ½å®Œæˆè§£æï¼Œè¯¦ç»†æ“ä½œè¯·å‚ç…§APIã€‚

|1|1|1|**********|

 **ã€CustomUnfixedHeaderDataHandlingAdapterã€‘** 

ç”¨æˆ·è‡ªå®šä¹‰ä¸å›ºå®šåŒ…å¤´é€‚é…å™¨ï¼Œä¸»è¦å¸®åŠ©ç”¨æˆ·è§£å†³å…·æœ‰åŒ…å¤´ä¸å›ºå®šçš„æ•°æ®å¸§ä¿¡æ¯ã€‚ä¾‹å¦‚ï¼šæœ€å…¸å‹çš„HTTPæ•°æ®åŒ…ï¼Œå…¶æ•°æ®å¤´å’Œæ•°æ®ä½“ç”±â€œ\r\nâ€éš”å¼€ï¼Œè€Œæ•°æ®å¤´åˆå› ä¸ºè¯·æ±‚è€…çš„è¯·æ±‚ä¿¡æ¯çš„ä¸åŒï¼Œå¤´éƒ¨æ•°æ®ä¹Ÿä¸å›ºå®šï¼Œè€Œæ•°æ®ä½“çš„é•¿åº¦ï¼Œä¹Ÿæ˜¯ç”±æ•°æ®å¤´çš„ContentLengthçš„å€¼æ˜¾å¼æŒ‡å®šçš„ï¼Œæ‰€ä»¥å¯ä»¥è€ƒè™‘ä½¿ç”¨CustomUnfixedHeaderDataHandlingAdapterè§£æï¼Œä¹Ÿæ˜¯ä»…é€šè¿‡ç®€å•çš„å¼€å‘ï¼Œå°±èƒ½å®ç°ã€‚


 **ã€SslåŠ å¯†ã€‘** 

åœ¨[RRQMBox](https://gitee.com/RRQM_Home/RRQMBox/tree/master/Ssl%E8%AF%81%E4%B9%A6%E7%9B%B8%E5%85%B3)ä¸­ï¼Œæ”¾ç½®äº†ä¸€ä¸ªè‡ªåˆ¶Sslè¯ä¹¦ï¼Œå¯†ç ä¸ºâ€œRRQMSocketâ€ä»¥ä¾›æµ‹è¯•ã€‚ä½¿ç”¨é…ç½®éå¸¸æ–¹ä¾¿ã€‚

åœ¨æœåŠ¡å™¨ä¸­åªéœ€è®¾ç½®é…ç½®SslOptionå±æ€§å’Œæ¥æ”¶æ¨¡å¼ã€‚

 **æœåŠ¡å™¨é…ç½®** 
```
config.SetServerSslOption(new ServiceSslOption() { Certificate = new X509Certificate2("RRQMSocket.pfx", "RRQMSocket"), SslProtocols = SslProtocols.Tls12 });
```

 **å®¢æˆ·ç«¯é…ç½®** 

```
config.SetClientSslOption(new ClientSslOption()
{
    ClientCertificates = new X509CertificateCollection() { new X509Certificate2("RRQMSocket.pfx", "RRQMSocket") },
    SslProtocols = SslProtocols.Tls12,
    TargetHost = "127.0.0.1",
    CertificateValidationCallback = (sender, certificate, chain, sslPolicyErrors) => { return true; }
});
```

## ğŸ§²åº”ç”¨åœºæ™¯æ¨¡æ‹Ÿ
[åœºæ™¯å…¥å£](https://www.yuque.com/rrqm/touchsocket/wrwx9k)

***

## è‡´è°¢

è°¢è°¢å¤§å®¶å¯¹RRQMçš„æ”¯æŒï¼Œå¦‚æœè¿˜æœ‰å…¶ä»–é—®é¢˜ï¼Œè¯·åŠ ç¾¤QQï¼š234762506è®¨è®ºã€‚

## æ”¯æŒä½œè€…

[æ”¯æŒå…¥å£](https://www.yuque.com/rrqm/touchsocket/a5199820843b324f025633fdeee44394)
