"use strict";(self.webpackChunktouchsocket=self.webpackChunktouchsocket||[]).push([[6494],{3905:(e,n,t)=>{t.d(n,{Zo:()=>d,kt:()=>c});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function l(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var s=r.createContext({}),u=function(e){var n=r.useContext(s),t=n;return e&&(t="function"==typeof e?e(n):o(o({},n),e)),t},d=function(e){var n=u(e.components);return r.createElement(s.Provider,{value:n},e.children)},p={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},m=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,i=e.originalType,s=e.parentName,d=l(e,["components","mdxType","originalType","parentName"]),m=u(t),c=a,g=m["".concat(s,".").concat(c)]||m[c]||p[c]||i;return t?r.createElement(g,o(o({ref:n},d),{},{components:t})):r.createElement(g,o({ref:n},d))}));function c(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var i=t.length,o=new Array(i);o[0]=m;var l={};for(var s in n)hasOwnProperty.call(n,s)&&(l[s]=n[s]);l.originalType=e,l.mdxType="string"==typeof e?e:a,o[1]=l;for(var u=2;u<i;u++)o[u]=t[u];return r.createElement.apply(null,o)}return r.createElement.apply(null,t)}m.displayName="MDXCreateElement"},5162:(e,n,t)=>{t.d(n,{Z:()=>o});var r=t(7294),a=t(6010);const i="tabItem_Ymn6";function o(e){let{children:n,hidden:t,className:o}=e;return r.createElement("div",{role:"tabpanel",className:(0,a.Z)(i,o),hidden:t},n)}},5488:(e,n,t)=>{t.d(n,{Z:()=>c});var r=t(7462),a=t(7294),i=t(6010),o=t(2389),l=t(7392),s=t(7094),u=t(2466);const d="tabList__CuJ",p="tabItem_LNqP";function m(e){var n;const{lazy:t,block:o,defaultValue:m,values:c,groupId:g,className:N}=e,k=a.Children.map(e.children,(e=>{if((0,a.isValidElement)(e)&&"value"in e.props)return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})),b=c??k.map((e=>{let{props:{value:n,label:t,attributes:r}}=e;return{value:n,label:t,attributes:r}})),h=(0,l.l)(b,((e,n)=>e.value===n.value));if(h.length>0)throw new Error(`Docusaurus error: Duplicate values "${h.map((e=>e.value)).join(", ")}" found in <Tabs>. Every value needs to be unique.`);const T=null===m?m:m??(null==(n=k.find((e=>e.props.default)))?void 0:n.props.value)??k[0].props.value;if(null!==T&&!b.some((e=>e.value===T)))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${T}" but none of its children has the corresponding value. Available values are: ${b.map((e=>e.value)).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);const{tabGroupChoices:C,setTabGroupChoices:S}=(0,s.U)(),[y,L]=(0,a.useState)(T),v=[],{blockElementScrollPositionUntilNextRender:f}=(0,u.o5)();if(null!=g){const e=C[g];null!=e&&e!==y&&b.some((n=>n.value===e))&&L(e)}const J=e=>{const n=e.currentTarget,t=v.indexOf(n),r=b[t].value;r!==y&&(f(n),L(r),null!=g&&S(g,String(r)))},j=e=>{var n;let t=null;switch(e.key){case"Enter":J(e);break;case"ArrowRight":{const n=v.indexOf(e.currentTarget)+1;t=v[n]??v[0];break}case"ArrowLeft":{const n=v.indexOf(e.currentTarget)-1;t=v[n]??v[v.length-1];break}}null==(n=t)||n.focus()};return a.createElement("div",{className:(0,i.Z)("tabs-container",d)},a.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,i.Z)("tabs",{"tabs--block":o},N)},b.map((e=>{let{value:n,label:t,attributes:o}=e;return a.createElement("li",(0,r.Z)({role:"tab",tabIndex:y===n?0:-1,"aria-selected":y===n,key:n,ref:e=>v.push(e),onKeyDown:j,onClick:J},o,{className:(0,i.Z)("tabs__item",p,null==o?void 0:o.className,{"tabs__item--active":y===n})}),t??n)}))),t?(0,a.cloneElement)(k.filter((e=>e.props.value===y))[0],{className:"margin-top--md"}):a.createElement("div",{className:"margin-top--md"},k.map(((e,n)=>(0,a.cloneElement)(e,{key:n,hidden:e.props.value!==y})))))}function c(e){const n=(0,o.Z)();return a.createElement(m,(0,r.Z)({key:String(n)},e))}},510:(e,n,t)=>{t.d(n,{Z:()=>H});var r=t(7294),a=t(7462);const i=(e,n,t)=>e?"string"==typeof e?e:e[n]||t:t,o={display:"block"},l=e=>{let{size:n,color:t,style:l,...s}=e;const u=l?{...o,...l}:o;return r.createElement("svg",(0,a.Z)({viewBox:"0 0 1024 1024",width:n+"px",height:n+"px",style:u},s),r.createElement("path",{d:"M856.4 292.8c-63.3-63.6-126.6-127.1-190.2-190.3-15.3-15.2-32.7-16.1-48.1-0.8-64.3 63.6-128.1 127.6-191.8 191.9-14 14.2-16.3 31.6-1.7 46 14.8 14.7 31.5 10.6 46.1-2.7 5.1-4.6 9.8-9.7 14.7-14.7 39.2-39.7 78.5-79.5 122.8-124.4 0 170 3 332.2-1.1 494-2.4 96.4-91.2 174.6-187.4 176.6-110.6 2.3-198.6-84.4-199-197.4-0.6-136.3-0.2-272.6-0.1-408.9 0-21.8-7.9-37.4-31.2-39.9-18.9-2-33.2 13.2-33.1 37.5 0 145.8-3.4 291.7 2.4 437.2 6 152.1 160.4 263.5 309.5 230.5C591.8 900 672.8 797.2 673.6 664.6c0.8-144 0.2-288.1 0.2-432.1v-33.3c11.2 10.2 17.6 15.4 23.3 21.3 38.5 38.4 76.7 77 115.3 115.2 14.8 14.6 32.2 19.2 47.8 2.9 13.8-14.8 10.3-31.7-3.8-45.8z",fill:i(t,0,"#333333")}))};l.defaultProps={size:18};const s=l,u={display:"block"},d=e=>{let{size:n,color:t,style:o,...l}=e;const s=o?{...u,...o}:u;return r.createElement("svg",(0,a.Z)({viewBox:"0 0 1024 1024",width:n+"px",height:n+"px",style:s},l),r.createElement("path",{d:"M143.872 768a51.2 51.2 0 0 1-15.36-2.56 51.2 51.2 0 0 1-35.328-51.2V283.136a148.992 148.992 0 0 1 141.824-153.6h450.56a148.992 148.992 0 0 1 141.824 153.6V512a148.992 148.992 0 0 1-141.824 153.6H244.224l-60.928 80.896a51.2 51.2 0 0 1-39.424 21.504zM235.008 180.224a97.792 97.792 0 0 0-90.624 102.4v430.592L218.624 614.4h466.944a97.792 97.792 0 0 0 90.624-102.4V283.136a97.792 97.792 0 0 0-90.624-102.4z",fill:i(t,0,"#333333")}),r.createElement("path",{d:"M880.128 875.52a51.2 51.2 0 0 1-39.424-20.48l-60.928-80.896h-243.2a25.6 25.6 0 0 1 0-51.2h268.8l76.288 102.4v-295.936a25.6 25.6 0 0 1 25.6-25.6 25.6 25.6 0 0 1 25.6 25.6v293.888a51.2 51.2 0 0 1-51.2 51.2z",fill:i(t,1,"#333333")}))};d.defaultProps={size:18};const p=d,m={display:"block"},c=e=>{let{size:n,color:t,style:o,...l}=e;const s=o?{...m,...o}:m;return r.createElement("svg",(0,a.Z)({viewBox:"0 0 1024 1024",width:n+"px",height:n+"px",style:s},l),r.createElement("path",{d:"M223.425605 449.2744l161.632237 0 0 253.65714c0 16.954137 13.745049 30.699186 30.699186 30.699186 16.95516 0 30.699186-13.745049 30.699186-30.699186l0-284.356326c0-16.95516-13.744026-30.699186-30.699186-30.699186L291.035446 387.876028l217.23665-248.51605L733.039255 387.580293 607.104031 387.580293c-16.954137 0-30.699186 13.745049-30.699186 30.699186l0 284.652062c0 16.954137 13.745049 30.699186 30.699186 30.699186s30.699186-13.745049 30.699186-30.699186L637.803217 448.978664l164.448376 0c12.140505 0 23.140023-7.154957 28.063149-18.251689 4.922103-11.097756 2.841721-24.053835-5.307889-33.05279L530.62315 72.570829c-5.881964-6.495948-14.273075-10.134825-23.024389-10.091846-8.763594 0.076748-17.076934 3.895727-22.844288 10.494005L200.312188 398.371056c-7.92653 9.067516-9.818623 21.931498-4.839215 32.896224S211.383338 449.2744 223.425605 449.2744z",fill:i(t,0,"#333333")}),r.createElement("path",{d:"M222.354204 829.113381l581.732178 0c16.954137 0 30.699186-13.745049 30.699186-30.699186s-13.745049-30.699186-30.699186-30.699186L222.354204 767.715009c-16.954137 0-30.699186 13.745049-30.699186 30.699186S205.400067 829.113381 222.354204 829.113381z",fill:i(t,1,"#333333")}),r.createElement("path",{d:"M804.086381 896.729361 222.354204 896.729361c-16.954137 0-30.699186 13.745049-30.699186 30.699186s13.745049 30.699186 30.699186 30.699186l581.732178 0c16.954137 0 30.699186-13.745049 30.699186-30.699186S821.041542 896.729361 804.086381 896.729361z",fill:i(t,2,"#333333")}))};c.defaultProps={size:18};const g=c,N={display:"block"},k=e=>{let{size:n,color:t,style:o,...l}=e;const s=o?{...N,...o}:N;return r.createElement("svg",(0,a.Z)({viewBox:"0 0 1024 1024",width:n+"px",height:n+"px",style:s},l),r.createElement("path",{d:"M380.15463648 874.54223633c0 18.12744166-14.83154297 32.95898463-32.95898463 32.95898463s-32.95898463-14.83154297-32.95898462-32.95898463V228.9152832L172.71078883 370.86962865a33.04467773 33.04467773 0 0 1-46.60400416 0 33.04467773 33.04467773 0 0 1 0-46.6040034l197.55615234-198.14941406A32.76782227 32.76782227 0 0 1 347.0967749 116.52514674c0.03295924 0 0.06591772-0.03295924 0.09887695-0.03295924 1.54907201 0 2.90039088 0.69213867 4.41650366 0.88989258 2.66967773 0.39550781 5.40527318 0.59326172 7.94311548 1.61499049 12.03002904 4.94384766 20.59936549 16.71020508 20.59936549 30.45410156v725.0910642z m320.15698192 23.34155248a32.85351537 32.85351537 0 0 1-23.43383789 9.59106445c-0.03295924 0-0.06591772 0.03295924-0.09887696 0.03295924-1.54907201 0-2.90039088-0.69213867-4.41650365-0.92285182-2.70263697-0.36254857-5.40527318-0.56030248-7.94311549-1.61498972-12.03002904-4.91088842-20.59936549-16.67724584-20.59936473-30.42114309V149.45776367c0-18.12744166 14.83154297-32.95898463 32.95898387-32.95898463s32.95898463 14.83154297 32.95898463 32.95898463v645.60058619l141.52587916-141.92138697c12.81445313-12.82104467 33.81591797-12.82104467 46.63037109 0 12.78808619 12.81445313 12.78808619 33.77636719 0 46.60400416L700.3116184 897.88378881z",fill:i(t,0,"#333333")}))};k.defaultProps={size:18};const b=k,h={display:"block"},T=e=>{let{size:n,color:t,style:o,...l}=e;const s=o?{...h,...o}:h;return r.createElement("svg",(0,a.Z)({viewBox:"0 0 1172 1024",width:n+"px",height:n+"px",style:s},l),r.createElement("path",{d:"M870.0416 250.4704a38.4 38.4 0 0 0-8.96 53.5552c13.056 18.2784 24.4224 37.8368 33.7408 58.112a38.4512 38.4512 0 0 0 50.944 18.8928 38.4512 38.4512 0 0 0 18.8416-50.944 436.0192 436.0192 0 0 0-40.96-70.6048 38.3488 38.3488 0 0 0-53.6064-9.0112zM181.4528 566.016a35.9936 35.9936 0 0 0 25.5488-10.5984L351.7952 410.624a36.096 36.096 0 1 0-51.0976-51.0976L217.6 442.5728C250.0096 278.1184 395.264 153.6 569.1392 153.6c50.7904 0 99.8912 10.3936 145.92 30.9248a38.4 38.4 0 1 0 31.232-70.0928 431.36 431.36 0 0 0-177.152-37.632c-214.6816 0-393.1136 156.416-428.4416 361.216L62.1568 359.4752a36.1984 36.1984 0 0 0-51.0976 51.0976l144.8448 144.7936a36.0448 36.0448 0 0 0 25.5488 10.6496zM978.5344 463.104a36.1984 36.1984 0 0 0-51.0976 0l-144.8448 144.7936a36.096 36.096 0 1 0 51.0976 51.0976l88.6272-88.576C894.3104 740.2496 746.8032 870.4 569.1392 870.4a357.7856 357.7856 0 0 1-325.2736-207.7184 38.4 38.4 0 1 0-69.7344 32.3072 434.3808 434.3808 0 0 0 394.9568 252.2112c215.1936 0 393.984-157.184 428.6464-362.7008l74.496 74.496a35.9936 35.9936 0 0 0 51.0976 0 36.096 36.096 0 0 0 0-51.0976l-144.7936-144.7936z",fill:i(t,0,"#333333")}))};T.defaultProps={size:18};const C=T,S={display:"block"},y=e=>{let{size:n,color:t,style:o,...l}=e;const s=o?{...S,...o}:S;return r.createElement("svg",(0,a.Z)({viewBox:"0 0 1024 1024",width:n+"px",height:n+"px",style:s},l),r.createElement("path",{d:"M302 332a30 30 0 1 1 0-60h420a30 30 0 0 1 0 60H302zM302 542a30 30 0 0 1 0-60h420a30 30 0 0 1 0 60H302zM302 752a30 30 0 0 1 0-60h120a30 30 0 0 1 0 60H302z",fill:i(t,0,"#333333")}),r.createElement("path",{d:"M789.47 784.1a30 30 0 0 1 39.36 45.3l-144.24 125.25a30 30 0 0 1-19.68 7.35H214.85C163.4 962 122 919.46 122 867.38V156.62C122 104.54 163.4 62 214.85 62h594.3C860.6 62 902 104.54 902 156.62v529.05a30 30 0 1 1-60 0V156.62C842 137.3 827.09 122 809.15 122H214.85C196.91 122 182 137.3 182 156.62v710.76C182 886.7 196.91 902 214.85 902h438.84l135.78-117.9z",fill:i(t,1,"#333333")}),r.createElement("path",{d:"M692 931.19a30 30 0 1 1-60 0v-174.6C632 704.57 673.4 662 724.85 662h147.78a30 30 0 0 1 0 60h-147.78c-17.94 0-32.85 15.3-32.85 34.62v174.6z",fill:i(t,2,"#333333")}))};y.defaultProps={size:18};const L=y,v={display:"block"},f=e=>{let{size:n,color:t,style:o,...l}=e;const s=o?{...v,...o}:v;return r.createElement("svg",(0,a.Z)({viewBox:"0 0 1024 1024",width:n+"px",height:n+"px",style:s},l),r.createElement("path",{d:"M512 883.2A371.2 371.2 0 1 0 140.8 512 371.2 371.2 0 0 0 512 883.2z m0 64a435.2 435.2 0 1 1 435.2-435.2 435.2 435.2 0 0 1-435.2 435.2z",fill:i(t,0,"#333333")}),r.createElement("path",{d:"M557.056 512l122.368 122.368a31.744 31.744 0 1 1-45.056 45.056L512 557.056l-122.368 122.368a31.744 31.744 0 1 1-45.056-45.056L466.944 512 344.576 389.632a31.744 31.744 0 1 1 45.056-45.056L512 466.944l122.368-122.368a31.744 31.744 0 1 1 45.056 45.056z",fill:i(t,1,"#333333")}))};f.defaultProps={size:18};const J=f,j={display:"block"},w=e=>{let{size:n,color:t,style:o,...l}=e;const s=o?{...j,...o}:j;return r.createElement("svg",(0,a.Z)({viewBox:"0 0 1024 1024",width:n+"px",height:n+"px",style:s},l),r.createElement("path",{d:"M940 512H792V412c76.8 0 139-62.2 139-139 0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 34.8-28.2 63-63 63H232c-34.8 0-63-28.2-63-63 0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8 0 76.8 62.2 139 139 139v100H84c-4.4 0-8 3.6-8 8v56c0 4.4 3.6 8 8 8h148v96c0 6.5 0.2 13 0.7 19.3C164.1 728.6 116 796.7 116 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-44.2 23.9-82.9 59.6-103.7 6 17.2 13.6 33.6 22.7 49 24.3 41.5 59 76.2 100.5 100.5S460.5 960 512 960s99.8-13.9 141.3-38.2c41.5-24.3 76.2-59 100.5-100.5 9.1-15.5 16.7-31.9 22.7-49C812.1 793.1 836 831.8 836 876c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-79.3-48.1-147.4-116.7-176.7 0.4-6.4 0.7-12.8 0.7-19.3v-96h148c4.4 0 8-3.6 8-8v-56c0-4.4-3.6-8-8-8zM716 680c0 36.8-9.7 72-27.8 102.9-17.7 30.3-43 55.6-73.3 73.3-20.1 11.8-42 20-64.9 24.3V484c0-4.4-3.6-8-8-8h-60c-4.4 0-8 3.6-8 8v396.5c-22.9-4.3-44.8-12.5-64.9-24.3-30.3-17.7-55.6-43-73.3-73.3C317.7 752 308 716.8 308 680V412h408v268z",fill:i(t,0,"#333333")}),r.createElement("path",{d:"M304 280h56c4.4 0 8-3.6 8-8 0-28.3 5.9-53.2 17.1-73.5 10.6-19.4 26-34.8 45.4-45.4C450.9 142 475.7 136 504 136h16c28.3 0 53.2 5.9 73.5 17.1 19.4 10.6 34.8 26 45.4 45.4C650 218.9 656 243.7 656 272c0 4.4 3.6 8 8 8h56c4.4 0 8-3.6 8-8 0-40-8.8-76.7-25.9-108.1-17.2-31.5-42.5-56.8-74-74C596.7 72.8 560 64 520 64h-16c-40 0-76.7 8.8-108.1 25.9-31.5 17.2-56.8 42.5-74 74C304.8 195.3 296 232 296 272c0 4.4 3.6 8 8 8z",fill:i(t,1,"#333333")}))};w.defaultProps={size:18};const x=w,E={display:"block"},A=e=>{let{size:n,color:t,style:o,...l}=e;const s=o?{...E,...o}:E;return r.createElement("svg",(0,a.Z)({viewBox:"0 0 1024 1024",width:n+"px",height:n+"px",style:s},l),r.createElement("path",{d:"M512 71.68c-242.688 0-440.32 197.632-440.32 440.32s197.632 440.32 440.32 440.32 440.32-197.632 440.32-440.32-197.632-440.32-440.32-440.32z m0 819.2c-208.896 0-378.88-169.984-378.88-378.88s169.984-378.88 378.88-378.88 378.88 169.984 378.88 378.88-169.984 378.88-378.88 378.88z",fill:i(t,0,"#333333")}),r.createElement("path",{d:"M542.72 261.12H481.28v220.16H261.12v61.44h220.16v220.16h61.44v-220.16h220.16V481.28h-220.16z",fill:i(t,1,"#333333")}))};A.defaultProps={size:18};const I=A,B={display:"block"},_=e=>{let{size:n,color:t,style:o,...l}=e;const s=o?{...B,...o}:B;return r.createElement("svg",(0,a.Z)({viewBox:"0 0 1024 1024",width:n+"px",height:n+"px",style:s},l),r.createElement("path",{d:"M384 896h-64v-70.4c0-15.2-10.4-28-24.8-31.2C159.2 768 64 644.8 64 496v-32h64v32c0 118.4 73.6 215.2 179.2 236 44.8 8.8 76.8 48 76.8 94.4v69.6zM704 896h-64v-70.4c0-45.6 32-85.6 76.8-94.4C822.4 711.2 896 614.4 896 496v-32h64v32c0 148.8-95.2 272-231.2 298.4-14.4 3.2-24.8 16-24.8 31.2v70.4zM512.8 640l-41.6-37.6c-147.2-133.6-244-208-244-316.8 0-88 68.8-156.8 156.8-156.8 49.6 0 97.6 23.2 128.8 60C544 152 592 128.8 641.6 128.8c88 0 156.8 68.8 156.8 156.8 0 108-96.8 183.2-244 316.8L512.8 640z",fill:i(t,0,"#333333")}))};_.defaultProps={size:18};const M=_,R={display:"block"},O=e=>{let{size:n,color:t,style:o,...l}=e;const s=o?{...R,...o}:R;return r.createElement("svg",(0,a.Z)({viewBox:"0 0 1024 1024",width:n+"px",height:n+"px",style:s},l),r.createElement("path",{d:"M942.4615936 284.62787926c-14.30911886-14.12709945-37.31996786-14.05468217-51.48229632 0.21920654L517.97142983 661.27810333 139.75544149 286.45003606c-14.30911886-14.16232846-37.31996786-14.05468217-51.51948344 0.21920654-14.16232846 14.30911886-14.05468217 37.35519687 0.21920654 51.51948345l401.99014627 398.34974663c0.61847666 0.61847666 1.41897273 0.76526706 2.03940637 1.34655658 0.14483342 0.14483342 0.18201941 0.32685283 0.32685283 0.47364324 7.09877874 7.02636259 16.38375538 10.55911595 25.63154489 10.55911595 9.35739278 0 18.75001458-3.60516949 25.85075143-10.77636551l398.34974663-401.99014628C956.84312974 321.8382427 956.73548345 298.7921647 942.4615936 284.62787926z",fill:i(t,0,"#333333")}))};O.defaultProps={size:18};const D=O,P={display:"block"},U=e=>{let{size:n,color:t,style:o,...l}=e;const s=o?{...P,...o}:P;return r.createElement("svg",(0,a.Z)({viewBox:"0 0 1024 1024",width:n+"px",height:n+"px",style:s},l),r.createElement("path",{d:"M81.5384064 739.37212074c14.30911886 14.12709945 37.31996786 14.05468217 51.48229632-0.21920654L506.02857017 362.72189667 884.24455851 737.54996394c14.30911886 14.16232846 37.31996786 14.05468217 51.51948344-0.21920654 14.16232846-14.30911886 14.05468217-37.35519687-0.21920654-51.51948345l-401.99014627-398.34974663c-0.61847666-0.61847666-1.41897273-0.76526706-2.03940637-1.34655658-0.14483342-0.14483342-0.18201941-0.32685283-0.32685282-0.47364324-7.09877874-7.02636259-16.38375538-10.55911595-25.6315449-10.55911595-9.35739278 0-18.75001458 3.60516949-25.85075143 10.77636551l-398.34974663 401.99014628C67.15687026 702.1617573 67.26451655 725.2078353 81.5384064 739.37212074z",fill:i(t,0,"#333333")}))};U.defaultProps={size:18};const F=U,G=e=>{let{name:n,...t}=e;switch(n){case"youhua":return r.createElement(s,t);case"dayi":return r.createElement(p,t);case"shengji":return r.createElement(g,t);case"tiaozheng":return r.createElement(b,t);case"gengxin":return r.createElement(C,t);case"wendang":return r.createElement(L,t);case"shanchu":return r.createElement(J,t);case"bug":return r.createElement(x,t);case"xinzeng":return r.createElement(I,t);case"fuwu":return r.createElement(M,t);case"down":return r.createElement(D,t);case"up":return r.createElement(F,t)}return null},Y="label_p8vM",Q="icon_knQK";function H(e){const{children:n}=e,t={"\u65b0\u589e":{icon:"xinzeng",bgColor:"#39b54a"},"\u4fee\u590d":{icon:"bug",bgColor:"#9c26b0"},"\u6587\u6863":{icon:"wendang",bgColor:"rgb(79, 147, 255)"},"\u66f4\u65b0":{icon:"gengxin",bgColor:"#0081ff"},"\u8c03\u6574":{icon:"tiaozheng",bgColor:"#333"},"\u5347\u7ea7":{icon:"shengji",bgColor:"#e03997"},"\u79fb\u9664":{icon:"shanchu",bgColor:"#666"},"\u7b54\u7591":{icon:"dayi",bgColor:"#bbb"},"\u4f18\u5316":{icon:"youhua",bgColor:"#38e550"}};return r.createElement("label",{className:Y,title:n,style:{backgroundColor:t[n].bgColor}},r.createElement(G,{name:t[n].icon,color:"white",size:14,className:Q})," ",n)}},5784:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>m,contentTitle:()=>d,default:()=>N,frontMatter:()=>u,metadata:()=>p,toc:()=>c});var r=t(7462),a=(t(7294),t(3905)),i=t(510),o=t(4996),l=t(5488),s=t(5162);const u={id:"job",title:"26.1 \u8c03\u5ea6\u4f5c\u4e1a",sidebar_label:"26.1 \u8c03\u5ea6\u4f5c\u4e1a"},d=void 0,p={unversionedId:"job",id:"job",title:"26.1 \u8c03\u5ea6\u4f5c\u4e1a",description:"\ud83d\udcdd \u6a21\u5757\u66f4\u65b0\u65e5\u5fd7",source:"@site/docs/job.mdx",sourceDirName:".",slug:"/job",permalink:"/touchsocket/docs/job",draft:!1,editUrl:"https://gitee.com/rrqm_home/touchsocket/tree/v4/handbook/docs/job.mdx",tags:[],version:"current",lastUpdatedBy:"\u82e5\u6c5d\u68cb\u8317",lastUpdatedAt:1673249119,formattedLastUpdatedAt:"Jan 9, 2023",frontMatter:{id:"job",title:"26.1 \u8c03\u5ea6\u4f5c\u4e1a",sidebar_label:"26.1 \u8c03\u5ea6\u4f5c\u4e1a"},sidebar:"docs",previous:{title:"25. \u8f85\u52a9\u89d2\u8272\u670d\u52a1 (Worker Service)",permalink:"/touchsocket/docs/process-service"},next:{title:"26.2 Cron \u8868\u8fbe\u5f0f",permalink:"/touchsocket/docs/cron"}},m={},c=[{value:"26.1.1 \u5173\u4e8e\u8c03\u5ea6\u4f5c\u4e1a",id:"2611-\u5173\u4e8e\u8c03\u5ea6\u4f5c\u4e1a",level:2},{value:"26.1.1.1 \u4f7f\u7528\u573a\u666f",id:"26111-\u4f7f\u7528\u573a\u666f",level:3},{value:"26.1.2 \u5feb\u901f\u5165\u95e8",id:"2612-\u5feb\u901f\u5165\u95e8",level:2},{value:"26.1.2.1 \u6307\u5b9a\u4f5c\u4e1a <code>Id</code>",id:"26121-\u6307\u5b9a\u4f5c\u4e1a-id",level:3},{value:"26.1.2.2 \u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"26122-\u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.2.3 <code>\u4e32\u884c</code> \u6267\u884c",id:"26123-\u4e32\u884c-\u6267\u884c",level:3},{value:"26.1.2.4 \u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f",id:"26124-\u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f",level:3},{value:"26.1.2.5 \u8fd0\u884c\u65f6\uff08\u52a8\u6001\uff09\u64cd\u4f5c\u4f5c\u4e1a",id:"26125-\u8fd0\u884c\u65f6\u52a8\u6001\u64cd\u4f5c\u4f5c\u4e1a",level:3},{value:"26.1.2.6 \u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027",id:"26126-\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027",level:3},{value:"26.1.3 \u4f5c\u4e1a\u4fe1\u606f <code>JobDetail</code> \u53ca\u6784\u5efa\u5668",id:"2613-\u4f5c\u4e1a\u4fe1\u606f-jobdetail-\u53ca\u6784\u5efa\u5668",level:2},{value:"26.1.3.1 \u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f",id:"26131-\u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f",level:3},{value:"26.1.3.2 \u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668",id:"26132-\u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668",level:3},{value:"26.1.3.3 \u8bbe\u7f6e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668",id:"26133-\u8bbe\u7f6e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668",level:3},{value:"26.1.3.4 \u4f5c\u4e1a\u4fe1\u606f/\u6784\u5efa\u5668\u989d\u5916\u6570\u636e",id:"26134-\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668\u989d\u5916\u6570\u636e",level:3},{value:"26.1.3.5 \u4f5c\u4e1a\u4fe1\u606f\u7279\u6027",id:"26135-\u4f5c\u4e1a\u4fe1\u606f\u7279\u6027",level:3},{value:"26.1.3.6 \u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa",id:"26136-\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa",level:3},{value:"26.1.3.7 \u81ea\u5b9a\u4e49 <code>SQL</code> \u8f93\u51fa\u914d\u7f6e",id:"26137-\u81ea\u5b9a\u4e49-sql-\u8f93\u51fa\u914d\u7f6e",level:3},{value:"26.1.3.8 \u542f\u7528\u4f5c\u4e1a\u6267\u884c\u65e5\u5fd7\u8f93\u51fa",id:"26138-\u542f\u7528\u4f5c\u4e1a\u6267\u884c\u65e5\u5fd7\u8f93\u51fa",level:3},{value:"26.1.4 \u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f <code>IJob</code>",id:"2614-\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f-ijob",level:2},{value:"26.1.4.1 \u5982\u4f55\u5b9a\u4e49",id:"26141-\u5982\u4f55\u5b9a\u4e49",level:3},{value:"26.1.4.2 <code>JobExecutingContext</code> \u4e0a\u4e0b\u6587",id:"26142-jobexecutingcontext-\u4e0a\u4e0b\u6587",level:3},{value:"26.1.4.3 \u4f9d\u8d56\u6ce8\u5165",id:"26143-\u4f9d\u8d56\u6ce8\u5165",level:3},{value:"26.1.4.4 \u52a8\u6001\u4f5c\u4e1a <code>DynamicJob</code>",id:"26144-\u52a8\u6001\u4f5c\u4e1a-dynamicjob",level:3},{value:"26.1.4.5 \u4f7f\u7528 <code>Roslyn/Natasha</code> \u52a8\u6001\u521b\u5efa",id:"26145-\u4f7f\u7528-roslynnatasha-\u52a8\u6001\u521b\u5efa",level:3},{value:"26.1.4.6 \u4f5c\u4e1a\u8c03\u5ea6\u5668\u88ab\u53d6\u6d88\u5904\u7406",id:"26146-\u4f5c\u4e1a\u8c03\u5ea6\u5668\u88ab\u53d6\u6d88\u5904\u7406",level:3},{value:"26.1.5 \u4f5c\u4e1a\u89e6\u53d1\u5668 <code>Trigger</code> \u53ca\u6784\u5efa\u5668",id:"2615-\u4f5c\u4e1a\u89e6\u53d1\u5668-trigger-\u53ca\u6784\u5efa\u5668",level:2},{value:"26.1.5.1 \u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"26151-\u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.5.2 \u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001",id:"26152-\u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001",level:3},{value:"26.1.5.3 \u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668",id:"26153-\u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668",level:3},{value:"26.1.5.4 \u5185\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668",id:"26154-\u5185\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668",level:3},{value:"26.1.5.5 \u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"26155-\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.5.6 \u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027\u53ca\u81ea\u5b9a\u4e49",id:"26156-\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027\u53ca\u81ea\u5b9a\u4e49",level:3},{value:"26.1.5.7 \u8bbe\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668",id:"26157-\u8bbe\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668",level:3},{value:"26.1.5.8 \u4f5c\u4e1a\u89e6\u53d1\u5668\u6301\u4e45\u5316\u65b9\u6cd5",id:"26158-\u4f5c\u4e1a\u89e6\u53d1\u5668\u6301\u4e45\u5316\u65b9\u6cd5",level:3},{value:"26.1.5.9 \u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa",id:"26159-\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa",level:3},{value:"26.1.5.10 \u81ea\u5b9a\u4e49 <code>SQL</code> \u8f93\u51fa\u914d\u7f6e",id:"261510-\u81ea\u5b9a\u4e49-sql-\u8f93\u51fa\u914d\u7f6e",level:3},{value:"26.1.5.11 \u67e5\u770b\u6700\u8fd1\u8fd0\u884c\u8bb0\u5f55",id:"261511-\u67e5\u770b\u6700\u8fd1\u8fd0\u884c\u8bb0\u5f55",level:3},{value:"26.1.6 \u4f5c\u4e1a\u8ba1\u5212 <code>Scheduler</code> \u53ca\u6784\u5efa\u5668",id:"2616-\u4f5c\u4e1a\u8ba1\u5212-scheduler-\u53ca\u6784\u5efa\u5668",level:2},{value:"26.1.6.1 \u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212",id:"26161-\u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212",level:3},{value:"26.1.6.2 \u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668",id:"26162-\u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668",level:3},{value:"26.1.6.3 \u8bbe\u7f6e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668",id:"26163-\u8bbe\u7f6e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668",level:3},{value:"26.1.6.4 \u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u6301\u4e45\u5316\u65b9\u6cd5",id:"26164-\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u6301\u4e45\u5316\u65b9\u6cd5",level:3},{value:"26.1.6.5 \u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa",id:"26165-\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa",level:3},{value:"26.1.7 \u4f5c\u4e1a\u8c03\u5ea6\u5668 <code>ScheduleOptionsBuilder</code> \u914d\u7f6e\u9009\u9879",id:"2617-\u4f5c\u4e1a\u8c03\u5ea6\u5668-scheduleoptionsbuilder-\u914d\u7f6e\u9009\u9879",level:2},{value:"26.1.7.1 \u5173\u4e8e <code>ScheduleOptionsBuilder</code>",id:"26171-\u5173\u4e8e-scheduleoptionsbuilder",level:3},{value:"26.1.7.2 <code>ScheduleOptionsBuilder</code> \u5185\u7f6e\u5c5e\u6027\u548c\u65b9\u6cd5",id:"26172-scheduleoptionsbuilder-\u5185\u7f6e\u5c5e\u6027\u548c\u65b9\u6cd5",level:3},{value:"26.1.8 \u4f5c\u4e1a\u76d1\u89c6\u5668 <code>IJobMonitor</code>",id:"2618-\u4f5c\u4e1a\u76d1\u89c6\u5668-ijobmonitor",level:2},{value:"26.1.8.1 \u5173\u4e8e\u53c2\u6570 <code>JobExecutionContext</code>",id:"26181-\u5173\u4e8e\u53c2\u6570-jobexecutioncontext",level:3},{value:"26.1.9 \u4f5c\u4e1a\u6267\u884c\u5668 <code>IJobExecutor</code>",id:"2619-\u4f5c\u4e1a\u6267\u884c\u5668-ijobexecutor",level:2},{value:"26.1.9.1 \u5b9e\u73b0\u91cd\u8bd5\u7b56\u7565",id:"26191-\u5b9e\u73b0\u91cd\u8bd5\u7b56\u7565",level:3},{value:"26.1.9.2 \u5b9e\u73b0\u8d85\u65f6\u63a7\u5236",id:"26192-\u5b9e\u73b0\u8d85\u65f6\u63a7\u5236",level:3},{value:"26.1.9.3 \u66f4\u591a\u63a7\u5236",id:"26193-\u66f4\u591a\u63a7\u5236",level:3},{value:"26.1.10 \u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382 <code>ISchedulerFactory</code>",id:"26110-\u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382-ischedulerfactory",level:2},{value:"26.1.10.1 \u67e5\u627e\u6240\u6709\u4f5c\u4e1a",id:"261101-\u67e5\u627e\u6240\u6709\u4f5c\u4e1a",level:3},{value:"26.1.10.2 \u67e5\u627e\u4e0b\u4e00\u6279\u89e6\u53d1\u7684\u4f5c\u4e1a",id:"261102-\u67e5\u627e\u4e0b\u4e00\u6279\u89e6\u53d1\u7684\u4f5c\u4e1a",level:3},{value:"26.1.10.3 \u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a",id:"261103-\u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a",level:3},{value:"26.1.10.4 \u4fdd\u5b58\u4f5c\u4e1a",id:"261104-\u4fdd\u5b58\u4f5c\u4e1a",level:3},{value:"26.1.10.5 \u6dfb\u52a0\u4f5c\u4e1a",id:"261105-\u6dfb\u52a0\u4f5c\u4e1a",level:3},{value:"26.1.10.6 \u66f4\u65b0\u4f5c\u4e1a",id:"261106-\u66f4\u65b0\u4f5c\u4e1a",level:3},{value:"26.1.10.7 \u5220\u9664\u4f5c\u4e1a",id:"261107-\u5220\u9664\u4f5c\u4e1a",level:3},{value:"26.1.10.8 \u68c0\u67e5\u4f5c\u4e1a\u662f\u5426\u5b58\u5728",id:"261108-\u68c0\u67e5\u4f5c\u4e1a\u662f\u5426\u5b58\u5728",level:3},{value:"26.1.10.9 \u542f\u52a8\u6240\u6709\u4f5c\u4e1a",id:"261109-\u542f\u52a8\u6240\u6709\u4f5c\u4e1a",level:3},{value:"26.1.10.10 \u6682\u505c\u6240\u6709\u4f5c\u4e1a",id:"2611010-\u6682\u505c\u6240\u6709\u4f5c\u4e1a",level:3},{value:"26.1.10.11 \u5220\u9664\u6240\u6709\u4f5c\u4e1a",id:"2611011-\u5220\u9664\u6240\u6709\u4f5c\u4e1a",level:3},{value:"26.1.10.12 \u5f3a\u5236\u89e6\u53d1\u6240\u6709\u4f5c\u4e1a\u6301\u4e45\u5316\u64cd\u4f5c",id:"2611012-\u5f3a\u5236\u89e6\u53d1\u6240\u6709\u4f5c\u4e1a\u6301\u4e45\u5316\u64cd\u4f5c",level:3},{value:"26.1.10.13 \u6821\u5bf9\u6240\u6709\u4f5c\u4e1a",id:"2611013-\u6821\u5bf9\u6240\u6709\u4f5c\u4e1a",level:3},{value:"26.1.10.14 \u5f3a\u5236\u5524\u9192\u4f5c\u4e1a\u8c03\u5ea6\u5668",id:"2611014-\u5f3a\u5236\u5524\u9192\u4f5c\u4e1a\u8c03\u5ea6\u5668",level:3},{value:"26.1.11 \u4f5c\u4e1a\u8ba1\u5212 <code>IScheduler</code>",id:"26111-\u4f5c\u4e1a\u8ba1\u5212-ischeduler",level:2},{value:"26.1.11.1 \u83b7\u53d6 <code>SchedulerModel</code> \u5b9e\u4f8b",id:"261111-\u83b7\u53d6-schedulermodel-\u5b9e\u4f8b",level:3},{value:"26.1.11.2 \u83b7\u53d6 <code>SchedulerBuilder</code>",id:"261112-\u83b7\u53d6-schedulerbuilder",level:3},{value:"26.1.11.3 \u83b7\u53d6 <code>JobBuilder</code>",id:"261113-\u83b7\u53d6-jobbuilder",level:3},{value:"26.1.11.4 \u83b7\u53d6 <code>TriggerBuilder</code> \u96c6\u5408",id:"261114-\u83b7\u53d6-triggerbuilder-\u96c6\u5408",level:3},{value:"26.1.11.5 \u83b7\u53d6\u5355\u4e2a <code>TriggerBuilder</code>",id:"261115-\u83b7\u53d6\u5355\u4e2a-triggerbuilder",level:3},{value:"26.1.11.6 \u83b7\u53d6\u4f5c\u4e1a\u4fe1\u606f",id:"261116-\u83b7\u53d6\u4f5c\u4e1a\u4fe1\u606f",level:3},{value:"26.1.11.7 \u83b7\u53d6\u4f5c\u4e1a\u89e6\u53d1\u5668\u96c6\u5408",id:"261117-\u83b7\u53d6\u4f5c\u4e1a\u89e6\u53d1\u5668\u96c6\u5408",level:3},{value:"26.1.11.8 \u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"261118-\u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.11.9 \u4fdd\u5b58\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"261119-\u4fdd\u5b58\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.11.10 \u66f4\u65b0\u4f5c\u4e1a\u4fe1\u606f",id:"2611110-\u66f4\u65b0\u4f5c\u4e1a\u4fe1\u606f",level:3},{value:"26.1.11.11 \u6dfb\u52a0\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"2611111-\u6dfb\u52a0\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.11.12 \u66f4\u65b0\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"2611112-\u66f4\u65b0\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.11.13 \u5220\u9664\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"2611113-\u5220\u9664\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.11.14 \u5220\u9664\u5f53\u524d\u4f5c\u4e1a",id:"2611114-\u5220\u9664\u5f53\u524d\u4f5c\u4e1a",level:3},{value:"26.1.11.15 \u5224\u65ad\u4f5c\u4e1a\u89e6\u53d1\u5668\u662f\u5426\u5b58\u5728",id:"2611115-\u5224\u65ad\u4f5c\u4e1a\u89e6\u53d1\u5668\u662f\u5426\u5b58\u5728",level:3},{value:"26.1.11.16 \u542f\u52a8\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"2611116-\u542f\u52a8\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.11.17 \u6682\u505c\u4f5c\u4e1a\u89e6\u53d1\u5668",id:"2611117-\u6682\u505c\u4f5c\u4e1a\u89e6\u53d1\u5668",level:3},{value:"26.1.11.18 \u5f3a\u5236\u89e6\u53d1\u4f5c\u4e1a\u6301\u4e45\u5316\u64cd\u4f5c",id:"2611118-\u5f3a\u5236\u89e6\u53d1\u4f5c\u4e1a\u6301\u4e45\u5316\u64cd\u4f5c",level:3},{value:"26.1.11.19 \u542f\u52a8\u5f53\u524d\u4f5c\u4e1a",id:"2611119-\u542f\u52a8\u5f53\u524d\u4f5c\u4e1a",level:3},{value:"26.1.11.20 \u6682\u505c\u5f53\u524d\u4f5c\u4e1a",id:"2611120-\u6682\u505c\u5f53\u524d\u4f5c\u4e1a",level:3},{value:"26.1.11.21 \u6821\u5bf9\u5f53\u524d\u4f5c\u4e1a",id:"2611121-\u6821\u5bf9\u5f53\u524d\u4f5c\u4e1a",level:3},{value:"26.1.11.22 \u5f3a\u5236\u5237\u65b0\u5f53\u524d\u4f5c\u4e1a",id:"2611122-\u5f3a\u5236\u5237\u65b0\u5f53\u524d\u4f5c\u4e1a",level:3},{value:"26.1.11.23 \u8f6c\u6362\u6210 <code>JSON</code> \u683c\u5f0f",id:"2611123-\u8f6c\u6362\u6210-json-\u683c\u5f0f",level:3},{value:"26.1.11.24 \u8f6c\u6362\u6210\u53ef\u679a\u4e3e\u5b57\u5178",id:"2611124-\u8f6c\u6362\u6210\u53ef\u679a\u4e3e\u5b57\u5178",level:3},{value:"26.1.12 \u4f5c\u4e1a\u6301\u4e45\u5316\u5668 <code>IJobPersistence</code>",id:"26112-\u4f5c\u4e1a\u6301\u4e45\u5316\u5668-ijobpersistence",level:2},{value:"26.1.12.1 \u5173\u4e8e\u4f5c\u4e1a\u6301\u4e45\u5316\u5668",id:"261121-\u5173\u4e8e\u4f5c\u4e1a\u6301\u4e45\u5316\u5668",level:3},{value:"26.1.12.2 \u5b9e\u73b0\u4f5c\u4e1a\u6301\u4e45\u5316\u5668",id:"261122-\u5b9e\u73b0\u4f5c\u4e1a\u6301\u4e45\u5316\u5668",level:3},{value:"26.1.12.3 <code>IJobPersistence</code> \u8be6\u7ec6\u8bf4\u660e",id:"261123-ijobpersistence-\u8be6\u7ec6\u8bf4\u660e",level:3},{value:"26.1.12.4 \u5404\u7c7b\u6570\u636e\u5e93\u521b\u5efa\u4f5c\u4e1a\u6301\u4e45\u5316\u8868\u8bed\u53e5",id:"261124-\u5404\u7c7b\u6570\u636e\u5e93\u521b\u5efa\u4f5c\u4e1a\u6301\u4e45\u5316\u8868\u8bed\u53e5",level:3},{value:"26.1.13 \u4f5c\u4e1a\u96c6\u7fa4\u63a7\u5236",id:"26113-\u4f5c\u4e1a\u96c6\u7fa4\u63a7\u5236",level:2},{value:"26.1.13.1 \u5b9e\u73b0\u96c6\u7fa4\u6545\u969c\u8f6c\u79fb",id:"261131-\u5b9e\u73b0\u96c6\u7fa4\u6545\u969c\u8f6c\u79fb",level:3},{value:"26.1.13.2 \u4f5c\u4e1a\u96c6\u7fa4\u6570\u636e\u5e93\u8868\u8bbe\u8ba1",id:"261132-\u4f5c\u4e1a\u96c6\u7fa4\u6570\u636e\u5e93\u8868\u8bbe\u8ba1",level:3},{value:"26.1.13.3 \u5982\u4f55\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861",id:"261133-\u5982\u4f55\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861",level:3},{value:"26.1.14 <code>ScheduleServe</code> \u9759\u6001\u7c7b",id:"26114-scheduleserve-\u9759\u6001\u7c7b",level:2},{value:"26.1.15 \u5982\u4f55\u90e8\u7f72",id:"26115-\u5982\u4f55\u90e8\u7f72",level:2},{value:"26.1.15.1 <code>Worker Service</code> \u4ee3\u7801\u96c6\u6210\u4f8b\u5b50",id:"261151-worker-service-\u4ee3\u7801\u96c6\u6210\u4f8b\u5b50",level:3},{value:"26.1.16 <code>Dashboard</code> \u770b\u677f\u529f\u80fd",id:"26116-dashboard-\u770b\u677f\u529f\u80fd",level:2},{value:"26.1.17 \u5e38\u89c1\u95ee\u9898",id:"26117-\u5e38\u89c1\u95ee\u9898",level:2},{value:"26.1.17.1 \u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u4e2d\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u5b58\u5728\u504f\u5dee",id:"261171-\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u4e2d\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u5b58\u5728\u504f\u5dee",level:3},{value:"26.1.17.2 \u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316",id:"261172-\u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570\u5e8f\u5217\u5316\u53cd\u5e8f\u5217\u5316",level:3},{value:"26.1.17.3 \u4f5c\u4e1a\u4fe1\u606f\u989d\u5916\u6570\u636e\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316",id:"261173-\u4f5c\u4e1a\u4fe1\u606f\u989d\u5916\u6570\u636e\u5e8f\u5217\u5316\u53cd\u5e8f\u5217\u5316",level:3},{value:"26.1.17.4 \u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u5ef6\u8fdf\u5904\u7406",id:"261174-\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u5ef6\u8fdf\u5904\u7406",level:3},{value:"26.1.18 \u53cd\u9988\u4e0e\u5efa\u8bae",id:"26118-\u53cd\u9988\u4e0e\u5efa\u8bae",level:2}],g={toc:c};function N(e){let{components:n,...t}=e;return(0,a.kt)("wrapper",(0,r.Z)({},g,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("details",null,(0,a.kt)("summary",null,"\ud83d\udcdd \u6a21\u5757\u66f4\u65b0\u65e5\u5fd7"),(0,a.kt)("div",null,(0,a.kt)("div",null,(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u65b0\u7279\u6027")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," \u5b9a\u65f6\u4efb\u52a1 ",(0,a.kt)("inlineCode",{parentName:"li"},"Dashboard")," \u67e5\u770b\u4f5c\u4e1a\u89e6\u53d1\u5668\u6700\u8fd1\u8fd0\u884c\u8bb0\u5f55\u529f\u80fd ",(0,a.kt)("sup",null,"4.8.4.3")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2023.01.03")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/e7d24d84bcc448b0a13f8e0b76328669261af44b"},"e7d24d8")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," \u5b9a\u65f6\u4efb\u52a1\u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"li"},"trigger.GetTimelines()")," \u83b7\u53d6\u6700\u8fd1 ",(0,a.kt)("inlineCode",{parentName:"li"},"10")," \u6761\u8fd0\u884c\u8bb0\u5f55\u5217\u8868 ",(0,a.kt)("sup",null,"4.8.4.3")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2023.01.03")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/e7d24d84bcc448b0a13f8e0b76328669261af44b"},"e7d24d8")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," ",(0,a.kt)("strong",{parentName:"li"},"\u5b9a\u65f6\u4efb\u52a1 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Dashboard")," \u770b\u677f")," ",(0,a.kt)("sup",null,"4.8.4")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.12.30")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/d3f966921dfa757c12c2bd071fb19fc166a2f24e"},"d3f9669")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," \u5b9a\u65f6\u4efb\u52a1 ",(0,a.kt)("inlineCode",{parentName:"li"},"IScheduler.GetEnumerable()")," \u65b9\u6cd5\uff0c\u53ef\u5c06\u4f5c\u4e1a\u8ba1\u5212\u8f6c\u6362\u6210\u53ef\u679a\u4e3e\u5b57\u5178 ",(0,a.kt)("sup",null,"4.8.4")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.12.30")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/4d5235c37a9ef5e66e92847e65ef9786bcd7387c"},"4d5235c")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," \u5b9a\u65f6\u4efb\u52a1\u914d\u7f6e\u9009\u9879 ",(0,a.kt)("inlineCode",{parentName:"li"},"options.JobDetail.LogEnabled")," \u914d\u7f6e\uff0c\u53ef\u81ea\u52a8\u8f93\u51fa\u6267\u884c\u65e5\u5fd7 ",(0,a.kt)("sup",null,"4.8.3.7")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.12.14")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/58d2c20de05dc458b206863f7814e89866e7522b"},"58d2c20")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," ",(0,a.kt)("strong",{parentName:"li"},"\u5b9a\u65f6\u4efb\u52a1 ",(0,a.kt)("inlineCode",{parentName:"strong"},"IScheduler")," \u5bf9\u8c61\u6bcf\u6b21\u64cd\u4f5c\u540e\u81ea\u52a8\u5237\u65b0\u548c\u63d0\u4f9b\u624b\u52a8\u5237\u65b0 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Reload()")," \u65b9\u6cd5")," ",(0,a.kt)("sup",null,"4.8.3.3")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.12.09")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/issues/I65EQ1#note_15047484_link"},"#I65EQ1")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," \u5b9a\u65f6\u4efb\u52a1\u95f4\u9694\u5206\u949f\u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"li"},"Triggers.PeriodMinutes(5)")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"[PeriodMinutes(5)]")," \u7279\u6027 ",(0,a.kt)("sup",null,"4.8.2.8")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.12.01")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/8e1f06fa2161ee2bf8bcea29af8aaa5a60ef9db9"},"8e1f06f")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," \u5b9a\u65f6\u4efb\u52a1\u5de5\u4f5c\u65e5\u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"li"},"Triggers.Workday()")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"[Workday]")," \u7279\u6027 ",(0,a.kt)("sup",null,"4.8.2.6")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.30")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/28b2d20b3f6034a4cdf5827576c34412315fbb15"},"28b2d20")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," \u5b9a\u65f6\u4efb\u52a1\u4f5c\u4e1a\u6821\u5bf9\u529f\u80fd\uff0c\u53ef\u5bf9\u8bef\u5dee\u8fdb\u884c\u6821\u6b63 ",(0,a.kt)("sup",null,"4.8.2.6")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.30")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/f725a252e6a89f9dea6489d4e54452077b1935e5"},"f725a25")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," ",(0,a.kt)("strong",{parentName:"li"},"\u5b9a\u65f6\u4efb\u52a1 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Triggers")," \u6240\u6709\u5e26 ",(0,a.kt)("inlineCode",{parentName:"strong"},"At")," \u7684 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Cron")," \u8868\u8fbe\u5f0f\u89e6\u53d1\u5668\u6784\u5efa\u5668\u53ca\u7279\u6027")," ",(0,a.kt)("sup",null,"4.8.2.5")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.29")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/dotnetchina/Sundial/issues/I63PLR"},"#I63PLR")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," \u5b9a\u65f6\u4efb\u52a1\u6279\u91cf\u6dfb\u52a0 ",(0,a.kt)("inlineCode",{parentName:"li"},"SchedulerBuilder")," \u4f5c\u4e1a\u529f\u80fd ",(0,a.kt)("sup",null,"4.8.2.4")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.29")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/5faa67b7817459cb0ee0add86a6e53c17ff51a05"},"5faa67b")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," \u5b9a\u65f6\u4efb\u52a1 ",(0,a.kt)("inlineCode",{parentName:"li"},"BuildSqlType")," \u914d\u7f6e\uff0c\u53ef\u8bbe\u7f6e\u751f\u6210\u4e0d\u540c\u6570\u636e\u5e93\u7c7b\u578b\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u8bed\u53e5 ",(0,a.kt)("sup",null,"4.8.2.3")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.29")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/293f9bce34fc4f70eacae1043ed697d31da88409"},"293f9bc")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/pulls/675"},"!675")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," ",(0,a.kt)("inlineCode",{parentName:"li"},"JobDetail")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"Trigger")," \u81ea\u5b9a\u4e49 ",(0,a.kt)("inlineCode",{parentName:"li"},"ConvertToSQL")," \u8f93\u51fa ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u914d\u7f6e ",(0,a.kt)("sup",null,"4.8.2")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.27")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/0bb9d8f1f3606af145b44c2984b87fdc020f02e1"},"0bb9d8f")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," ",(0,a.kt)("strong",{parentName:"li"},"\u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"strong"},"ResetOnlyOnce")," \u5c5e\u6027\uff0c\u652f\u6301\u53ea\u8fd0\u884c\u4e00\u6b21\u7684\u4f5c\u4e1a\u91cd\u65b0\u542f\u52a8\u670d\u52a1\u91cd\u590d\u6267\u884c")," ",(0,a.kt)("sup",null,"4.8.1.5")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.25")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/a8be728eac986ebc5f44718b08c67aaee8b89dc6"},"a8be728")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," \u52a8\u6001\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u59d4\u6258\u652f\u6301 ",(0,a.kt)("sup",null,"4.8.1.8")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.27")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/e02266c44187dbc2b416abe1ca4112ce13c89180"},"e02266c")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u7a81\u7834\u6027\u53d8\u5316")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u8c03\u6574")," ",(0,a.kt)("strong",{parentName:"li"},"\u5b9a\u65f6\u4efb\u52a1\u5e95\u5c42\u6240\u6709\u4ee3\u7801\uff0c\u65e5\u5fd7\uff0c\u6ce8\u91ca\uff0c\u6587\u6863")," ",(0,a.kt)("sup",null,"4.8.1.10")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.12.05")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u95ee\u9898\u4fee\u590d")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u4fee\u590d")," \u5b9a\u65f6\u4efb\u52a1\u505c\u6b62\u4f5c\u4e1a\u89e6\u53d1\u5668\u540e\u8fd0\u884c\u8bb0\u5f55\u4e0d\u80fd\u5199\u5165\u6700\u65b0\u8bb0\u5f55\u95ee\u9898 ",(0,a.kt)("sup",null,"4.8.4.8")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2023.01.05")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/d4c553fb9b0037ab29942ccc2a25a386fc28c1db"},"d4c553f")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u4fee\u590d")," \u5b9a\u65f6\u4efb\u52a1\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"li"},"TouchSocket.Pure")," \u5305\u8bbf\u95ee ",(0,a.kt)("inlineCode",{parentName:"li"},"Dashboard")," \u51fa\u73b0 ",(0,a.kt)("inlineCode",{parentName:"li"},"404")," \u95ee\u9898 ",(0,a.kt)("sup",null,"4.8.4.2")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2023.01.02")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/21977b70ef84fd674bb306ab86ef032f7f28c7a7"},"21977b7")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u4fee\u590d")," \u5b9a\u65f6\u4efb\u52a1\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"li"},"scheduler.RemoveTrigger(triggerId)")," \u62a5\u5f02\u5e38\u95ee\u9898 ",(0,a.kt)("sup",null,"4.8.3.3")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.12.09")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/issues/I65EQ1#note_15047484_link"},"#I65EQ1")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u4fee\u590d")," \u5b9a\u65f6\u4efb\u52a1\u4f5c\u4e1a\u89e6\u53d1\u5668\u914d\u7f6e\u4e86 ",(0,a.kt)("inlineCode",{parentName:"li"},"EndTime")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"StartTime")," \u4e4b\u540e ",(0,a.kt)("inlineCode",{parentName:"li"},"Status")," \u6ca1\u6709\u5bf9\u5e94\u4e0a ",(0,a.kt)("sup",null,"4.8.3.1")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.12.09")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/52a5506c2fda7c31df01b2e90af7ad6b0c5f94aa"},"52a5506")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u4fee\u590d")," \u5b9a\u65f6\u4efb\u52a1\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"li"},"scheduler.AddTrigger(triggerBuilder)")," \u65e0\u6548\u7684\u95ee\u9898 ",(0,a.kt)("sup",null,"4.8.3.1")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.12.09")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/issues/I65EQ1"},"#I65EQ1")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u4fee\u590d")," \u4f5c\u4e1a\u62e5\u6709\u591a\u4e2a\u89e6\u53d1\u5668\u65f6\u6682\u505c\u4f5c\u4e1a\u540e\u4f9d\u7136\u5b58\u5728\u4e2a\u522b\u672a\u6682\u505c\u7684\u6e05\u7a7a\uff08\u5e76\u53d1\u95ee\u9898\uff09 ",(0,a.kt)("sup",null,"4.8.2.12")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.12.07")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/issues/I655W9"},"#I655W9")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u4fee\u590d")," \u4f5c\u4e1a\u89e6\u53d1\u5668\u4e0d\u7b26\u5408\u4e0b\u4e00\u6b21\u6267\u884c\u89c4\u5f8b\u4f46 ",(0,a.kt)("inlineCode",{parentName:"li"},"NextRunTime")," \u4e0d\u4e3a ",(0,a.kt)("inlineCode",{parentName:"li"},"null")," \u60c5\u51b5 ",(0,a.kt)("sup",null,"4.8.1.5")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.25")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/a8be728eac986ebc5f44718b08c67aaee8b89dc6"},"a8be728")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u4fee\u590d")," \u8fd0\u884c\u65f6\u542f\u52a8/\u6682\u505c\u4f5c\u4e1a\u65e0\u6548\u95ee\u9898 ",(0,a.kt)("sup",null,"4.8.1.6")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.25")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/issues/I6368M"},"#I6368M")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u4fee\u590d")," \u5b9a\u65f6\u4efb\u52a1\u751f\u6210\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u8bed\u53e5\u4e0d\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"li"},"MySQL")," \u95ee\u9898 ",(0,a.kt)("sup",null,"4.8.1.7")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.26")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/issues/I638ZC"},"#I638ZC")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u5176\u4ed6\u66f4\u6539")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u8c03\u6574")," \u5b9a\u65f6\u4efb\u52a1\u8c03\u5ea6\u5668\u65f6\u95f4\u7cbe\u5ea6\uff0c\u63a7\u5236\u6301\u7eed\u6267\u884c\u4e00\u5e74\u8bef\u5dee\u5728 ",(0,a.kt)("inlineCode",{parentName:"li"},"100ms")," \u4ee5\u5185 ",(0,a.kt)("sup",null,"4.8.2.9")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.12.01")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/334d08989503bacd8bf2abb2cc87cf2031dc9da6"},"334d089")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u8c03\u6574")," \u5b9a\u65f6\u4efb\u52a1\u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382 ",(0,a.kt)("inlineCode",{parentName:"li"},"GetNextRunJobs()")," \u65b9\u6cd5\u903b\u8f91 ",(0,a.kt)("sup",null,"4.8.2.7")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.30")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/issues/I63VS2"},"#I63VS2")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("p",{parentName:"li"},(0,a.kt)("strong",{parentName:"p"},"\u6587\u6863")),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," \u4f5c\u4e1a\u6267\u884c\u5668\u5b9e\u73b0\u8d85\u65f6\u6587\u6863 ",(0,a.kt)("sup",null,"4.8.3.8")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.12.20")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," \u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"li"},"ResetOnlyOnce")," \u6587\u6863 ",(0,a.kt)("sup",null,"4.8.1.5")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.25")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/a8be728eac986ebc5f44718b08c67aaee8b89dc6"},"a8be728")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," ",(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Roslyn")," \u52a8\u6001\u7f16\u8bd1\u4ee3\u7801\u521b\u5efa ",(0,a.kt)("inlineCode",{parentName:"strong"},"IJob")," \u7c7b\u578b\u6587\u6863")," ",(0,a.kt)("sup",null,"4.8.1.5")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.25")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/2c5e5befc7a335d6ef0e75eea0061aee1e4dd061"},"2c5e5be")),(0,a.kt)("li",{parentName:"ul"},"\xa0",(0,a.kt)(i.Z,{mdxType:"Tag"},"\u65b0\u589e")," \u81ea\u5b9a\u4e49 ",(0,a.kt)("inlineCode",{parentName:"li"},"JobDetail")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"Trigger")," \u8f93\u51fa ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u6587\u6863 ",(0,a.kt)("sup",null,"4.8.2")," ",(0,a.kt)("sup",null,"\u23f1\ufe0f2022.11.27")," ",(0,a.kt)("a",{parentName:"li",href:"https://gitee.com/rrqm_home/TouchSocket/commit/0bb9d8f1f3606af145b44c2984b87fdc020f02e1"},"0bb9d8f")))))))),(0,a.kt)("admonition",{title:"4.8.0 \u4ee5\u4e0b\u7248\u672c\u8bf4\u660e",type:"warning"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\u5728 ",(0,a.kt)("inlineCode",{parentName:"strong"},"TouchSocket 4.8.0+")," \u7248\u672c\u91c7\u7528 ",(0,a.kt)("a",{parentName:"strong",href:"https://gitee.com/dotnetchina/Sundial"},"Sundial")," \u5b9a\u65f6\u4efb\u52a1\u66ff\u6362\u539f\u6709\u7684 ",(0,a.kt)("inlineCode",{parentName:"strong"},"TaskScheduler")),"\uff0c",(0,a.kt)("a",{parentName:"p",href:"/docs/job-old"},"\u67e5\u770b\u65e7\u6587\u6863"))),(0,a.kt)("admonition",{title:"\u7248\u672c\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u9650 ",(0,a.kt)("inlineCode",{parentName:"p"},"TouchSocket 4.8.0 +")," \u7248\u672c\u4f7f\u7528\u3002")),(0,a.kt)("h2",{id:"2611-\u5173\u4e8e\u8c03\u5ea6\u4f5c\u4e1a"},"26.1.1 \u5173\u4e8e\u8c03\u5ea6\u4f5c\u4e1a"),(0,a.kt)("p",null,"\u8c03\u5ea6\u4f5c\u4e1a\u53c8\u79f0\u5b9a\u65f6\u4efb\u52a1\uff0c\u987e\u540d\u601d\u4e49\uff0c\u5b9a\u65f6\u4efb\u52a1\u5c31\u662f\u5728\u7279\u5b9a\u7684\u65f6\u95f4\u6216\u7b26\u5408\u67d0\u79cd\u65f6\u95f4\u89c4\u5f8b\u81ea\u52a8\u89e6\u53d1\u5e76\u6267\u884c\u4efb\u52a1\u3002"),(0,a.kt)("img",{src:(0,o.Z)("img/scdr.png")}),(0,a.kt)("h3",{id:"26111-\u4f7f\u7528\u573a\u666f"},"26.1.1.1 \u4f7f\u7528\u573a\u666f"),(0,a.kt)("p",null,"\u5b9a\u65f6\u4efb\u52a1\u7684\u5e94\u7528\u573a\u666f\u975e\u5e38\u5e7f\uff0c\u51e0\u4e4e\u662f\u6bcf\u4e00\u4e2a\u8f6f\u4ef6\u7cfb\u7edf\u5fc5\u5907\u529f\u80fd\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"\u53eb\u4f60\u8d77\u5e8a\u7684\u95f9\u949f"),(0,a.kt)("li",{parentName:"ul"},"\u65e5\u5386\u65e5\u7a0b\u63d0\u9192"),(0,a.kt)("li",{parentName:"ul"},"\u751f\u65e5\u7eaa\u5ff5\u65e5\u63d0\u9192"),(0,a.kt)("li",{parentName:"ul"},"\u5b9a\u65f6\u5907\u4efd\u6570\u636e\u5e93"),(0,a.kt)("li",{parentName:"ul"},"\u5b9a\u65f6\u6e05\u7406\u5783\u573e\u6570\u636e"),(0,a.kt)("li",{parentName:"ul"},"\u5b9a\u65f6\u53d1\u9001\u8425\u9500\u4fe1\u606f\uff0c\u90ae\u4ef6"),(0,a.kt)("li",{parentName:"ul"},"\u5b9a\u65f6\u4e0a\u7ebf\u4ea7\u54c1\uff0c\u6bd4\u5982\u9884\u552e\u4ea7\u54c1\uff0c\u53cc\u5341\u4e00\u6d3b\u52a8"),(0,a.kt)("li",{parentName:"ul"},"\u5b9a\u65f6\u53d1\u9001\u4f18\u60e0\u5238"),(0,a.kt)("li",{parentName:"ul"},"\u5b9a\u65f6\u53d1\u5e03\uff0c\u5b9e\u73b0 Devops \u529f\u80fd\uff0c\u5982 Jenkins"),(0,a.kt)("li",{parentName:"ul"},"\u5b9a\u65f6\u722c\u866b\u6293\u6570\u636e"),(0,a.kt)("li",{parentName:"ul"},"\u5b9a\u65f6\u5bfc\u51fa\u62a5\u8868\uff0c\u5386\u53f2\u7edf\u8ba1\uff0c\u8003\u52e4\u7edf\u8ba1"),(0,a.kt)("li",{parentName:"ul"},"...")),(0,a.kt)("h2",{id:"2612-\u5feb\u901f\u5165\u95e8"},"26.1.2 \u5feb\u901f\u5165\u95e8"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u5b9a\u4e49\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f ",(0,a.kt)("inlineCode",{parentName:"li"},"MyJob"),"\uff1a")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,9,11}",showLineNumbers:!0,"{1,9,11}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context}");\n        return Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"\u5728 ",(0,a.kt)("inlineCode",{parentName:"li"},"Startup.cs")," \u6ce8\u518c ",(0,a.kt)("inlineCode",{parentName:"li"},"Schedule")," \u670d\u52a1\uff1a")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3-4}",showLineNumbers:!0,"{1,3-4}":!0},"services.AddSchedule(options =>\n{\n    // \u6ce8\u518c\u4f5c\u4e1a\uff0c\u5e76\u914d\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\n    options.AddJob<MyJob>(Triggers.Secondly()); // \u8868\u793a\u6bcf\u79d2\u6267\u884c\n});\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {6,8,10,12,14,16,18}",showLineNumbers:!0,"{6,8,10,12,14,16,18}":!0},"info: 2022-12-02 16:51:33.5032989 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-02 16:51:33.5180669 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-02 16:51:34.1452041 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-02 16:51:34.1541701 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-02 16:51:34.1748401 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-02 16:51:35.0712571 +08:00 \u661f\u671f\u4e94 L MyJob[0] #4\n      <job1> [C] <job1 job1_trigger1> * * * * * * 1ts 2022-12-02 16:51:35.000 -> 2022-12-02 16:51:36.000\ninfo: 2022-12-02 16:51:36.0317375 +08:00 \u661f\u671f\u4e94 L MyJob[0] #14\n      <job1> [C] <job1 job1_trigger1> * * * * * * 2ts 2022-12-02 16:51:36.000 -> 2022-12-02 16:51:37.000\ninfo: 2022-12-02 16:51:37.0125007 +08:00 \u661f\u671f\u4e94 L MyJob[0] #9\n      <job1> [C] <job1 job1_trigger1> * * * * * * 3ts 2022-12-02 16:51:37.000 -> 2022-12-02 16:51:38.000\ninfo: 2022-12-02 16:51:38.0179920 +08:00 \u661f\u671f\u4e94 L MyJob[0] #8\n      <job1> [C] <job1 job1_trigger1> * * * * * * 4ts 2022-12-02 16:51:38.000 -> 2022-12-02 16:51:39.000\n")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"JobExecutionContext")," \u91cd\u5199\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"ToString()")," \u65b9\u6cd5\u5e76\u63d0\u4f9b\u4ee5\u4e0b\u51e0\u79cd\u683c\u5f0f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,5}",showLineNumbers:!0,"{2,5}":!0},"# \u6301\u7eed\u8fd0\u884c\u683c\u5f0f\n<\u4f5c\u4e1aId> \u4f5c\u4e1a\u63cf\u8ff0 [\u5e76\u884cC/\u4e32\u884cS] <\u4f5c\u4e1aId \u89e6\u53d1\u5668Id> \u89e6\u53d1\u5668\u5b57\u7b26\u4e32 \u89e6\u53d1\u5668\u63cf\u8ff0 \u89e6\u53d1\u6b21\u6570ts \u89e6\u53d1\u65f6\u95f4 -> \u4e0b\u4e00\u6b21\u89e6\u53d1\u65f6\u95f4\n\n# \u89e6\u53d1\u505c\u6b62\u683c\u5f0f\n<\u4f5c\u4e1aId> \u4f5c\u4e1a\u63cf\u8ff0 [\u5e76\u884cC/\u4e32\u884cS] <\u4f5c\u4e1aId \u89e6\u53d1\u5668Id> \u89e6\u53d1\u5668\u5b57\u7b26\u4e32 \u89e6\u53d1\u5668\u63cf\u8ff0 \u89e6\u53d1\u6b21\u6570ts \u89e6\u53d1\u65f6\u95f4 [\u89e6\u53d1\u5668\u7ec8\u6b62\u72b6\u6001]\n")),(0,a.kt)("h3",{id:"26121-\u6307\u5b9a\u4f5c\u4e1a-id"},"26.1.2.1 \u6307\u5b9a\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"h3"},"Id")),(0,a.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4e0d\u6307\u5b9a\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"p"},"Id")," \u4f1a\u81ea\u52a8\u751f\u6210 ",(0,a.kt)("inlineCode",{parentName:"p"},"job[\u7f16\u53f7]"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},'services.AddSchedule(options =>\n{\n    options.AddJob<MyJob>("myjob", Triggers.Secondly());\n});\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {6,8,12,14,16}",showLineNumbers:!0,"{6,8,12,14,16}":!0},"info: 2022-12-02 17:15:43.3024818 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-02 17:15:43.3107918 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-02 17:15:43.9498664 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The <myjob_trigger1> trigger for scheduler of <myjob> successfully appended to the schedule.\ninfo: 2022-12-02 17:15:43.9532894 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The scheduler of <myjob> successfully appended to the schedule.\nwarn: 2022-12-02 17:15:43.9941565 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-02 17:15:44.1230353 +08:00 \u661f\u671f\u4e94 L MyJob[0] #6\n      <myjob> [C] <myjob myjob_trigger1> * * * * * * 1ts 2022-12-02 17:15:44.000 -> 2022-12-02 17:15:45.000\ninfo: 2022-12-02 17:15:45.0854893 +08:00 \u661f\u671f\u4e94 L MyJob[0] #9\n      <myjob> [C] <myjob myjob_trigger1> * * * * * * 2ts 2022-12-02 17:15:45.000 -> 2022-12-02 17:15:46.000\ninfo: 2022-12-02 17:15:46.0100813 +08:00 \u661f\u671f\u4e94 L MyJob[0] #13\n      <myjob> [C] <myjob myjob_trigger1> * * * * * * 3ts 2022-12-02 17:15:46.000 -> 2022-12-02 17:15:47.000\n")),(0,a.kt)("h3",{id:"26122-\u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.2.2 \u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("p",null,"\u6709\u65f6\u5019\uff0c\u4e00\u4e2a\u4f5c\u4e1a\u652f\u6301\u591a\u79cd\u89e6\u53d1\u65f6\u95f4\uff0c\u6bd4\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u6bcf\u5206\u949f")," \u6267\u884c\u4e00\u6b21\uff0c\u6bcf ",(0,a.kt)("inlineCode",{parentName:"p"},"5\u79d2")," \u6267\u884c\u4e00\u6b21\uff0c\u6bcf\u5206\u949f\u7b2c ",(0,a.kt)("inlineCode",{parentName:"p"},"3/7/8\u79d2")," \u6267\u884c\u4e00\u6b21\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3-5}",showLineNumbers:!0,"{3-5}":!0},'services.AddSchedule(options =>\n{\n    options.AddJob<MyJob>(Triggers.Minutely()   // \u6bcf\u5206\u949f\u5f00\u59cb\n     , Triggers.Period(5000)   // \u6bcf 5 \u79d2\uff0c\u8fd8\u652f\u6301 Triggers.PeriodSeconds(5)\uff0cTriggers.PeriodMinutes(5)\uff0cTriggers.PeriodHours(5)\n     , Triggers.Cron("3,7,8 * * * * ?", CronStringFormat.WithSeconds));  // \u6bcf\u5206\u949f\u7b2c 3/7/8 \u79d2\n});\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {6,8,10,12,16,18,20,24,26}",showLineNumbers:!0,"{6,8,10,12,16,18,20,24,26}":!0},"info: 2022-12-02 17:18:53.3593518 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-02 17:18:53.3663583 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-02 17:18:54.0381456 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-02 17:18:54.0708796 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger2> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-02 17:18:54.0770193 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger3> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-02 17:18:54.0800017 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-02 17:18:54.1206816 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-02 17:18:59.0040452 +08:00 \u661f\u671f\u4e94 L MyJob[0] #9\n      <job1> [C] <job1 job1_trigger2> 5000ms 1ts 2022-12-02 17:18:58.927 -> 2022-12-02 17:19:03.944\ninfo: 2022-12-02 17:19:00.0440142 +08:00 \u661f\u671f\u4e94 L MyJob[0] #15\n      <job1> [C] <job1 job1_trigger1> * * * * * 1ts 2022-12-02 17:19:00.000 -> 2022-12-02 17:20:00.000\ninfo: 2022-12-02 17:19:03.0149075 +08:00 \u661f\u671f\u4e94 L MyJob[0] #6\n      <job1> [C] <job1 job1_trigger3> 3,7,8 * * * * ? 1ts 2022-12-02 17:19:03.000 -> 2022-12-02 17:19:07.000\ninfo: 2022-12-02 17:19:03.9519350 +08:00 \u661f\u671f\u4e94 L MyJob[0] #15\n      <job1> [C] <job1 job1_trigger2> 5000ms 2ts 2022-12-02 17:19:03.944 -> 2022-12-02 17:19:08.919\ninfo: 2022-12-02 17:19:07.0116797 +08:00 \u661f\u671f\u4e94 L MyJob[0] #4\n      <job1> [C] <job1 job1_trigger3> 3,7,8 * * * * ? 2ts 2022-12-02 17:19:07.000 -> 2022-12-02 17:19:08.000\ninfo: 2022-12-02 17:19:08.0078132 +08:00 \u661f\u671f\u4e94 L MyJob[0] #15\n      <job1> [C] <job1 job1_trigger3> 3,7,8 * * * * ? 3ts 2022-12-02 17:19:08.000 -> 2022-12-02 17:20:03.000\ninfo: 2022-12-02 17:19:08.9298393 +08:00 \u661f\u671f\u4e94 L MyJob[0] #14\n      <job1> [C] <job1 job1_trigger2> 5000ms 3ts 2022-12-02 17:19:08.919 -> 2022-12-02 17:19:13.897\ninfo: 2022-12-02 17:19:13.9056247 +08:00 \u661f\u671f\u4e94 L MyJob[0] #8\n      <job1> [C] <job1 job1_trigger2> 5000ms 4ts 2022-12-02 17:19:13.897 -> 2022-12-02 17:19:18.872\ninfo: 2022-12-02 17:19:18.8791123 +08:00 \u661f\u671f\u4e94 L MyJob[0] #12\n      <job1> [C] <job1 job1_trigger2> 5000ms 5ts 2022-12-02 17:19:18.872 -> 2022-12-02 17:19:23.846\n")),(0,a.kt)("h3",{id:"26123-\u4e32\u884c-\u6267\u884c"},"26.1.2.3 ",(0,a.kt)("inlineCode",{parentName:"h3"},"\u4e32\u884c")," \u6267\u884c"),(0,a.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f5c\u4e1a\u91c7\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u5e76\u884c")," \u6267\u884c\u65b9\u5f0f\uff0c\u4e5f\u5c31\u662f\u4e0d\u4f1a\u7b49\u5f85\u4e0a\u4e00\u6b21\u4f5c\u4e1a\u6267\u884c\u5b8c\u6210\uff0c\u53ea\u8981\u89e6\u53d1\u65f6\u95f4\u5230\u4e86\u5c31\u81ea\u52a8\u6267\u884c\uff0c\u4f46\u4e00\u4e9b\u60c5\u51b5\u4e0b\uff0c\u6211\u4eec\u53ef\u80fd\u5e0c\u671b\u7b49\u5f85\u4e0a\u4e00\u6b21\u4f5c\u4e1a\u5b8c\u6210\u518d\u6267\u884c\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n    options.AddJob<MyJob>(concurrent: false, Triggers.Secondly()); // \u4e32\u884c\uff0c\u6bcf\u79d2\u6267\u884c\n});\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {12}",showLineNumbers:!0,"{12}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context.JobId} {context.TriggerId} {context.OccurrenceTime} {context.Trigger}");\n        await Task.Delay(2000, stoppingToken); // \u8fd9\u91cc\u6a21\u62df\u8017\u65f6\u64cd\u4f5c\uff0c\u6bd4\u5982\u8017\u65f62\u79d2\n    }\n}\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {6,8,12,14,16,18,20}",showLineNumbers:!0,"{6,8,12,14,16,18,20}":!0},"info: 2022-12-02 17:23:27.3726863 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-02 17:23:27.3830366 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-02 17:23:27.9083148 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-02 17:23:27.9184699 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-02 17:23:27.9740028 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-02 17:23:28.0638789 +08:00 \u661f\u671f\u4e94 L MyJob[0] #9\n      <job1> [S] <job1 job1_trigger1> * * * * * * 1ts 2022-12-02 17:23:28.000 -> 2022-12-02 17:23:29.000\nwarn: 2022-12-02 17:23:29.1119269 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #9\n      12/02/2022 17:23:29: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\nwarn: 2022-12-02 17:23:30.0090551 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #9\n      12/02/2022 17:23:30: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\ninfo: 2022-12-02 17:23:31.0121694 +08:00 \u661f\u671f\u4e94 L MyJob[0] #9\n      <job1> [S] <job1 job1_trigger1> * * * * * * 2ts 2022-12-02 17:23:31.000 -> 2022-12-02 17:23:32.000\nwarn: 2022-12-02 17:23:32.0243646 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #9\n      12/02/2022 17:23:32: The <job1_trigger1> trigger of job <job1> failed to execute as scheduled due to blocking.\n")),(0,a.kt)("admonition",{type:"caution"},(0,a.kt)("mdxAdmonitionTitle",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"\u4e32\u884c")," \u6267\u884c\u89c4\u5219\u8bf4\u660e"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"\u4e32\u884c")," \u6267\u884c\u5982\u679c\u9047\u5230\u4e0a\u4e00\u6b21\u4f5c\u4e1a\u8fd8\u672a\u5b8c\u6210\u90a3\u4e48\u5b83\u4f1a\u7b49\u5230\u4e0b\u4e00\u6b21\u89e6\u53d1\u65f6\u95f4\u5230\u4e86\u518d\u6267\u884c\uff0c\u4ee5\u6b64\u91cd\u590d\u3002")),(0,a.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u4e32\u884c")," \u6267\u884c\u4f46\u56e0\u4e3a\u8017\u65f6\u5bfc\u81f4",(0,a.kt)("strong",{parentName:"p"},"\u89e6\u53d1\u65f6\u95f4\u5230\u4e86\u4f46\u5b9e\u9645\u672a\u80fd\u6267\u884c"),"\u4f1a\u9ed8\u8ba4\u8f93\u51fa ",(0,a.kt)("inlineCode",{parentName:"p"},"warn")," \u8b66\u544a\u65e5\u5fd7\uff0c\u5982\u9700\u5173\u95ed\u53ea\u9700\u8981\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n    options.LogEnabled = false;\n    options.AddJob<MyJob>(concurrent: false, Triggers.Secondly()); // \u6bcf\u79d2\u6267\u884c\n});\n")),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,4,6,8,10}",showLineNumbers:!0,"{2,4,6,8,10}":!0},"info: 2022-12-02 17:27:13.1136450 +08:00 \u661f\u671f\u4e94 L MyJob[0] #12\n      <job1> [S] <job1 job1_trigger1> * * * * * * 1ts 2022-12-02 17:27:13.000 -> 2022-12-02 17:27:14.000\ninfo: 2022-12-02 17:27:16.0092433 +08:00 \u661f\u671f\u4e94 L MyJob[0] #8\n      <job1> [S] <job1 job1_trigger1> * * * * * * 2ts 2022-12-02 17:27:16.000 -> 2022-12-02 17:27:17.000\ninfo: 2022-12-02 17:27:19.0092363 +08:00 \u661f\u671f\u4e94 L MyJob[0] #6\n      <job1> [S] <job1 job1_trigger1> * * * * * * 3ts 2022-12-02 17:27:19.000 -> 2022-12-02 17:27:20.000\ninfo: 2022-12-02 17:27:22.0183594 +08:00 \u661f\u671f\u4e94 L MyJob[0] #9\n      <job1> [S] <job1 job1_trigger1> * * * * * * 4ts 2022-12-02 17:27:22.000 -> 2022-12-02 17:27:23.000\ninfo: 2022-12-02 17:27:25.0152323 +08:00 \u661f\u671f\u4e94 L MyJob[0] #4\n      <job1> [S] <job1 job1_trigger1> * * * * * * 5ts 2022-12-02 17:27:25.000 -> 2022-12-02 17:27:26.000\n")),(0,a.kt)("h3",{id:"26124-\u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f"},"26.1.2.4 \u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f"),(0,a.kt)("p",null,"\u6846\u67b6\u63d0\u4f9b\u4e86\u56db\u79cd\u65b9\u5f0f\u6253\u5370\u4f5c\u4e1a\u5b8c\u6574\u4fe1\u606f\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u7b2c\u4e00\u79cd\uff1a\u8f93\u51fa\u5b8c\u6574\u7684\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u4fe1\u606f\uff1a",(0,a.kt)("inlineCode",{parentName:"strong"},"context.ConvertToJSON()")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11}",showLineNumbers:!0,"{11}":!0},"public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation(context.ConvertToJSON());\n        await Task.CompletedTask;\n    }\n}\n")),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6253\u5370\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:"showLineNumbers {3,14}",showLineNumbers:!0,"{3,14}":!0},'info: 2022-12-02 18:00:59.4140802 +08:00 \u661f\u671f\u4e94 L MyJob[0] #13\n      {\n        "jobDetail": {\n        "jobId": "job1",\n        "groupName": null,\n        "jobType": "MyJob",\n        "assemblyName": "ConsoleApp32",\n        "description": null,\n        "concurrent": true,\n        "includeAnnotations": false,\n        "properties": "{}",\n        "updatedTime": "2022-12-02 18:00:59.390"\n      },\n        "trigger": {\n        "triggerId": "job1_trigger1",\n        "jobId": "job1",\n        "triggerType": "TouchSocket.Schedule.PeriodSecondsTrigger",\n        "assemblyName": "TouchSocket",\n        "args": "[5]",\n        "description": null,\n        "status": 2,\n        "startTime": null,\n        "endTime": null,\n        "lastRunTime": "2022-12-02 18:00:59.326",\n        "nextRunTime": "2022-12-02 18:01:04.358",\n        "numberOfRuns": 1,\n        "maxNumberOfRuns": 0,\n        "numberOfErrors": 0,\n        "maxNumberOfErrors": 0,\n        "numRetries": 0,\n        "retryTimeout": 1000,\n        "startNow": true,\n        "runOnStart": false,\n        "resetOnlyOnce": true,\n        "updatedTime": "2022-12-02 18:00:59.390"\n      }\n      }\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u7b2c\u4e8c\u79cd\uff1a\u8f93\u51fa\u5355\u72ec\u7684\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u4fe1\u606f\uff1a",(0,a.kt)("inlineCode",{parentName:"strong"},"jobDetail.ConvertToJSON()")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"strong"},"trigger.ConvertToJSON()")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11-12}",showLineNumbers:!0,"{11-12}":!0},"public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation(context.JobDetail.ConvertToJSON());\n        _logger.LogInformation(context.Trigger.ConvertToJSON(NamingConventions.UnderScoreCase));    // \u652f\u6301\u4e09\u79cd\u5c5e\u6027\u540d\u8f93\u51fa\u89c4\u5219\n\n        await Task.CompletedTask;\n    }\n}\n")),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6253\u5370\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:"showLineNumbers {2-12,14-35}",showLineNumbers:!0,"{2-12,14-35}":!0},'info: 2022-12-02 18:02:10.7923360 +08:00 \u661f\u671f\u4e94 L MyJob[0] #8\n      {\n        "jobId": "job1",\n        "groupName": null,\n        "jobType": "MyJob",\n        "assemblyName": "ConsoleApp32",\n        "description": null,\n        "concurrent": true,\n        "includeAnnotations": false,\n        "properties": "{}",\n        "updatedTime": "2022-12-02 18:02:10.774"\n      }\ninfo: 2022-12-02 18:02:10.8008708 +08:00 \u661f\u671f\u4e94 L MyJob[0] #8\n      {\n        "trigger_id": "job1_trigger1",\n        "job_id": "job1",\n        "trigger_type": "TouchSocket.Schedule.PeriodSecondsTrigger",\n        "assembly_name": "TouchSocket",\n        "args": "[5]",\n        "description": null,\n        "status": 2,\n        "start_time": null,\n        "end_time": null,\n        "last_run_time": "2022-12-02 18:02:10.727",\n        "next_run_time": "2022-12-02 18:02:15.733",\n        "number_of_runs": 1,\n        "max_number_of_runs": 0,\n        "number_of_errors": 0,\n        "max_number_of_errors": 0,\n        "num_retries": 0,\n        "retry_timeout": 1000,\n        "start_now": true,\n        "run_on_start": false,\n        "reset_only_once": true,\n        "updated_time": "2022-12-02 18:02:10.774"\n      }\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u7b2c\u4e09\u79cd\uff1a\u8f93\u51fa\u5355\u72ec\u7684\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"strong"},"SQL")," \u4fe1\u606f\uff1a",(0,a.kt)("inlineCode",{parentName:"strong"},"jobDetail.ConvertToSQL()")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"strong"},"trigger.ConvertToSQL()")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11-12,14-16}",showLineNumbers:!0,"{11-12,14-16}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        var jobDetail = context.JobDetail;\n        var trigger = context.Trigger;\n\n        _logger.LogInformation(jobDetail.ConvertToSQL("\u4f5c\u4e1a\u4fe1\u606f\u8868\u540d", PersistenceBehavior.Appended));  // \u8f93\u51fa\u65b0\u589e\u8bed\u53e5\n        _logger.LogInformation(trigger.ConvertToSQL("\u4f5c\u4e1a\u89e6\u53d1\u5668\u8868\u540d", PersistenceBehavior.Removed, NamingConventions.Pascal));    // \u8f93\u51fa\u5220\u9664\u8bed\u53e5\n        _logger.LogInformation(trigger.ConvertToSQL("\u4f5c\u4e1a\u89e6\u53d1\u5668\u8868\u540d", PersistenceBehavior.Updated, NamingConventions.UnderScoreCase));    // \u8f93\u51fa\u66f4\u65b0\u8bed\u53e5\n\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6253\u5370\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql",metastring:"showLineNumbers {2,25,28}",showLineNumbers:!0,"{2,25,28}":!0},"info: 2022-12-02 18:03:11.8543760 +08:00 \u661f\u671f\u4e94 L MyJob[0] #13\n      INSERT INTO \u4f5c\u4e1a\u4fe1\u606f\u8868\u540d(\n          jobId,\n          groupName,\n          jobType,\n          assemblyName,\n          description,\n          concurrent,\n          includeAnnotations,\n          properties,\n          updatedTime\n      )\n      VALUES(\n          'job1',\n          NULL,\n          'MyJob',\n          'ConsoleApp32',\n          NULL,\n          1,\n          0,\n          '{}',\n          '2022-12-02 18:03:11.836'\n      );\ninfo: 2022-12-02 18:03:11.8636268 +08:00 \u661f\u671f\u4e94 L MyJob[0] #13\n      DELETE FROM \u4f5c\u4e1a\u89e6\u53d1\u5668\u8868\u540d\n      WHERE TriggerId = 'job1_trigger1' AND JobId = 'job1';\ninfo: 2022-12-02 18:03:11.8669134 +08:00 \u661f\u671f\u4e94 L MyJob[0] #13\n      UPDATE \u4f5c\u4e1a\u89e6\u53d1\u5668\u8868\u540d\n      SET\n          trigger_id = 'job1_trigger1',\n          job_id = 'job1',\n          trigger_type = 'TouchSocket.Schedule.PeriodSecondsTrigger',\n          assembly_name = 'TouchSocket',\n          args = '[5]',\n          description = NULL,\n          status = 2,\n          start_time = NULL,\n          end_time = NULL,\n          last_run_time = '2022-12-02 18:03:11.778',\n          next_run_time = '2022-12-02 18:03:16.794',\n          number_of_runs = 1,\n          max_number_of_runs = 0,\n          number_of_errors = 0,\n          max_number_of_errors = 0,\n          num_retries = 0,\n          retry_timeout = 1000,\n          start_now = 1,\n          run_on_start = 0,\n          reset_only_once = 1,\n          updated_time = '2022-12-02 18:03:11.836'\n      WHERE trigger_id = 'job1_trigger1' AND job_id = 'job1';\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u7b2c\u56db\u79cd\uff1a\u8f93\u51fa\u5355\u72ec\u7684\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"strong"},"Monitor")," \u4fe1\u606f\uff1a",(0,a.kt)("inlineCode",{parentName:"strong"},"jobDetail.ConvertToMonitor()")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"strong"},"trigger.ConvertToMonitor()")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11-12}",showLineNumbers:!0,"{11-12}":!0},"public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation(context.JobDetail.ConvertToMonitor());\n        _logger.LogInformation(context.Trigger.ConvertToMonitor());\n\n        await Task.CompletedTask;\n    }\n}\n")),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6253\u5370\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {2,16}",showLineNumbers:!0,"{2,16}":!0},"info: 2022-12-02 18:04:06.2833095 +08:00 \u661f\u671f\u4e94 L MyJob[0] #8\n      \u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  JobDetail \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n      \u2523 MyJob\n      \u2523\n      \u2523 jobId\uff1a                     job1\n      \u2523 groupName\uff1a\n      \u2523 jobType\uff1a                   MyJob\n      \u2523 assemblyName\uff1a              ConsoleApp32\n      \u2523 description\uff1a\n      \u2523 concurrent\uff1a                True\n      \u2523 includeAnnotations\uff1a        False\n      \u2523 properties\uff1a                {}\n      \u2523 updatedTime\uff1a               2022-12-02 18:04:06.254\n      \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  JobDetail \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\ninfo: 2022-12-02 18:04:06.2868205 +08:00 \u661f\u671f\u4e94 L MyJob[0] #8\n      \u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  Trigger \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n      \u2523 TouchSocket.Schedule.PeriodSecondsTrigger\n      \u2523\n      \u2523 triggerId\uff1a                job1_trigger1\n      \u2523 jobId\uff1a                    job1\n      \u2523 triggerType\uff1a              TouchSocket.Schedule.PeriodSecondsTrigger\n      \u2523 assemblyName\uff1a             TouchSocket\n      \u2523 args\uff1a                     [5]\n      \u2523 description\uff1a\n      \u2523 status\uff1a                   Running\n      \u2523 startTime\uff1a\n      \u2523 endTime\uff1a\n      \u2523 lastRunTime\uff1a              2022-12-02 18:04:06.189\n      \u2523 nextRunTime\uff1a              2022-12-02 18:04:11.212\n      \u2523 numberOfRuns\uff1a             1\n      \u2523 maxNumberOfRuns\uff1a          0\n      \u2523 numberOfErrors\uff1a           0\n      \u2523 maxNumberOfErrors\uff1a        0\n      \u2523 numRetries\uff1a               0\n      \u2523 retryTimeout\uff1a             1000\n      \u2523 startNow\uff1a                 True\n      \u2523 runOnStart\uff1a               False\n      \u2523 resetOnlyOnce\uff1a            True\n      \u2523 updatedTime\uff1a              2022-12-02 18:04:06.254\n      \u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  Trigger \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n")),(0,a.kt)("h3",{id:"26125-\u8fd0\u884c\u65f6\u52a8\u6001\u64cd\u4f5c\u4f5c\u4e1a"},"26.1.2.5 \u8fd0\u884c\u65f6\uff08\u52a8\u6001\uff09\u64cd\u4f5c\u4f5c\u4e1a"),(0,a.kt)("p",null,"\u6709\u65f6\u5019\uff0c\u6211\u4eec\u9700\u8981\u5728\u8fd0\u884c\u65f6\u5bf9\u4f5c\u4e1a\u52a8\u6001\u7684\u589e\u52a0\uff0c\u66f4\u65b0\uff0c\u5220\u9664\u7b49\u64cd\u4f5c\uff0c\u5982\u52a8\u6001\u6dfb\u52a0\u4f5c\u4e1a\uff1a"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u6ce8\u518c ",(0,a.kt)("inlineCode",{parentName:"li"},"services.AddSchedule()")," \u670d\u52a1")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5}",showLineNumbers:!0,"{2,5}":!0},"// \u53ef\u4ee5\u5b8c\u5168\u52a8\u6001\u64cd\u4f5c\uff0c\u53ea\u9700\u8981\u6ce8\u518c\u670d\u52a1\u5373\u53ef\nservices.AddSchedule();\n\n// \u4e5f\u53ef\u4ee5\u90e8\u5206\u9759\u6001\uff0c\u90e8\u5206\u52a8\u6001\u6ce8\u518c\nservices.AddSchedule(options =>\n{\n    options.AddJob<MyJob>(concurrent: false, Triggers.PeriodSeconds(5));\n});\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"\u6ce8\u5165 ",(0,a.kt)("inlineCode",{parentName:"li"},"ISchedulerFactory")," \u670d\u52a1")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4,11}",showLineNumbers:!0,"{4,11}":!0},'public class YourService: IYourService\n{\n    private readonly ISchedulerFactory _schedulerFactory;\n    public YourService(ISchedulerFactory schedulerFactory)\n    {\n        _schedulerFactory = schedulerFactory;\n    }\n\n    public void AddJob()\n    {\n        _schedulerFactory.AddJob<MyJob>("\u52a8\u6001\u4f5c\u4e1a Id", Triggers.Secondly());\n    }\n}\n')),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {6,8,12,14,16,18,22,24}",showLineNumbers:!0,"{6,8,12,14,16,18,22,24}":!0},"info: 2022-12-02 18:07:33.7799062 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-02 18:07:33.7971487 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-02 18:07:33.8751390 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-02 18:07:33.8805159 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-02 18:07:33.9013656 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-02 18:07:38.9241031 +08:00 \u661f\u671f\u4e94 L MyJob[0] #9\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-02 18:07:38.813 -> 2022-12-02 18:07:43.863\ninfo: 2022-12-02 18:07:43.0865787 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #16\n      The <\u52a8\u6001\u4f5c\u4e1a Id_trigger1> trigger for scheduler of <\u52a8\u6001\u4f5c\u4e1a Id> successfully appended to the schedule.\nwarn: 2022-12-02 18:07:43.0894163 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #16\n      Schedule hosted service cancels hibernation and GC.Collect().\ninfo: 2022-12-02 18:07:43.1129824 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #16\n      The scheduler of <\u52a8\u6001\u4f5c\u4e1a Id> successfully appended to the schedule.\ninfo: 2022-12-02 18:07:43.8810686 +08:00 \u661f\u671f\u4e94 L MyJob[0] #17\n      <job1> [C] <job1 job1_trigger1> 5s 2ts 2022-12-02 18:07:43.863 -> 2022-12-02 18:07:48.848\ninfo: 2022-12-02 18:07:44.0104025 +08:00 \u661f\u671f\u4e94 L MyJob[0] #16\n      <\u52a8\u6001\u4f5c\u4e1a Id> [C] <\u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1> * * * * * * 1ts 2022-12-02 18:07:44.000 -> 2022-12-02 18:07:45.000\ninfo: 2022-12-02 18:07:45.0092441 +08:00 \u661f\u671f\u4e94 L MyJob[0] #8\n      <\u52a8\u6001\u4f5c\u4e1a Id> [C] <\u52a8\u6001\u4f5c\u4e1a Id \u52a8\u6001\u4f5c\u4e1a Id_trigger1> * * * * * * 2ts 2022-12-02 18:07:45.000 -> 2022-12-02 18:07:46.000\n")),(0,a.kt)("h3",{id:"26126-\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"},"26.1.2.6 \u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("p",null,"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u6846\u67b6\u4e0d\u4f1a\u626b\u63cf ",(0,a.kt)("inlineCode",{parentName:"p"},"IJob")," \u5b9e\u73b0\u7c7b\u7684\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027\uff0c\u4f46\u53ef\u4ee5\u8bbe\u7f6e\u4f5c\u4e1a\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"IncludeAnnotations")," \u8fdb\u884c\u542f\u7528\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u542f\u7528 ",(0,a.kt)("inlineCode",{parentName:"li"},"IncludeAnnotations")," \u626b\u63cf")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3,7,10}",showLineNumbers:!0,"{3,7,10}":!0},"services.AddSchedule(options =>\n{\n    options.AddJob(JobBuilder.Create<MyJob>().SetIncludeAnnotations(true)\n        , Triggers.PeriodSeconds(5));     // \u8fd9\u91cc\u53ef\u4f20\u53ef\u4e0d\u4f20\uff0c\u4f20\u4e86\u5219\u4f1a\u81ea\u52a8\u8f7d\u5165\u7279\u6027\u548c\u8fd9\u91cc\u914d\u7f6e\u7684\u4f5c\u4e1a\u89e6\u53d1\u5668\n\n    // \u8fd8\u53ef\u4ee5\u66f4\u7b80\u5355~~\n    options.AddJob(typeof(MyJob).ScanToBuilder());\n\n    // \u8fd8\u53ef\u4ee5\u6279\u91cf\u65b0\u589e TouchSocket 4.8.2.4+\n    options.AddJob(App.EffectiveTypes.ScanToBuilders());\n});\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"\u5728 ",(0,a.kt)("inlineCode",{parentName:"li"},"MyJob")," \u4e2d\u6dfb\u52a0\u591a\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1-2}",showLineNumbers:!0,"{1-2}":!0},'[Minutely]\n[Cron("3,7,8 * * * * ?", CronStringFormat.WithSeconds)]\npublic class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context}");\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {6,8,10,12,16,18,20,24,26}",showLineNumbers:!0,"{6,8,10,12,16,18,20,24,26}":!0},"info: 2022-12-02 18:12:56.4199663 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-02 18:12:56.4287962 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-02 18:12:56.6149505 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-02 18:12:56.6205117 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger2> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-02 18:12:56.6266132 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger3> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-02 18:12:56.6291006 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-02 18:12:56.6454334 +08:00 \u661f\u671f\u4e94 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-02 18:13:00.0842828 +08:00 \u661f\u671f\u4e94 L MyJob[0] #15\n      <job1> [C] <job1 job1_trigger2> * * * * * 1ts 2022-12-02 18:13:00.000 -> 2022-12-02 18:14:00.000\ninfo: 2022-12-02 18:13:01.5260220 +08:00 \u661f\u671f\u4e94 L MyJob[0] #16\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-02 18:13:01.494 -> 2022-12-02 18:13:06.492\ninfo: 2022-12-02 18:13:03.0076111 +08:00 \u661f\u671f\u4e94 L MyJob[0] #6\n      <job1> [C] <job1 job1_trigger3> 3,7,8 * * * * ? 1ts 2022-12-02 18:13:03.000 -> 2022-12-02 18:13:07.000\ninfo: 2022-12-02 18:13:06.4954400 +08:00 \u661f\u671f\u4e94 L MyJob[0] #13\n      <job1> [C] <job1 job1_trigger1> 5s 2ts 2022-12-02 18:13:06.492 -> 2022-12-02 18:13:11.463\ninfo: 2022-12-02 18:13:07.0180453 +08:00 \u661f\u671f\u4e94 L MyJob[0] #6\n      <job1> [C] <job1 job1_trigger3> 3,7,8 * * * * ? 2ts 2022-12-02 18:13:07.000 -> 2022-12-02 18:13:08.000\ninfo: 2022-12-02 18:13:08.0114292 +08:00 \u661f\u671f\u4e94 L MyJob[0] #13\n      <job1> [C] <job1 job1_trigger3> 3,7,8 * * * * ? 3ts 2022-12-02 18:13:08.000 -> 2022-12-02 18:14:03.000\ninfo: 2022-12-02 18:13:11.4774564 +08:00 \u661f\u671f\u4e94 L MyJob[0] #16\n      <job1> [C] <job1 job1_trigger1> 5s 3ts 2022-12-02 18:13:11.463 -> 2022-12-02 18:13:16.445\n")),(0,a.kt)("h2",{id:"2613-\u4f5c\u4e1a\u4fe1\u606f-jobdetail-\u53ca\u6784\u5efa\u5668"},"26.1.3 \u4f5c\u4e1a\u4fe1\u606f ",(0,a.kt)("inlineCode",{parentName:"h2"},"JobDetail")," \u53ca\u6784\u5efa\u5668"),(0,a.kt)("h3",{id:"26131-\u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f"},"26.1.3.1 \u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f"),(0,a.kt)("p",null,"\u6846\u67b6\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u7c7b\u578b\u6765\u63cf\u8ff0\u4f5c\u4e1a\u4fe1\u606f\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u7c7b\u578b\u63d0\u4f9b\u4ee5\u4e0b",(0,a.kt)("strong",{parentName:"p"},"\u53ea\u8bfb\u5c5e\u6027"),"\uff1a"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"\u5c5e\u6027\u540d"),(0,a.kt)("th",{parentName:"tr",align:null},"\u5c5e\u6027\u7c7b\u578b"),(0,a.kt)("th",{parentName:"tr",align:null},"\u9ed8\u8ba4\u503c"),(0,a.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"JobId")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"td"},"Id"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"GroupName")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u7ec4\u540d\u79f0")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"JobType")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u7c7b\u578b\uff0c\u5b58\u50a8\u7684\u662f\u7c7b\u578b\u7684 ",(0,a.kt)("inlineCode",{parentName:"td"},"FullName"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"AssemblyName")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u7c7b\u578b\u6240\u5728\u7a0b\u5e8f\u96c6\uff0c\u5b58\u50a8\u7684\u662f\u7a0b\u5e8f\u96c6 ",(0,a.kt)("inlineCode",{parentName:"td"},"Name"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Description")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u63cf\u8ff0\u4fe1\u606f")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Concurrent")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"bool")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"true")),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u6267\u884c\u65b9\u5f0f\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a ",(0,a.kt)("inlineCode",{parentName:"td"},"false"),"\uff0c\u90a3\u4e48\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"td"},"\u4e32\u884c")," \u6267\u884c\uff0c\u5426\u5219 ",(0,a.kt)("inlineCode",{parentName:"td"},"\u5e76\u884c")," \u6267\u884c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"IncludeAnnotations")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"bool")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"false")),(0,a.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u626b\u63cf ",(0,a.kt)("inlineCode",{parentName:"td"},"IJob")," \u5b9e\u73b0\u7c7b ",(0,a.kt)("inlineCode",{parentName:"td"},"[Trigger]")," \u7279\u6027\u89e6\u53d1\u5668")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Properties")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},'"{}"')),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u4fe1\u606f\u989d\u5916\u6570\u636e\uff0c\u7531 ",(0,a.kt)("inlineCode",{parentName:"td"},"Dictionary<string, object>")," \u5e8f\u5217\u5316\u6210\u5b57\u7b26\u4e32\u5b58\u50a8")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"UpdatedTime")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"DateTime?")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u66f4\u65b0\u65f6\u95f4")))),(0,a.kt)("h3",{id:"26132-\u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668"},"26.1.3.2 \u5173\u4e8e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u4fe1\u606f ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u662f\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u8fd0\u884c\u65f6\u7684",(0,a.kt)("strong",{parentName:"p"},"\u53ea\u8bfb\u7c7b\u578b"),"\uff0c\u90a3\u4e48\u6211\u4eec\u8be5\u5982\u4f55\u521b\u5efa\u6216\u53d8\u66f4 ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u5bf9\u8c61\u5462\uff1f"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u662f\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u53ef\u7528\u6765\u751f\u6210\u8fd0\u884c\u65f6 ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u7684\u7c7b\u578b\uff0c\u8fd9\u6837\u505a\u7684\u597d\u5904\u53ef\u907f\u514d\u5916\u90e8\u76f4\u63a5\u4fee\u6539\u8fd0\u884c\u65f6 ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u6570\u636e\uff0c\u8fd8\u80fd\u5b9e\u73b0\u4efb\u4f55\u4fee\u6539\u52a8\u4f5c\u76d1\u542c\uff0c\u4e5f\u80fd\u907f\u514d\u591a\u7ebf\u7a0b\u62a2\u5360\u60c5\u51b5\u3002"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u5f0f\u7528\u6765\u521b\u5efa ",(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u5bf9\u8c61\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Create")," \u9759\u6001\u65b9\u6cd5\u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5,8,11,14}",showLineNumbers:!0,"{2,5,8,11,14}":!0},'// \u6839\u636e\u4f5c\u4e1a Id \u521b\u5efa\nvar jobBuilder = JobBuilder.Create("job1");\n\n// \u6839\u636e IJob \u5b9e\u73b0\u7c7b\u7c7b\u578b\u521b\u5efa\nvar jobBuilder = JobBuilder.Create<MyJob>();\n\n// \u6839\u636e\u7a0b\u5e8f\u96c6\u540d\u79f0\u548c\u7c7b\u578b\u5b8c\u5168\u9650\u5b9a\u540d\uff08FullName\uff09\u521b\u5efa\nvar jobBuilder = JobBuilder.Create("YourProject", "YourProject.MyJob");\n\n// \u6839\u636e Type \u7c7b\u578b\u521b\u5efa\nvar jobBuilder = JobBuilder.Create(typeof(MyJob));\n\n// \u901a\u8fc7\u59d4\u6258\u521b\u9020\u52a8\u6001\u4f5c\u4e1a\nvar jobBuilder = JobBuilder.Create((serviceProvider, context, stoppingToken) =>\n{\n      serviceProvider.GetLogger().LogInformation($"{context}");\n      return Task.CompletedTask;\n});\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobDetail")," \u7c7b\u578b\u521b\u5efa"))),(0,a.kt)("p",null,"\u8fd9\u79cd\u65b9\u5f0f\u5e38\u7528\u4e8e\u5728\u8fd0\u884c\u65f6\u66f4\u65b0\u4f5c\u4e1a\u4fe1\u606f\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var jobBuilder = JobBuilder.From(jobDetail);\n\n//\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\nvar jobBuilder = jobDetail.GetBuilder();\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u5b57\u7b26\u4e32\u521b\u5efa"))),(0,a.kt)("p",null,"\u8be5\u65b9\u5f0f\u975e\u5e38\u7075\u6d3b\uff0c\u53ef\u4ece\u914d\u7f6e\u6587\u4ef6\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," \u5b57\u7b26\u4e32\uff0c\u6216\u5176\u4ed6\u80fd\u591f\u8fd4\u56de ",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," \u5b57\u7b26\u4e32\u7684\u5730\u65b9\u521b\u5efa\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2-12}",showLineNumbers:!0,"{2-12}":!0},'var jobBuilder = JobBuilder.From(@"{\n    ""jobId"": ""job1"",\n    ""groupName"": null,\n    ""jobType"": ""MyJob"",\n    ""assemblyName"": ""ConsoleApp13"",\n    ""description"": null,\n    ""concurrent"": true,\n    ""includeAnnotations"": false,\n    ""properties"": ""{}"",\n    ""updatedTime"": null\n}");\n')),(0,a.kt)("p",null,"\u5982\u679c\u4f7f\u7528\u7684\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},".NET7"),"\uff0c\u53ef\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},'"""')," \u907f\u514d\u8f6c\u4e49\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2-12}",showLineNumbers:!0,"{2-12}":!0},'var jobBuilder = JobBuilder.From("""\n{\n    "jobId": "job1",\n    "groupName": null,\n    "jobType": "MyJob",\n    "assemblyName": "ConsoleApp13",\n    "description": null,\n    "concurrent": true,\n    "includeAnnotations": false,\n    "properties": "{}",\n    "updatedTime": "2022-12-02 18:00:59.390"\n}\n""");\n')),(0,a.kt)("admonition",{title:"\u5173\u4e8e\u5c5e\u6027\u540d\u5339\u914d\u89c4\u5219",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09")," \u547d\u540d\u65b9\u5f0f\u3002"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"strong"},"UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09"))," \uff0c\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},'"include_annotations": true'))),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8fd8\u53ef\u4ee5\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Clone")," \u9759\u6001\u65b9\u6cd5\u4ece\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobBuilder")," \u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var jobBuilder = JobBuilder.Clone(fromJobBuilder);\n")),(0,a.kt)("admonition",{title:"\u514b\u9686\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u514b\u9686\u64cd\u4f5c\u53ea\u4f1a\u514b\u9686 ",(0,a.kt)("inlineCode",{parentName:"p"},"AssemblyName"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"JobType"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"GroupName"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Description"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Concurrent"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"IncludeAnnotations"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Properties"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"DynamicExecuteAsync"),"\uff08\u52a8\u6001\u4f5c\u4e1a\uff09\u3002"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u4e0d\u4f1a\u514b\u9686 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobId"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"UpdatedTime"),"\u3002")))),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8fd8\u53ef\u4ee5\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"LoadFrom")," \u5b9e\u4f8b\u65b9\u6cd5\u586b\u5145\u5f53\u524d\u7684 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobBuilder")))),(0,a.kt)("p",null,"\u6bd4\u5982\u53ef\u4ee5\u4f20\u9012\u533f\u540d\u7c7b\u578b\uff0c\u7c7b\u7c7b\u578b\uff0c\u5b57\u5178 ",(0,a.kt)("inlineCode",{parentName:"p"},"Dictionary<string, object>")," \u7c7b\u578b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,9,14,17,22,25}",showLineNumbers:!0,"{2,9,14,17,22,25}":!0},'// \u4f1a\u8986\u76d6\u6240\u6709\u76f8\u540c\u7684\u503c\njobBuilder.LoadFrom(new\n{\n      Description = "\u6211\u662f\u63cf\u8ff0",\n      Concurrent = false\n});\n\n// \u652f\u6301\u591a\u4e2a\u586b\u5145\uff0c\u8fd8\u53ef\u4ee5\u914d\u7f6e\u8df3\u8fc7 null \u503c\u8986\u76d6\njobBuilder.LoadFrom(new\n{\n      Description = "\u6211\u662f\u53e6\u5916\u4e00\u4e2a\u63cf\u8ff0",\n      Concurrent = false,\n      IncludeAnnotations = default(object)      // \u4f1a\u8df3\u8fc7\u8d4b\u503c\n}, ignoreNullValue: true);\n\n// \u652f\u6301\u5ffd\u7565\u7279\u5b9a\u5c5e\u6027\u540d\u6620\u5c04\njobBuilder.LoadFrom(new\n{\n      Description = "\u6211\u662f\u53e6\u5916\u4e00\u4e2a\u63cf\u8ff0",\n      Concurrent = false,\n      IncludeAnnotations = default(object)      // \u4f1a\u8df3\u8fc7\u8d4b\u503c\n}, ignorePropertyNames: new[]{ "description" });\n\n// \u652f\u6301\u5b57\u5178\u7c7b\u578b\njobBuilder.LoadFrom(new Dictionary<string, object>\n{\n      {"Description", "\u8fd9\u662f\u65b0\u7684\u63cf\u8ff0" },\n      {"include_annotations", false },\n      {"updatedTime", DateTime.Now }\n});\n')),(0,a.kt)("admonition",{title:"\u5173\u4e8e\u5c5e\u6027\u540d\u5339\u914d\u89c4\u5219",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09")," \u547d\u540d\u65b9\u5f0f\u3002")),(0,a.kt)("h3",{id:"26133-\u8bbe\u7f6e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668"},"26.1.3.3 \u8bbe\u7f6e\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u63d0\u4f9b\u4e86\u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u5b8c\u5168\u5339\u914d\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Set[\u5c5e\u6027\u540d]")," \u65b9\u6cd5\u6765\u914d\u7f6e\u4f5c\u4e1a\u4fe1\u606f\u5404\u4e2a\u5c5e\u6027\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3,20}",showLineNumbers:!0,"{3,20}":!0},'services.AddSchedule(options =>\n{\n    var jobBuilder = JobBuilder.Create<MyJob>()\n        .SetJobId("job1")   // \u4f5c\u4e1a Id\n        .SetGroupName("group1") // \u4f5c\u4e1a\u7ec4\u540d\u79f0\n        .SetJobType("TouchSocket.Application", "TouchSocket.Application.MyJob") // \u4f5c\u4e1a\u7c7b\u578b\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n        .SetJobType<MyJob>()    // \u4f5c\u4e1a\u7c7b\u578b\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n        .SetJobType(typeof(MyJob))  // \u4f5c\u4e1a\u7c7b\u578b\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n        .SetDescription("\u8fd9\u662f\u4e00\u6bb5\u63cf\u8ff0")   // \u4f5c\u4e1a\u63cf\u8ff0\n        .SetConcurrent(false)   // \u5e76\u884c\u8fd8\u662f\u4e32\u884c\u65b9\u5f0f\uff0cfalse \u4e3a \u4e32\u884c\n        .SetIncludeAnnotations(true)    // \u662f\u5426\u626b\u63cf IJob \u7c7b\u578b\u7684\u89e6\u53d1\u5668\u7279\u6027\uff0ctrue \u4e3a \u626b\u63cf\n        .SetProperties("{}")    // \u4f5c\u4e1a\u989d\u5916\u6570\u636e Dictionary<string, object> \u7c7b\u578b\u5e8f\u5217\u5316\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n        .SetProperties(new Dictionary<string, object> { { "name", "TouchSocket" } })  // \u4f5c\u4e1a\u7c7b\u578b\u989d\u5916\u6570\u636e\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\uff0c\u63a8\u8350\uff01\uff01\uff01\n        .SetDynamicExecuteAsync((serviceProvider, context, stoppingToken) => {\n            serviceProvider.GetLogger().LogInformation($"{context}");\n            return Task.CompletedTask;\n        })  // \u52a8\u6001\u59d4\u6258\u5904\u7406\u7a0b\u5e8f\uff0c\u4e00\u65e6\u8bbe\u7f6e\u4e86\u6b64\u59d4\u6258\uff0c\u90a3\u4e48\u4f18\u5148\u7ea7\u5c06\u5927\u4e8e MyJob \u7684 ExecuteAsync\n        ;\n\n    options.AddJob(jobBuilder, Triggers.PeriodSeconds(5));\n});\n')),(0,a.kt)("h3",{id:"26134-\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668\u989d\u5916\u6570\u636e"},"26.1.3.4 \u4f5c\u4e1a\u4fe1\u606f/\u6784\u5efa\u5668\u989d\u5916\u6570\u636e"),(0,a.kt)("p",null,"\u6709\u65f6\u5019\u6211\u4eec\u9700\u8981\u5728\u4f5c\u4e1a\u8fd0\u884c\u7684\u65f6\u5019\u6dfb\u52a0\u4e00\u4e9b\u989d\u5916\u6570\u636e\uff0c\u6216\u8005\u5b9e\u73b0\u591a\u4e2a\u89e6\u53d1\u5668\u5171\u4eab\u6570\u636e\uff0c\u7ecf\u5e38\u7528\u4e8e ",(0,a.kt)("inlineCode",{parentName:"p"},"\u4e32\u884c")," \u6267\u884c\u4e2d\uff08",(0,a.kt)("inlineCode",{parentName:"p"},"\u5e76\u884c")," \u4e5f\u540c\u6837\u5de5\u4f5c\uff09\uff0c\u540e\u9762\u4e00\u4e2a\u89e6\u53d1\u5668\u9700\u7b49\u5f85\u524d\u4e00\u4e2a\u89e6\u53d1\u5668\u5b8c\u6210\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {13-14,16}",showLineNumbers:!0,"{13-14,16}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        var jobDetail = context.JobDetail;\n\n        var count = jobDetail.GetProperty<int>("count");\n        jobDetail.AddOrUpdateProperty("count", count + 1);  // \u9012\u589e count\n\n        _logger.LogInformation($"count: {count} {context}");\n\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u8fd0\u884c\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {12,14,16,18}",showLineNumbers:!0,"{12,14,16,18}":!0},"info: 2022-12-03 23:16:46.5150228 +08:00 \u661f\u671f\u516d L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-03 23:16:46.5197497 +08:00 \u661f\u671f\u516d L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-03 23:16:46.6987703 +08:00 \u661f\u671f\u516d L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-03 23:16:46.7003295 +08:00 \u661f\u671f\u516d L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-03 23:16:46.7248216 +08:00 \u661f\u671f\u516d L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-03 23:16:51.7013640 +08:00 \u661f\u671f\u516d L MyJob[0] #8\n      count: 0 <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-03 23:16:51.663 -> 2022-12-03 23:16:56.656\ninfo: 2022-12-03 23:16:56.6768044 +08:00 \u661f\u671f\u516d L MyJob[0] #9\n      count: 1 <job1> [C] <job1 job1_trigger1> 5s 2ts 2022-12-03 23:16:56.656 -> 2022-12-03 23:17:01.635\ninfo: 2022-12-03 23:17:01.6454604 +08:00 \u661f\u671f\u516d L MyJob[0] #8\n      count: 2 <job1> [C] <job1 job1_trigger1> 5s 3ts 2022-12-03 23:17:01.635 -> 2022-12-03 23:17:06.608\ninfo: 2022-12-03 23:17:06.6247917 +08:00 \u661f\u671f\u516d L MyJob[0] #6\n      count: 3 <job1> [C] <job1 job1_trigger1> 5s 4ts 2022-12-03 23:17:06.608 -> 2022-12-03 23:17:11.586\n")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u63d0\u4f9b\u4e86\u591a\u4e2a\u65b9\u6cd5\u64cd\u4f5c\u989d\u5916\u6570\u636e\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5,8,11,14,17,20,23}",showLineNumbers:!0,"{2,5,8,11,14,17,20,23}":!0},'// \u67e5\u770b\u6240\u6709\u989d\u5916\u6570\u636e\nvar properties = jobDetail.GetProperties();\n\n// \u67e5\u770b\u5355\u4e2a\u989d\u5916\u6570\u636e\uff0c\u8fd4\u56de object\nvar value = jobBuilder.GetProperty("key");\n\n// \u67e5\u770b\u5355\u4e2a\u989d\u5916\u6570\u636e\u6cdb\u578b\nvar value = jobDetail.GetProperty<int>("key");\n\n// \u6dfb\u52a0\u65b0\u7684\u989d\u5916\u6570\u636e\uff0c\u652f\u6301\u94fe\u5f0f\u64cd\u4f5c\uff0c\u5982\u679c\u952e\u5df2\u5b58\u5728\uff0c\u5219\u8df3\u8fc7\njobDetail.AddProperty("key", "TouchSocket").AddProperty("key1", 2);\n\n// \u6dfb\u52a0\u6216\u66f4\u65b0\u989d\u5916\u6570\u636e\uff0c\u652f\u6301\u94fe\u5f0f\u64cd\u4f5c\uff0c\u4e0d\u5b58\u5728\u5219\u65b0\u589e\uff0c\u5b58\u5728\u5219\u66ff\u6362\uff0c\u63a8\u8350\njobDetail.AddOrUpdateProperty("key", "TouchSocket").AddOrUpdateProperty("key1", 2);\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7\u59d4\u6258\u7684\u65b9\u5f0f\uff1a\u5982\u679c\u952e\u4e0d\u5b58\u5728\u5219\u63d2\u5165 count = newValue\uff0c\u5426\u5219\u66f4\u65b0\u4e3a value\uff08\u65e7\u503c\uff09+1\njobDetail.AddOrUpdateProperty("count", newValue, value => value + 1);\n\n// \u5220\u9664\u67d0\u4e2a\u989d\u5916\u6570\u636e\uff0c\u652f\u6301\u94fe\u5f0f\u64cd\u4f5c\uff0c\u5982\u679c key \u4e0d\u5b58\u5728\u5219\u8df3\u8fc7\njobDetail.RemoveProperty("key").RemoveProperty("key1");\n\n// \u6e05\u7a7a\u6240\u6709\u989d\u5916\u6570\u636e\njobDetail.ClearProperties();\n')),(0,a.kt)("admonition",{title:"\u4f5c\u4e1a\u989d\u5916\u6570\u636e\u7c7b\u578b\u652f\u6301",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u4f5c\u4e1a\u989d\u5916\u6570\u636e\u6bcf\u4e00\u9879\u7684\u503c\u53ea\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"int32"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"string"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"bool"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"null")," \u6216\u5b83\u4eec\u7ec4\u6210\u7684\u6570\u7ec4\u7c7b\u578b\u3002")),(0,a.kt)("h3",{id:"26135-\u4f5c\u4e1a\u4fe1\u606f\u7279\u6027"},"26.1.3.5 \u4f5c\u4e1a\u4fe1\u606f\u7279\u6027"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u4fe1\u606f\u7279\u6027 ",(0,a.kt)("inlineCode",{parentName:"p"},"[JobDetail]")," \u662f\u4e3a\u4e86\u65b9\u4fbf\u8fd0\u884c\u65f6\u6216\u542f\u52a8\u65f6\u5feb\u901f\u521b\u5efa\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u800c\u63d0\u4f9b\u7684\uff0c\u53ef\u5728\u542f\u52a8\u65f6\u6216\u8fd0\u884c\u65f6\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\u521b\u5efa\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1}",showLineNumbers:!0,"{1}":!0},'[JobDetail("job1", "\u8fd9\u662f\u4e00\u6bb5\u63cf\u8ff0")]\n[PeriodSeconds(5, TriggerId = "trigger1")]\npublic class MyJob : IJob\n{\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u542f\u52a8 ",(0,a.kt)("inlineCode",{parentName:"strong"},"IncludeAnnotations")," \u5c5e\u6027\u81ea\u52a8\u586b\u5145"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4}",showLineNumbers:!0,"{4}":!0},"services.AddSchedule(options =>\n{\n    options.AddJob(JobBuilder.Create<MyJob>()\n      .SetIncludeAnnotations(true));      // \u6b64\u65f6 [JobDetail] \u914d\u7f6e\u7684\u975e\u7a7a\u5c5e\u6027\u5c06\u81ea\u52a8\u590d\u5236\u7ed9 JobBuilder\uff0c[PeriodSeconds] \u4e5f\u4f1a\u81ea\u52a8\u521b\u5efa TriggerBuilder\n});\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u624b\u52a8\u626b\u63cf\u5e76\u521b\u5efa\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var schedulerBuilder = typeof(MyJob).ScanToBuilder();\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7\u7a0b\u5e8f\u96c6\u7c7b\u578b\u626b\u63cf\u6279\u91cf\u521b\u5efa\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668"))),(0,a.kt)("p",null,"\u4e5f\u53ef\u4ee5\u7528\u4e8e\u4f5c\u4e1a\u6301\u4e45\u5316 ",(0,a.kt)("inlineCode",{parentName:"p"},"Preload")," \u521d\u59cb\u5316\u65f6\u4f7f\u7528\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4-5,8}",showLineNumbers:!0,"{1,4-5,8}":!0},"public IEnumerable<SchedulerBuilder> Preload()\n{\n      // \u626b\u63cf\u6240\u6709\u7c7b\u578b\u5e76\u521b\u5efa\n      return App.EffectiveTypes.Where(t => t.IsJobType())\n                              .Select(t => t.ScanToBuilder());\n\n      // \u8fd8\u53ef\u4ee5\u66f4\u7b80\u5355~~\n      return App.EffectiveTypes.ScanToBuilders();\n}\n")),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u4f5c\u4e1a\u4fe1\u606f\u7279\u6027\u8fd8\u63d0\u4f9b\u4e86\u591a\u4e2a\u5c5e\u6027\u914d\u7f6e"),"\uff0c\u5982\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JobId"),"\uff1a\u4f5c\u4e1a\u4fe1\u606f Id\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"GroupName"),"\uff1a\u4f5c\u4e1a\u7ec4\u540d\u79f0\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Description"),"\uff1a\u63cf\u8ff0\u4fe1\u606f\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Concurrent"),"\uff1a\u662f\u5426\u91c7\u7528\u5e76\u884c\u6267\u884c\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"bool")," \u7c7b\u578b\uff0c\u5982\u679c\u8bbe\u7f6e\u4e3a ",(0,a.kt)("inlineCode",{parentName:"li"},"false"),"\uff0c\u90a3\u4e48\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"li"},"\u4e32\u884c")," \u6267\u884c")),(0,a.kt)("p",null,"\u4f7f\u7528\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1-5}",showLineNumbers:!0,"{1-5}":!0},'[JobDetail("jobId")]    // \u4ec5\u4f5c\u4e1a Id\n[JobDetail("jobId", "\u8fd9\u662f\u4e00\u6bb5\u63cf\u8ff0")] // \u63cf\u8ff0\n[JobDetail("jobId", false)] // \u4e32\u884c\n[JobDetail("jobId", false, "\u8fd9\u662f\u4e00\u6bb5\u63cf\u8ff0")] // \u4e32\u884c + \u63cf\u8ff0\n[JobDetail("jobId", Concurrent = false, Description = "\u8fd9\u662f\u4e00\u6bb5\u63cf\u8ff0")]\npublic class MyJob : IJob\n{\n      // ....\n}\n')),(0,a.kt)("h3",{id:"26136-\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa"},"26.1.3.6 \u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u90fd\u63d0\u4f9b\u4e86\u591a\u79cd\u5c06\u81ea\u8eab\u8f6c\u6362\u6210\u7279\u5b9a\u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var json = jobDetail.ConvertToJSON();\n")),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:"showLineNumbers",showLineNumbers:!0},'{\n  "jobId": "job1",\n  "groupName": null,\n  "jobType": "MyJob",\n  "assemblyName": "ConsoleApp13",\n  "description": null,\n  "concurrent": true,\n  "includeAnnotations": false,\n  "properties": "{}",\n  "updatedTime": "2022-12-04 11:51:00.483"\n}\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"SQL")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,6,9,13,16,20}",showLineNumbers:!0,"{2,6,9,13,16,20}":!0},'// \u8f93\u51fa\u65b0\u589e SQL\uff0c\u4f7f\u7528 CamelCase \u5c5e\u6027\u547d\u540d\nvar insertSql = jobDetail.ConvertToSQL("tbName"\n      , PersistenceBehavior.Appended\n      , NamingConventions.CamelCase);\n// \u66f4\u4fbf\u6377\u62d3\u5c55\nvar insertSql = jobDetail.ConvertToInsertSQL("tbName", NamingConventions.CamelCase);\n\n// \u8f93\u51fa\u5220\u9664 SQL\uff0c\u4f7f\u7528 Pascal \u5c5e\u6027\u547d\u540d\nvar deleteSql = jobDetail.ConvertToSQL("tbName"\n      , PersistenceBehavior.Removed\n      , NamingConventions.Pascal);\n// \u66f4\u4fbf\u6377\u62d3\u5c55\nvar deleteSql = jobDetail.ConvertToDeleteSQL("tbName", NamingConventions.Pascal);\n\n// \u8f93\u51fa\u66f4\u65b0 SQL\uff0c\u4f7f\u7528 UnderScoreCase \u5c5e\u6027\u547d\u540d\nvar updateSql = jobDetail.ConvertToSQL("tbName"\n      , PersistenceBehavior.Updated\n      , NamingConventions.UnderScoreCase);\n// \u66f4\u4fbf\u6377\u62d3\u5c55\nvar updateSql = jobDetail.ConvertToUpdateSQL("tbName", NamingConventions.UnderScoreCase);\n')),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql",metastring:"showLineNumbers {2,25,28}",showLineNumbers:!0,"{2,25,28}":!0},"-- \u65b0\u589e\u8bed\u53e5\nINSERT INTO tbName(\n      jobId,\n      groupName,\n      jobType,\n      assemblyName,\n      description,\n      concurrent,\n      includeAnnotations,\n      properties,\n      updatedTime\n)\nVALUES(\n      'job1',\n      NULL,\n      'MyJob',\n      'ConsoleApp13',\n      NULL,\n      1,\n      0,\n      '{}',\n      '2022-12-04 11:53:05.489'\n);\n-- \u5220\u9664\u8bed\u53e5\nDELETE FROM tbName\nWHERE JobId = 'job1';\n-- \u66f4\u65b0\u8bed\u53e5\nUPDATE tbName\nSET\n      job_id = 'job1',\n      group_name = NULL,\n      job_type = 'MyJob',\n      assembly_name = 'ConsoleApp13',\n      description = NULL,\n      concurrent = 1,\n      include_annotations = 0,\n      properties = '{}',\n      updated_time = '2022-12-04 11:53:05.489'\nWHERE job_id = 'job1';\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Monitor")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var monitor = jobDetail.ConvertToMonitor();\n")),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers",showLineNumbers:!0},"\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  JobDetail \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\u2523 MyJob\n\u2523\n\u2523 jobId\uff1a                     job1\n\u2523 groupName\uff1a\n\u2523 jobType\uff1a                   MyJob\n\u2523 assemblyName\uff1a              ConsoleApp13\n\u2523 description\uff1a\n\u2523 concurrent\uff1a                True\n\u2523 includeAnnotations\uff1a        False\n\u2523 properties\uff1a                {}\n\u2523 updatedTime\uff1a               2022-12-04 11:55:11.186\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  JobDetail \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u7b80\u8981\u5b57\u7b26\u4e32\u8f93\u51fa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var str = jobDetail.ToString();\n")),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers",showLineNumbers:!0},"<job1> \u8fd9\u662f\u4e00\u6bb5\u63cf\u8ff0 [C]\n")),(0,a.kt)("h3",{id:"26137-\u81ea\u5b9a\u4e49-sql-\u8f93\u51fa\u914d\u7f6e"},"26.1.3.7 \u81ea\u5b9a\u4e49 ",(0,a.kt)("inlineCode",{parentName:"h3"},"SQL")," \u8f93\u51fa\u914d\u7f6e"),(0,a.kt)("admonition",{title:"\u7248\u672c\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u9650 ",(0,a.kt)("inlineCode",{parentName:"p"},"TouchSocket 4.8.2 +")," \u7248\u672c\u4f7f\u7528\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,8,13,18}",showLineNumbers:!0,"{1,3,8,13,18}":!0},"services.AddSchedule(options =>\n{\n    options.JobDetail.ConvertToSQL = (tableName, columnNames, jobDetail, behavior, naming) =>\n    {\n      // \u751f\u6210\u65b0\u589e SQL\n      if (behavior == PersistenceBehavior.Appended)\n      {\n            return jobDetail.ConvertToInsertSQL(tableName, naming);\n      }\n      // \u751f\u6210\u66f4\u65b0 SQL\n      else if (behavior == PersistenceBehavior.Updated)\n      {\n            return jobDetail.ConvertToUpdateSQL(tableName, naming);\n      }\n      // \u751f\u6210\u5220\u9664 SQL\n      else if (behavior == PersistenceBehavior.Removed)\n      {\n            return jobDetail.ConvertToDeleteSQL(tableName, naming);\n      }\n\n      return string.Empty;\n    };\n});\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ConvertToSQL")," \u59d4\u6258\u53c2\u6570\u8bf4\u660e",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tableName"),"\uff1a\u6570\u636e\u5e93\u8868\u540d\u79f0\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"columnNames"),"\uff1a\u6570\u636e\u5e93\u5217\u540d\uff1a",(0,a.kt)("inlineCode",{parentName:"li"},"string[]")," \u7c7b\u578b\uff0c\u53ea\u80fd\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"li"},"\u7d22\u5f15")," \u83b7\u53d6"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"jobDetail"),"\uff1a\u4f5c\u4e1a\u4fe1\u606f ",(0,a.kt)("inlineCode",{parentName:"li"},"JobDetail")," \u5bf9\u8c61"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"behavior"),"\uff1a\u6301\u4e45\u5316 ",(0,a.kt)("inlineCode",{parentName:"li"},"PersistenceBehavior")," \u7c7b\u578b\uff0c\u7528\u4e8e\u6807\u8bb0 ",(0,a.kt)("inlineCode",{parentName:"li"},"\u65b0\u589e"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"\u66f4\u65b0")," \u8fd8\u662f ",(0,a.kt)("inlineCode",{parentName:"li"},"\u5220\u9664")," \u64cd\u4f5c"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"naming"),"\uff1a\u547d\u540d\u6cd5 ",(0,a.kt)("inlineCode",{parentName:"li"},"NamingConventions")," \u7c7b\u578b\uff0c\u5305\u542b ",(0,a.kt)("inlineCode",{parentName:"li"},"CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09"))))),(0,a.kt)("admonition",{title:"\u6ce8\u610f\u4e8b\u9879",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"\u5982\u679c\u5728\u8be5\u81ea\u5b9a\u4e49 ",(0,a.kt)("inlineCode",{parentName:"p"},"SQL")," \u8f93\u51fa\u65b9\u6cd5\u4e2d\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"jobDetail.ConvertToSQL(..)")," \u4f1a\u5bfc\u81f4\u6b7b\u5faa\u73af\u3002")),(0,a.kt)("h3",{id:"26138-\u542f\u7528\u4f5c\u4e1a\u6267\u884c\u65e5\u5fd7\u8f93\u51fa"},"26.1.3.8 \u542f\u7528\u4f5c\u4e1a\u6267\u884c\u65e5\u5fd7\u8f93\u51fa"),(0,a.kt)("admonition",{title:"\u7248\u672c\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u9650 ",(0,a.kt)("inlineCode",{parentName:"p"},"TouchSocket 4.8.3.7 +")," \u7248\u672c\u4f7f\u7528\u3002")),(0,a.kt)("p",null,"\u901a\u5e38\u6211\u4eec\u9700\u8981\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJob")," \u5b9e\u73b0\u7c7b\u4e2d\u8f93\u51fa\u4f5c\u4e1a\u89e6\u53d1\u65e5\u5fd7\uff0c\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},'_logger.LogInformation($"{context}");')),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11}",showLineNumbers:!0,"{11}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context}");\n        return Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u4f46\u8fd9\u6837\u7684 ",(0,a.kt)("inlineCode",{parentName:"strong"},"\u8303\u5f0f\u4ee3\u7801")," \u51e0\u4e4e\u6bcf\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"strong"},"IJob")," \u5b9e\u73b0\u7c7b\u90fd\u53ef\u80fd\u8f93\u51fa"),"\uff0c\u6240\u4ee5\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"TouchSocket 4.8.3.7+")," \u7248\u672c\u63d0\u4f9b\u4e86\u66f4\u4fbf\u6377\u7684\u914d\u7f6e\uff0c\u65e0\u9700\u6bcf\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"p"},"IJob")," \u7f16\u5199 ",(0,a.kt)("inlineCode",{parentName:"p"},'_logger.LogInformation($"{context}");'),"\u3002"),(0,a.kt)("p",null,"\u914d\u7f6e\u542f\u7528\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n    options.JobDetail.LogEnabled = true;  // \u9ed8\u8ba4 false\n});\n")),(0,a.kt)("p",null,"\u4e4b\u540e ",(0,a.kt)("inlineCode",{parentName:"p"},"MyJob")," \u53ef\u4ee5\u66f4\u52a0\u7cbe\u7b80\u4e86\uff0c\u65e5\u5fd7\u7c7b\u522b\u81ea\u52a8\u8bbe\u7f6e\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"MyJob")," \u7c7b\u578b\u5b8c\u6574\u9650\u5b9a\u540d\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {5}",showLineNumbers:!0,"{5}":!0},'public class MyJob : IJob\n{\n    public Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        // \u8fd9\u91cc\u5199\u4e1a\u52a1\u903b\u8f91\u5373\u53ef\uff0c\u65e0\u9700\u8c03\u7528 _logger.LogInformation($"{context}");\n        return Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u4f5c\u4e1a\u6267\u884c\u65e5\u5fd7\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {1,3,5}",showLineNumbers:!0,"{1,3,5}":!0},"info: 2022-12-14 11:56:12.3963326 +08:00 \u661f\u671f\u4e09 L TouchSocket.Application.MyJob[0] #4\n      <job1> [C] <job1 job1_trigger2> 5s 1ts 2022-12-14 11:56:08.361 -> 2022-12-14 11:56:13.366\ninfo: 2022-12-14 11:56:13.4100745 +08:00 \u661f\u671f\u4e09 L TouchSocket.Application.MyJob[0] #6\n      <job1> [C] <job1 job1_trigger2> 5s 2ts 2022-12-14 11:56:13.366 -> 2022-12-14 11:56:18.376\ninfo: 2022-12-14 11:56:18.3931380 +08:00 \u661f\u671f\u4e09 L TouchSocket.Application.MyJob[0] #9\n      <job1> [C] <job1 job1_trigger2> 5s 3ts 2022-12-14 11:56:18.376 -> 2022-12-14 11:56:23.360\n")),(0,a.kt)("h2",{id:"2614-\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f-ijob"},"26.1.4 \u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f ",(0,a.kt)("inlineCode",{parentName:"h2"},"IJob")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u662f\u4f5c\u4e1a\u7b26\u5408\u89e6\u53d1\u65f6\u95f4\u6267\u884c\u7684\u4e1a\u52a1\u903b\u8f91\u4ee3\u7801\uff0c\u901a\u5e38\u7531\u7a0b\u5e8f\u5458\u7f16\u5199\uff0c\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u9700\u5b9e\u73b0 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJob")," \u63a5\u53e3\u3002"),(0,a.kt)("h3",{id:"26141-\u5982\u4f55\u5b9a\u4e49"},"26.1.4.1 \u5982\u4f55\u5b9a\u4e49"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,5}",showLineNumbers:!0,"{1,3,5}":!0},"public class MyJob : IJob\n{\n    public Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        // your code...\n    }\n}\n")),(0,a.kt)("h3",{id:"26142-jobexecutingcontext-\u4e0a\u4e0b\u6587"},"26.1.4.2 ",(0,a.kt)("inlineCode",{parentName:"h3"},"JobExecutingContext")," \u4e0a\u4e0b\u6587"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"JobExecutingContext")," \u4e0a\u4e0b\u6587\u4f5c\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"ExecuteAsync")," \u65b9\u6cd5\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570\uff0c\u5305\u542b\u4ee5\u4e0b\u8fd0\u884c\u65f6\u4fe1\u606f\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"JobExecutingContext")," \u5c5e\u6027\u5217\u8868"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JobId"),"\uff1a\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"li"},"Id")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TriggerId"),"\uff1a\u5f53\u524d\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"li"},"Id")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JobDetail"),"\uff1a\u4f5c\u4e1a\u4fe1\u606f"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Trigger"),"\uff1a\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"OccurrenceTime"),"\uff1a\u4f5c\u4e1a\u8ba1\u5212\u89e6\u53d1\u65f6\u95f4\uff0c\u6700\u51c6\u786e\u7684\u8bb0\u5f55\u65f6\u95f4"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ExecutingTime"),"\uff1a\u5b9e\u9645\u6267\u884c\u65f6\u95f4\uff08\u53ef\u80fd\u5b58\u5728\u8bef\u5dee\uff09"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"JobExecutingContext")," \u65b9\u6cd5\u5217\u8868"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},".ConvertToJSON(naming)"),"\uff1a\u5c06\u4e0a\u4e0b\u6587\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"JSON")," \u5b57\u7b26\u4e32"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},".ToString()"),"\uff1a\u8f93\u51fa\u4e3a\u5b57\u7b26\u4e32")))),(0,a.kt)("h3",{id:"26143-\u4f9d\u8d56\u6ce8\u5165"},"26.1.4.3 \u4f9d\u8d56\u6ce8\u5165"),(0,a.kt)("p",null,"\u5b9e\u73b0 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJob")," \u7684\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u7c7b\u578b\u9ed8\u8ba4\u6ce8\u518c\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"\u5355\u4f8b"),"\uff0c",(0,a.kt)("strong",{parentName:"p"},"\u90a3\u4e48\u53ea\u8981\u662f\u5355\u4f8b\u7684\u670d\u52a1\uff0c\u7686\u53ef\u4ee5\u901a\u8fc7\u6784\u9020\u51fd\u6570\u6ce8\u5165"),"\uff0c\u5982\uff1a",(0,a.kt)("inlineCode",{parentName:"p"},"ILogger<>"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"IConfiguration"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3-4,6-7}",showLineNumbers:!0,"{3-4,6-7}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    private readonly IConfiguration _configuration;\n\n    public MyJob(ILogger<MyJob> logger\n        , IConfiguration configuration)\n    {\n        _logger = logger;\n        _configuration = configuration;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context} {_configuration["key"]}");\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5982\u679c\u662f\u975e ",(0,a.kt)("inlineCode",{parentName:"strong"},"\u5355\u4f8b")," \u7684\u63a5\u53e3\uff0c\u5982 ",(0,a.kt)("inlineCode",{parentName:"strong"},"\u77ac\u65f6")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"strong"},"\u8303\u56f4")," \u670d\u52a1\uff0c\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"IServiceProvder")," \u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {5,9,18-19}",showLineNumbers:!0,"{5,9,18-19}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    private readonly IConfiguration _configuration;\n    private readonly IServiceProvider _serviceProvider;\n\n    public MyJob(ILogger<MyJob> logger\n        , IConfiguration configuration\n        , IServiceProvider serviceProvider)\n    {\n        _logger = logger;\n        _configuration = configuration;\n        _serviceProvider = serviceProvider;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        using var serviceScope = _serviceProvider.CreateScope();\n        var repository = serviceScope.ServiceProvider.GetService<IRepository<User>>();\n\n        _logger.LogInformation($"{context} {_configuration["key"]}");\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u9488\u5bf9\u9ad8\u9891\u5b9a\u65f6\u4efb\u52a1\uff0c\u6bd4\u5982\u6bcf\u79d2\u6267\u884c\u4e00\u6b21\uff0c\u6216\u8005\u66f4\u9891\u7e41\u7684\u4efb\u52a1"))),(0,a.kt)("p",null,"\u4e3a\u4e86\u907f\u514d\u9891\u7e41\u521b\u5efa\u4f5c\u7528\u57df\u548c\u9500\u6bc1\u4f5c\u7528\u57df\uff0c\u53ef\u521b\u5efa\u957f\u8303\u56f4\u7684\u4f5c\u7528\u57df\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,5,13,18,25,27}",showLineNumbers:!0,"{1,5,13,18,25,27}":!0},'public class MyJob : IJob, IDisposable\n{\n    private readonly ILogger<MyJob> _logger;\n    private readonly IConfiguration _configuration;\n    private readonly IServiceScope _serviceScope;\n\n    public MyJob(ILogger<MyJob> logger\n        , IConfiguration configuration\n        , IServiceProvider serviceProvider)\n    {\n        _logger = logger;\n        _configuration = configuration;\n        _serviceScope = serviceProvider.CreateScope();\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        var repository = _serviceScope.ServiceProvider.GetService<IRepository<User>>();\n        var user = await repository.GetAsync(1);\n\n        _logger.LogInformation($"{context} {_configuration["key"]}");\n        await Task.CompletedTask;\n    }\n\n    public void Dispose()\n    {\n        _serviceScope?.Dispose();\n    }\n}\n')),(0,a.kt)("h3",{id:"26144-\u52a8\u6001\u4f5c\u4e1a-dynamicjob"},"26.1.4.4 \u52a8\u6001\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"h3"},"DynamicJob")),(0,a.kt)("p",null,"\u6846\u67b6\u63d0\u4f9b\u4e86\u4fbf\u6377\u7684\u52a8\u6001\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"p"},"DynamicJob")," \u7c7b\u578b\uff0c\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"Func<IServiceProvider, JobExecutingContext, CancellationToken, Task>")," \u59d4\u6258\u4f20\u5165\uff0c\u65e0\u9700\u521b\u5efa ",(0,a.kt)("inlineCode",{parentName:"p"},"IJob")," \u5b9e\u73b0\u7c7b\u578b\u3002"),(0,a.kt)("p",null,"\u6846\u67b6\u8fd8\u4e3a\u59d4\u6258\u7684\u7b2c\u4e00\u4e2a\u53c2\u6570 ",(0,a.kt)("inlineCode",{parentName:"p"},"IServiceProvder")," \u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},".GetLogger()")," \u62d3\u5c55\u65b9\u6cd5\uff0c\u65b9\u4fbf\u5feb\u901f\u83b7\u53d6 ",(0,a.kt)("inlineCode",{parentName:"p"},"ILogger<System.Logging.DynamicJob>")," \u65e5\u5fd7\u5bf9\u8c61\u5b9e\u4f8b\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,9,18,26}",showLineNumbers:!0,"{2,9,18,26}":!0},'// \u901a\u8fc7 JobBuilder \u521b\u5efa\nvar jobBuilder = JobBuilder.Create((serviceProvider, context, stoppingToken) =>\n{\n      serviceProvider.GetLogger().LogInformation($"{context}");\n      return Task.CompletedTask;\n});\n\n// \u901a\u8fc7 jobBuilder \u65b9\u6cd5 SetDynamicExecuteAsync \u521b\u5efa\njobBuilder.SetDynamicExecuteAsync((serviceProvider, context, stoppingToken) =>\n{\n      serviceProvider.GetLogger().LogInformation($"{context}");\n      return Task.CompletedTask;\n});\n\n// \u901a\u8fc7 AddJob \u521b\u5efa\nservice.AddSchedule(options =>\n{\n      options.AddJob((serviceProvider, context, stoppingToken) =>\n      {\n            serviceProvider.GetLogger().LogInformation($"{context}");\n            return Task.CompletedTask;\n      }, Triggers.PeriodSeconds(5));\n});\n\n// \u901a\u8fc7 ISchedulerFactory \u521b\u5efa\n_schedulerFactory.AddJob((serviceProvider, context, stoppingToken) =>\n{\n      serviceProvider.GetLogger().LogInformation($"{context}");\n      return Task.CompletedTask;\n}, Triggers.PeriodSeconds(5));\n')),(0,a.kt)("p",null,"\u52a8\u6001\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {6,8,10,11,13}",showLineNumbers:!0,"{6,8,10,11,13}":!0},"info: 2022-12-04 12:26:18.6562296 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-04 12:26:18.6618404 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-04 12:26:18.8727764 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-04 12:26:18.8745765 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-04 12:26:18.9013540 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-04 12:26:23.8753926 +08:00 \u661f\u671f\u65e5 L System.Logging.DynamicJob[0] #6\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-04 12:26:23.837 -> 2022-12-04 12:26:28.835\ninfo: 2022-12-04 12:26:28.8686474 +08:00 \u661f\u671f\u65e5 L System.Logging.DynamicJob[0] #6\n      <job1> [C] <job1 job1_trigger1> 5s 2ts 2022-12-04 12:26:28.835 -> 2022-12-04 12:26:33.823\ninfo: 2022-12-04 12:26:33.8531796 +08:00 \u661f\u671f\u65e5 L System.Logging.DynamicJob[0] #13\n      <job1> [C] <job1 job1_trigger1> 5s 3ts 2022-12-04 12:26:33.823 -> 2022-12-04 12:26:38.820\n")),(0,a.kt)("admonition",{title:"\u52a8\u6001\u4f5c\u4e1a\u548c\u666e\u901a\u4f5c\u4e1a\u7684\u533a\u522b",type:"tip"},(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"\u52a8\u6001\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u7c7b\u578b\u662f\uff1a",(0,a.kt)("inlineCode",{parentName:"li"},"DynamicJob")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},"\u52a8\u6001\u4f5c\u4e1a\u63d0\u4f9b\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},".GetLogger()")," \u62d3\u5c55\u8f93\u51fa\u65e5\u5fd7\u7c7b\u522b\u662f\uff1a",(0,a.kt)("inlineCode",{parentName:"li"},"System.Logging.DynamicJob")),(0,a.kt)("li",{parentName:"ul"},"\u5982\u679c\u666e\u901a\u4f5c\u4e1a\u540c\u65f6\u8bbe\u7f6e\u4e86 ",(0,a.kt)("inlineCode",{parentName:"li"},"SetJobType")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"SetDynamicExecuteAsync"),"\uff0c\u90a3\u4e48\u4f18\u5148\u4f5c\u4e3a\u52a8\u6001\u4f5c\u4e1a\u6267\u884c\u3002"),(0,a.kt)("li",{parentName:"ul"},"\u52a8\u6001\u4f5c\u4e1a\u65e0\u6cd5\u5c06 ",(0,a.kt)("inlineCode",{parentName:"li"},"Func<..>")," \u8fdb\u884c\u5e8f\u5217\u5316\u6301\u4e45\u5316\u5b58\u50a8\uff0c\u9700\u5728\u5185\u5b58\uff08",(0,a.kt)("inlineCode",{parentName:"li"},"IJobPersistence.OnLoading"),"\uff09\u4e2d\u91cd\u65b0\u8d4b\u503c"))),(0,a.kt)("h3",{id:"26145-\u4f7f\u7528-roslynnatasha-\u52a8\u6001\u521b\u5efa"},"26.1.4.5 \u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"h3"},"Roslyn/Natasha")," \u52a8\u6001\u521b\u5efa"),(0,a.kt)("p",null,"\u6309\u7167\u7a0b\u5e8f\u5f00\u53d1\u7684\u6b63\u5e38\u601d\u7ef4\uff0c\u7406\u5e94\u5148\u5728\u4ee3\u7801\u4e2d\u521b\u5efa\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u7c7b\u578b\uff0c\u4f46\u6211\u4eec\u53ef\u4ee5\u501f\u52a9 ",(0,a.kt)("inlineCode",{parentName:"p"},"Roslyn")," \u52a8\u6001\u7f16\u8bd1 ",(0,a.kt)("inlineCode",{parentName:"p"},"C#")," \u4ee3\u7801\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u7f16\u8f91\u542f\u52a8\u9879\u76ee ",(0,a.kt)("inlineCode",{parentName:"strong"},".csproj")," \u6587\u4ef6\uff0c\u6dfb\u52a0 ",(0,a.kt)("inlineCode",{parentName:"strong"},"<PreserveCompilationContext>true</PreserveCompilationContext>")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-xml",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"<PropertyGroup>\n      <TargetFramework>net7.0</TargetFramework>\n      <PreserveCompilationContext>true</PreserveCompilationContext>\n</PropertyGroup>\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u5b89\u88c5 ",(0,a.kt)("inlineCode",{parentName:"strong"},"DotNetCore.Natasha.CSharp")," \u62d3\u5c55\u5305"))),(0,a.kt)("p",null,(0,a.kt)("a",{parentName:"p",href:"https://github.com/dotnetcore/Natasha"},"DotNetCore.Natasha.CSharp")," \u662f\u56fd\u4eba\u57fa\u4e8e ",(0,a.kt)("inlineCode",{parentName:"p"},"Roslyn")," \u5f00\u53d1\u7684\u975e\u5e38\u5f3a\u5927\u7684\u52a8\u6001\u7f16\u8bd1 ",(0,a.kt)("inlineCode",{parentName:"p"},"C#")," \u5e93\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers",showLineNumbers:!0},"dotnet add package DotNetCore.Natasha.CSharp\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u6839\u636e\u5b57\u7b26\u4e32\u521b\u5efa ",(0,a.kt)("inlineCode",{parentName:"strong"},"IJob")," \u7c7b\u578b"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,4,10-34,37}",showLineNumbers:!0,"{2,4,10-34,37}":!0},'// \u521d\u59cb\u5316\nNatashaInitializer.Preheating();\n// \u521b\u5efa\u7a0b\u5e8f\u96c6\uff08\u53ef\u81ea\u5b9a\u4e49\u7f16\u5199\u7a0b\u5e8f\u96c6\u540d\u79f0\uff09\nvar oop = new AssemblyCSharpBuilder("JobAssembly")\n{\n    Domain = DomainManagement.Random()\n};\n\n// \u6dfb\u52a0\u4ee3\u7801\noop.Add(@"\nusing TouchSocket.Schedule;\nusing Microsoft.Extensions.Logging;\nusing System;\nusing System.Threading;\nusing System.Threading.Tasks;\n\nnamespace YourProject;\n\npublic class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($""\u6211\u662f Roslyn \u65b9\u5f0f\u521b\u5efa\u7684\uff1a{context}"");\n        await Task.CompletedTask;\n    }\n}\n");\n\n// \u751f\u6210\u8fd0\u884c\u65f6 MyJob \u7c7b\u578b\nvar jobType = oop.GetTypeFromShortName("MyJob");\n')),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u6ce8\u518c\u4f5c\u4e1a"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4,9}",showLineNumbers:!0,"{4,9}":!0},"// \u53ef\u4ee5\u5728\u542f\u52a8\u7684\u65f6\u5019\u6dfb\u52a0\nservices.AddSchedule(options =>\n{\n     options.AddJob(jobType\n            , Triggers.PeriodSeconds(5));\n});\n\n// \u4e5f\u53ef\u4ee5\u5b8c\u5168\u5728\u8fd0\u884c\u65f6\u6dfb\u52a0\uff08\u5e38\u7528\uff09\n_schedulerFactory.AddJob(jobType\n            , Triggers.PeriodSeconds(5));\n")),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {6,8,10,12,14,16}",showLineNumbers:!0,"{6,8,10,12,14,16}":!0},"info: 2022-12-04 12:38:00.6249410 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-04 12:38:00.6294089 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-04 12:38:00.7496005 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-04 12:38:00.7514579 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-04 12:38:00.7836777 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-04 12:38:05.7389682 +08:00 \u661f\u671f\u65e5 L YourProject.MyJob[0] #6\n      \u6211\u662f Roslyn \u65b9\u5f0f\u521b\u5efa\u7684\uff1a<job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-04 12:38:05.713 -> 2022-12-04 12:38:10.692\ninfo: 2022-12-04 12:38:10.7108416 +08:00 \u661f\u671f\u65e5 L YourProject.MyJob[0] #11\n      \u6211\u662f Roslyn \u65b9\u5f0f\u521b\u5efa\u7684\uff1a<job1> [C] <job1 job1_trigger1> 5s 2ts 2022-12-04 12:38:10.692 -> 2022-12-04 12:38:15.673\ninfo: 2022-12-04 12:38:15.6925578 +08:00 \u661f\u671f\u65e5 L YourProject.MyJob[0] #11\n      \u6211\u662f Roslyn \u65b9\u5f0f\u521b\u5efa\u7684\uff1a<job1> [C] <job1 job1_trigger1> 5s 3ts 2022-12-04 12:38:15.673 -> 2022-12-04 12:38:20.656\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u60ca\u4e0d\u60ca\u559c\uff0c\u610f\u5916\u610f\u5916~"),"\u3002"),(0,a.kt)("admonition",{title:"\u5c0f\u77e5\u8bc6",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"Roslyn")," \u7684\u65b9\u5f0f\u652f\u6301\u521b\u5efa ",(0,a.kt)("inlineCode",{parentName:"p"},"IJob"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler")," \u54e6\uff0c\u81ea\u884c\u6d4b\u8bd5\u3002\ud83d\ude0a")),(0,a.kt)("h3",{id:"26146-\u4f5c\u4e1a\u8c03\u5ea6\u5668\u88ab\u53d6\u6d88\u5904\u7406"},"26.1.4.6 \u4f5c\u4e1a\u8c03\u5ea6\u5668\u88ab\u53d6\u6d88\u5904\u7406"),(0,a.kt)("p",null,"\u4e00\u822c\u60c5\u51b5\u4e0b\uff0c\u4f5c\u4e1a\u8c03\u5ea6\u5668\u610f\u5916\u5173\u95ed\u6216\u624b\u52a8\u5173\u95ed\uff0c\u4f46\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u5f02\u6b65\u64cd\u4f5c\u8fd8\u672a\u5904\u7406\u5b8c\u6210\uff0c\u8fd9\u4e2a\u65f6\u5019\u6211\u4eec\u53ef\u4ee5\u9009\u62e9\u53d6\u6d88\u8fd8\u662f\u7ee7\u7eed\u6267\u884c\uff0c\u5982\u679c\u9009\u62e9\u53d6\u6d88\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {15,19,23,30}",showLineNumbers:!0,"{15,19,23,30}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context}");\n\n        try\n        {\n            await SomeMethodAsync(stoppingToken);\n        }\n        catch (TaskCanceledException)\n        {\n            _logger.LogWarning("\u4f5c\u4e1a\u88ab\u53d6\u6d88\u4e86~");\n        }\n        catch (AggregateException ex) when (ex.InnerExceptions.Count == 1 && ex.InnerExceptions[0] is TaskCanceledException)\n        {\n            _logger.LogWarning("\u4f5c\u4e1a\u88ab\u53d6\u6d88\u4e86~");\n        }\n    }\n\n    private async Task SomeMethodAsync(CancellationToken stoppingToken)\n    {\n        // \u6a21\u62df\u8017\u65f6\n        await Task.Delay(1000 * 60 * 60, stoppingToken);\n    }\n}\n')),(0,a.kt)("p",null,"\u8fd9\u6837\u5f53\u4f5c\u4e1a\u8c03\u5ea6\u5668\u88ab\u5173\u95ed\u65f6\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"SomeMethodAsync")," \u5982\u679c\u672a\u5904\u7406\u5b8c\u6210\u4e5f\u4f1a\u53d6\u6d88\u64cd\u4f5c\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {14,16,18,20}",showLineNumbers:!0,"{14,16,18,20}":!0},"info: 2022-12-04 12:49:00.2636929 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-04 12:49:00.2686096 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-04 12:49:00.4252737 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-04 12:49:00.4266075 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-04 12:49:00.4468654 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-04 12:49:05.4397629 +08:00 \u661f\u671f\u65e5 L MyJob[0] #4\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-04 12:49:05.390 -> 2022-12-04 12:49:10.393\ninfo: 2022-12-04 12:49:08.6301592 +08:00 \u661f\u671f\u65e5 L Microsoft.Hosting.Lifetime[0] #14\n      Application is shutting down...\nwarn: 2022-12-04 12:49:08.7247004 +08:00 \u661f\u671f\u65e5 L MyJob[0] #6\n      \u4f5c\u4e1a\u88ab\u53d6\u6d88\u4e86~\nwarn: 2022-12-04 12:49:10.4257861 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #6\n      Schedule hosted service cancels hibernation and GC.Collect().\ncrit: 2022-12-04 12:49:10.4360088 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #6\n      Schedule hosted service is stopped.\n")),(0,a.kt)("h2",{id:"2615-\u4f5c\u4e1a\u89e6\u53d1\u5668-trigger-\u53ca\u6784\u5efa\u5668"},"26.1.5 \u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"h2"},"Trigger")," \u53ca\u6784\u5efa\u5668"),(0,a.kt)("h3",{id:"26151-\u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.5.1 \u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("p",null,"\u6846\u67b6\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u7c7b\u578b\u6765\u63cf\u8ff0\u4f5c\u4e1a\u5177\u4f53\u7684\u89e6\u53d1\u65f6\u95f4\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u7c7b\u578b\u63d0\u4f9b\u4ee5\u4e0b",(0,a.kt)("strong",{parentName:"p"},"\u53ea\u8bfb\u5c5e\u6027"),"\uff1a"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"\u5c5e\u6027\u540d"),(0,a.kt)("th",{parentName:"tr",align:null},"\u5c5e\u6027\u7c7b\u578b"),(0,a.kt)("th",{parentName:"tr",align:null},"\u9ed8\u8ba4\u503c"),(0,a.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"TriggerId")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"td"},"Id"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"JobId")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"td"},"Id"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"TriggerType")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u89e6\u53d1\u5668\u7c7b\u578b\uff0c\u5b58\u50a8\u7684\u662f\u7c7b\u578b\u7684 ",(0,a.kt)("inlineCode",{parentName:"td"},"FullName"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"AssemblyName")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u89e6\u53d1\u5668\u7c7b\u578b\u6240\u5728\u7a0b\u5e8f\u96c6\uff0c\u5b58\u50a8\u7684\u662f\u7a0b\u5e8f\u96c6 ",(0,a.kt)("inlineCode",{parentName:"td"},"Name"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Args")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570\uff0c\u8fd0\u884c\u65f6\u5c06\u53cd\u5e8f\u5217\u5316\u4e3a ",(0,a.kt)("inlineCode",{parentName:"td"},"object[]")," \u7c7b\u578b\u5e76\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u53c2\u6570")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Description")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"string")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u63cf\u8ff0\u4fe1\u606f")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Status")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"TriggerStatus")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Ready")),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"StartTime")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"DateTime?")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u8d77\u59cb\u65f6\u95f4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"EndTime")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"DateTime?")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u7ed3\u675f\u65f6\u95f4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"LastRunTime")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"DateTime?")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u6700\u8fd1\u8fd0\u884c\u65f6\u95f4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"NextRunTime")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"DateTime?")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4e0b\u4e00\u6b21\u8fd0\u884c\u65f6\u95f4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"NumberOfRuns")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"long")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"\u89e6\u53d1\u6b21\u6570")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"MaxNumberOfRuns")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"long")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"\u6700\u5927\u89e6\u53d1\u6b21\u6570\uff0c",(0,a.kt)("inlineCode",{parentName:"td"},"0"),"\uff1a\u4e0d\u9650\u5236\uff0c",(0,a.kt)("inlineCode",{parentName:"td"},"n"),"\uff1aN \u6b21")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"NumberOfErrors")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"long")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"\u51fa\u9519\u6b21\u6570")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"MaxNumberOfErrors")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"long")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"\u6700\u5927\u51fa\u9519\u6b21\u6570\uff0c",(0,a.kt)("inlineCode",{parentName:"td"},"0"),"\uff1a\u4e0d\u9650\u5236\uff0c",(0,a.kt)("inlineCode",{parentName:"td"},"n"),"\uff1aN \u6b21")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"NumRetries")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"int")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"\u91cd\u8bd5\u6b21\u6570")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"RetryTimeout")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"int")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"1000")),(0,a.kt)("td",{parentName:"tr",align:null},"\u91cd\u8bd5\u95f4\u9694\u65f6\u95f4\uff0c\u6beb\u79d2\u5355\u4f4d")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"StartNow")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"bool")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"true")),(0,a.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u7acb\u5373\u542f\u52a8")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"RunOnStart")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"bool")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"false")),(0,a.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u542f\u52a8\u65f6\u6267\u884c\u4e00\u6b21")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"ResetOnlyOnce")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"bool")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"true")),(0,a.kt)("td",{parentName:"tr",align:null},"\u662f\u5426\u5728\u542f\u52a8\u65f6\u91cd\u7f6e\u6700\u5927\u89e6\u53d1\u6b21\u6570\u7b49\u4e8e\u4e00\u6b21\u7684\u4f5c\u4e1a")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"UpdatedTime")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"DateTime?")),(0,a.kt)("td",{parentName:"tr",align:null}),(0,a.kt)("td",{parentName:"tr",align:null},"\u4f5c\u4e1a\u89e6\u53d1\u5668\u66f4\u65b0\u65f6\u95f4")))),(0,a.kt)("h3",{id:"26152-\u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001"},"26.1.5.2 \u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001\u6307\u793a\u4e86\u5f53\u524d\u4f5c\u4e1a\u89e6\u53d1\u5668\u7684\u72b6\u6001\uff0c\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerStatus")," \u679a\u4e3e\u7c7b\u578b\uff08",(0,a.kt)("inlineCode",{parentName:"p"},"uint"),"\uff09\uff0c\u8be5\u7c7b\u578b\u5305\u542b\u4ee5\u4e0b\u679a\u4e3e\u6210\u5458\u3002"),(0,a.kt)("table",null,(0,a.kt)("thead",{parentName:"table"},(0,a.kt)("tr",{parentName:"thead"},(0,a.kt)("th",{parentName:"tr",align:null},"\u679a\u4e3e\u540d"),(0,a.kt)("th",{parentName:"tr",align:null},"\u679a\u4e3e\u503c"),(0,a.kt)("th",{parentName:"tr",align:null},"\u8bf4\u660e"))),(0,a.kt)("tbody",{parentName:"table"},(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Backlog")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"0")),(0,a.kt)("td",{parentName:"tr",align:null},"\u79ef\u538b\uff0c\u8d77\u59cb\u65f6\u95f4\u5927\u4e8e\u5f53\u524d\u65f6\u95f4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Ready")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"1")),(0,a.kt)("td",{parentName:"tr",align:null},"\u5c31\u7eea")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Running")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"2")),(0,a.kt)("td",{parentName:"tr",align:null},"\u6b63\u5728\u8fd0\u884c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Pause")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"3")),(0,a.kt)("td",{parentName:"tr",align:null},"\u6682\u505c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Blocked")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"4")),(0,a.kt)("td",{parentName:"tr",align:null},"\u963b\u585e\uff0c\u672c\u8be5\u6267\u884c\u4f46\u662f\u6ca1\u6709\u6267\u884c")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"ErrorToReady")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"5")),(0,a.kt)("td",{parentName:"tr",align:null},"\u7531\u5931\u8d25\u8fdb\u5165\u5c31\u7eea\uff0c\u8fd0\u884c\u9519\u8bef\u5f53\u5e76\u672a\u8d85\u51fa\u6700\u5927\u9519\u8bef\u6570\uff0c\u8fdb\u5165\u4e0b\u4e00\u8f6e\u5c31\u7eea")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Archived")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"6")),(0,a.kt)("td",{parentName:"tr",align:null},"\u5f52\u6863\uff0c\u7ed3\u675f\u65f6\u95f4\u5c0f\u4e8e\u5f53\u524d\u65f6\u95f4")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Panic")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"7")),(0,a.kt)("td",{parentName:"tr",align:null},"\u5d29\u6e83\uff0c\u9519\u8bef\u6b21\u6570\u8d85\u51fa\u4e86\u6700\u5927\u9519\u8bef\u6570")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Overrun")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"8")),(0,a.kt)("td",{parentName:"tr",align:null},"\u8d85\u9650\uff0c\u8fd0\u884c\u6b21\u6570\u8d85\u51fa\u4e86\u6700\u5927\u9650\u5236")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Unoccupied")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"9")),(0,a.kt)("td",{parentName:"tr",align:null},"\u65e0\u89e6\u53d1\u65f6\u95f4\uff0c\u4e0b\u4e00\u6b21\u6267\u884c\u65f6\u95f4\u4e3a ",(0,a.kt)("inlineCode",{parentName:"td"},"null"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"NotStart")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"10")),(0,a.kt)("td",{parentName:"tr",align:null},"\u521d\u59cb\u5316\u65f6\u672a\u542f\u52a8")),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Unknown")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"11")),(0,a.kt)("td",{parentName:"tr",align:null},"\u672a\u77e5\u4f5c\u4e1a\u89e6\u53d1\u5668\uff0c\u4f5c\u4e1a\u89e6\u53d1\u5668\u8fd0\u884c\u65f6\u7c7b\u578b\u4e3a ",(0,a.kt)("inlineCode",{parentName:"td"},"null"))),(0,a.kt)("tr",{parentName:"tbody"},(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"Unhandled")),(0,a.kt)("td",{parentName:"tr",align:null},(0,a.kt)("inlineCode",{parentName:"td"},"12")),(0,a.kt)("td",{parentName:"tr",align:null},"\u672a\u77e5\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\uff0c\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u7c7b\u578b\u8fd0\u884c\u65f6\u7c7b\u578b\u4e3a ",(0,a.kt)("inlineCode",{parentName:"td"},"null"))))),(0,a.kt)("h3",{id:"26153-\u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668"},"26.1.5.3 \u5173\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u662f\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u8fd0\u884c\u65f6\u7684",(0,a.kt)("strong",{parentName:"p"},"\u53ea\u8bfb\u7c7b\u578b"),"\uff0c\u90a3\u4e48\u6211\u4eec\u8be5\u5982\u4f55\u521b\u5efa\u6216\u53d8\u66f4 ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u5bf9\u8c61\u5462\uff1f"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u662f\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u53ef\u7528\u6765\u751f\u6210\u8fd0\u884c\u65f6 ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u7684\u7c7b\u578b\uff0c\u8fd9\u6837\u505a\u7684\u597d\u5904\u53ef\u907f\u514d\u5916\u90e8\u76f4\u63a5\u4fee\u6539\u8fd0\u884c\u65f6 ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u6570\u636e\uff0c\u8fd8\u80fd\u5b9e\u73b0\u4efb\u4f55\u4fee\u6539\u52a8\u4f5c\u76d1\u542c\uff0c\u4e5f\u80fd\u907f\u514d\u591a\u7ebf\u7a0b\u62a2\u5360\u60c5\u51b5\u3002"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u5f0f\u7528\u6765\u521b\u5efa ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u5bf9\u8c61\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Create")," \u9759\u6001\u65b9\u6cd5\u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5,8,11,14,17,20}",showLineNumbers:!0,"{2,5,8,11,14,17,20}":!0},'// \u6839\u636e\u4f5c\u4e1a\u89e6\u53d1\u5668 Id \u521b\u5efa\nvar triggerBuilder = TriggerBuilder.Create("trigger1");\n\n// \u6839\u636e Trigger \u6d3e\u751f\u7c7b\u7c7b\u578b\u521b\u5efa\nvar triggerBuilder = TriggerBuilder.Create<PeriodTrigger>();\n\n// \u6839\u636e Trigger \u6d3e\u751f\u7c7b\u7c7b\u578b + \u6784\u9020\u51fd\u6570\u53c2\u6570\u521b\u5efa\nvar triggerBuilder = TriggerBuilder.Create<CronTrigger>("* * * * *", CronStringFormat.Default);\n\n// \u6839\u636e\u7a0b\u5e8f\u96c6\u540d\u79f0\u548c\u7c7b\u578b\u5b8c\u5168\u9650\u5b9a\u540d\uff08FullName\uff09\u521b\u5efa\nvar triggerBuilder = TriggerBuilder.Create("TouchSocket", "TouchSocket.Schedule.PeriodTrigger");\n\n// \u6839\u636e\u7a0b\u5e8f\u96c6\u540d\u79f0\u548c\u7c7b\u578b\u5b8c\u5168\u9650\u5b9a\u540d\uff08FullName\uff09 + \u6784\u9020\u51fd\u6570\u53c2\u6570\u521b\u5efa\nvar triggerBuilder = TriggerBuilder.Create("TouchSocket", "TouchSocket.Schedule.PeriodTrigger", 1000);\n\n// \u6839\u636e Type \u7c7b\u578b\u521b\u5efa\nvar triggerBuilder = TriggerBuilder.Create(typeof(PeriodTrigger));\n\n// \u6839\u636e Type \u7c7b\u578b + \u6784\u9020\u51fd\u6570\u53c2\u6570\u521b\u5efa\nvar triggerBuilder = TriggerBuilder.Create(typeof(CronTrigger), "* * * * *", CronStringFormat.Default);\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Trigger")," \u7c7b\u578b\u521b\u5efa"))),(0,a.kt)("p",null,"\u8fd9\u79cd\u65b9\u5f0f\u5e38\u7528\u4e8e\u5728\u8fd0\u884c\u65f6\u66f4\u65b0\u4f5c\u4e1a\u89e6\u53d1\u5668\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var triggerBuilder = TriggerBuilder.From(trigger);\n\n//\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\nvar triggerBuilder = trigger.GetBuilder();\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u5b57\u7b26\u4e32\u521b\u5efa"))),(0,a.kt)("p",null,"\u8be5\u65b9\u5f0f\u975e\u5e38\u7075\u6d3b\uff0c\u53ef\u4ece\u914d\u7f6e\u6587\u4ef6\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," \u5b57\u7b26\u4e32\uff0c\u6216\u5176\u4ed6\u80fd\u591f\u8fd4\u56de ",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," \u5b57\u7b26\u4e32\u7684\u5730\u65b9\u521b\u5efa\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2-24}",showLineNumbers:!0,"{2-24}":!0},'var triggerBuilder = Triggers.From(@"\n{\n    ""triggerId"": ""job1_trigger1"",\n    ""jobId"": ""job1"",\n    ""triggerType"": ""TouchSocket.Schedule.CronTrigger"",\n    ""assemblyName"": ""TouchSocket"",\n    ""args"": ""[\\""* * * * *\\"",0]"",\n    ""description"": null,\n    ""status"": 1,\n    ""startTime"": null,\n    ""endTime"": null,\n    ""lastRunTime"": ""2022-12-04 16:13:00.000"",\n    ""nextRunTime"": null,\n    ""numberOfRuns"": 1,\n    ""maxNumberOfRuns"": 0,\n    ""numberOfErrors"": 0,\n    ""maxNumberOfErrors"": 0,\n    ""numRetries"": 0,\n    ""retryTimeout"": 1000,\n    ""startNow"": true,\n    ""runOnStart"": false,\n    ""resetOnlyOnce"": true,\n    ""updatedTime"": ""2022-12-04 16:13:00.045""\n}");\n')),(0,a.kt)("p",null,"\u5982\u679c\u4f7f\u7528\u7684\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},".NET7"),"\uff0c\u53ef\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},'"""')," \u907f\u514d\u8f6c\u4e49\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2-24}",showLineNumbers:!0,"{2-24}":!0},'var triggerBuilder = Triggers.From("""\n{\n      "triggerId": "job1_trigger1",\n      "jobId": "job1",\n      "triggerType": "TouchSocket.Schedule.CronTrigger",\n      "assemblyName": "TouchSocket",\n      "args": "[\\"* * * * *\\",0]",\n      "description": null,\n      "status": 8,\n      "startTime": null,\n      "endTime": null,\n      "lastRunTime": "2022-12-04 16:13:00.000",\n      "nextRunTime": null,\n      "numberOfRuns": 1,\n      "maxNumberOfRuns": 0,\n      "numberOfErrors": 0,\n      "maxNumberOfErrors": 0,\n      "numRetries": 0,\n      "retryTimeout": 1000,\n      "startNow": true,\n      "runOnStart": false,\n      "resetOnlyOnce": true,\n      "updatedTime": "2022-12-04 16:13:00.045"\n}\n""");\n')),(0,a.kt)("admonition",{title:"\u5173\u4e8e\u5c5e\u6027\u540d\u5339\u914d\u89c4\u5219",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09")," \u547d\u540d\u65b9\u5f0f\u3002"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"strong"},"UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09"))," \uff0c\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},'"include_annotations": true'))),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8fd8\u53ef\u4ee5\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Clone")," \u9759\u6001\u65b9\u6cd5\u4ece\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"strong"},"TriggerBuilder")," \u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var triggerBuilder = TriggerBuilder.Clone(fromTriggerBuilder);\n")),(0,a.kt)("admonition",{title:"\u514b\u9686\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u514b\u9686\u64cd\u4f5c\u53ea\u4f1a\u514b\u9686 ",(0,a.kt)("inlineCode",{parentName:"p"},"AssemblyName"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerType"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Args"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Description"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"StartTime"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"EndTime"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"MaxNumberOfRuns"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"MaxNumberOfErrors"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"NumRetries"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"RetryTimeout"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"StartNow"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"RunOnStart"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"ResetOnlyOnce"),"\u3002"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u4f1a\u514b\u9686 ",(0,a.kt)("inlineCode",{parentName:"strong"},"TriggerId"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"JobId"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"Status"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"LastRunTime"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"NextRunTime"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"NumberOfRuns"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"NumberOfErrors"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"UpdatedTime"),"\u3002"))),(0,a.kt)("ol",{start:5},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8fd8\u53ef\u4ee5\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"LoadFrom")," \u5b9e\u4f8b\u65b9\u6cd5\u586b\u5145\u5f53\u524d\u7684 ",(0,a.kt)("inlineCode",{parentName:"strong"},"TriggerBuilder")))),(0,a.kt)("p",null,"\u6bd4\u5982\u53ef\u4ee5\u4f20\u9012\u533f\u540d\u7c7b\u578b\uff0c\u7c7b\u7c7b\u578b\uff0c\u5b57\u5178 ",(0,a.kt)("inlineCode",{parentName:"p"},"Dictionary<string, object>")," \u7c7b\u578b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,9,16,23}",showLineNumbers:!0,"{2,9,16,23}":!0},'// \u4f1a\u8986\u76d6\u6240\u6709\u76f8\u540c\u7684\u503c\ntriggerBuilder.LoadFrom(new\n{\n      Description = "\u6211\u662f\u63cf\u8ff0",\n      StartTime = DateTime.Now\n});\n\n// \u652f\u6301\u591a\u4e2a\u586b\u5145\uff0c\u8fd8\u53ef\u4ee5\u914d\u7f6e\u8df3\u8fc7 null \u503c\u8986\u76d6\ntriggerBuilder.LoadFrom(new\n{\n      Description = "\u6211\u662f\u53e6\u5916\u4e00\u4e2a\u63cf\u8ff0",\n      StartTime = default(object),\n}, ignoreNullValue: true);\n\n// \u652f\u6301\u5ffd\u7565\u7279\u5b9a\u5c5e\u6027\u540d\u6620\u5c04\ntriggerBuilder.LoadFrom(new\n{\n      Description = "\u6211\u662f\u53e6\u5916\u4e00\u4e2a\u63cf\u8ff0",\n      TriggerId = "trigger1"\n}, ignorePropertyNames: new[]{ "description" });\n\n// \u652f\u6301\u5b57\u5178\u7c7b\u578b\ntriggerBuilder.LoadFrom(new Dictionary<string, object>\n{\n      {"Description", "\u8fd9\u662f\u65b0\u7684\u63cf\u8ff0" },\n      {"updatedTime", DateTime.Now }\n});\n')),(0,a.kt)("admonition",{title:"\u5173\u4e8e\u5c5e\u6027\u540d\u5339\u914d\u89c4\u5219",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09")," \u547d\u540d\u65b9\u5f0f\u3002")),(0,a.kt)("h3",{id:"26154-\u5185\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668"},"26.1.5.4 \u5185\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668"),(0,a.kt)("p",null,"\u4e3a\u4e86\u65b9\u4fbf\u5feb\u901f\u5b9e\u73b0\u4f5c\u4e1a\u89e6\u53d1\u5668\uff0c\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u5185\u7f6e\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"Period\uff08\u95f4\u9694\uff09")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"Cron\uff08\u8868\u8fbe\u5f0f\uff09")," \u4f5c\u4e1a\u89e6\u53d1\u5668\uff0c\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u7c7b\u578b\u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},"Triggers")," \u9759\u6001\u7c7b\u521b\u5efa\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"TriggerBuilder")," \u65b9\u5f0f"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-c",metastring:"showLineNumbers {2,5}",showLineNumbers:!0,"{2,5}":!0},'// \u521b\u5efa\u6beb\u79d2\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = TriggerBuilder.Period(5000);\n\n// \u521b\u5efa Cron \u8868\u8fbe\u5f0f\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = TriggerBuilder.Cron("* * * * *", CronStringFormat.Default);\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"Triggers")," \u65b9\u5f0f\uff0c\u2764\ufe0f \u63a8\u8350"))),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Triggers")," \u9759\u6001\u7c7b\u5177\u5907 ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u6240\u6709\u7684\u9759\u6001\u65b9\u6cd5\u540c\u65f6\u8fd8\u6dfb\u52a0\u4e86\u4e0d\u5c11\u66f4\u52a0\u4fbf\u6377\u7684\u9759\u6001\u65b9\u6cd5\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,11,31}",showLineNumbers:!0,"{1,11,31}":!0},'// \u95f4\u9694 Period \u65b9\u5f0f\n// \u521b\u5efa\u6beb\u79d2\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Period(5000);\n// \u521b\u5efa\u79d2\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.PeriodSeconds(5);\n// \u521b\u5efa\u5206\u949f\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.PeriodMinutes(5);\n// \u521b\u5efa\u5c0f\u65f6\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.PeriodHours(5);\n\n// Cron \u8868\u8fbe\u5f0f\u65b9\u5f0f\n// \u521b\u5efa Cron \u8868\u8fbe\u5f0f\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Cron("* * * * *", CronStringFormat.Default);\n// \u521b\u5efa\u6bcf\u79d2\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Secondly();\n// \u521b\u5efa\u6bcf\u5206\u949f\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Minutely();\n// \u521b\u5efa\u6bcf\u5c0f\u65f6\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Hourly();\n// \u521b\u5efa\u6bcf\u5929\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Daily();\n// \u521b\u5efa\u6bcf\u67081\u53f7\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Monthly();\n// \u521b\u5efa\u6bcf\u5468\u65e5\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Weekly();\n// \u521b\u5efa\u6bcf\u5e741\u67081\u53f7\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Yearly();\n// \u521b\u5efa\u6bcf\u5468\u4e00\u81f3\u5468\u4e94\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = Triggers.Workday();\n\n// Cron \u8868\u8fbe\u5f0f Macro At \u65b9\u5f0f\n// \u6bcf\u7b2c 3 \u79d2\nvar triggerBuilder = Triggers.SecondlyAt(3);\n// \u6bcf\u7b2c 3\uff0c5\uff0c6 \u79d2\nvar triggerBuilder = Triggers.SecondlyAt(3, 5, 6);\n\n// \u6bcf\u5206\u949f\u7b2c 3 \u79d2\nvar triggerBuilder = Triggers.MinutelyAt(3);\n// \u6bcf\u5206\u949f\u7b2c 3\uff0c5\uff0c6 \u79d2\nvar triggerBuilder = Triggers.MinutelyAt(3, 5, 6);\n\n// \u6bcf\u5c0f\u65f6\u7b2c 3 \u5206\u949f\nvar triggerBuilder = Triggers.HourlyAt(3);\n// \u6bcf\u5c0f\u65f6\u7b2c 3\uff0c5\uff0c6 \u5206\u949f\nvar triggerBuilder = Triggers.HourlyAt(3, 5, 6);\n\n// \u6bcf\u5929\u7b2c 3 \u5c0f\u65f6\u6b63\uff08\u70b9\uff09\nvar triggerBuilder = Triggers.DailyAt(3);\n// \u6bcf\u5929\u7b2c 3\uff0c5\uff0c6 \u5c0f\u65f6\u6b63\uff08\u70b9\uff09\nvar triggerBuilder = Triggers.DailyAt(3, 5, 6);\n\n// \u6bcf\u6708\u7b2c 3 \u5929\u96f6\u70b9\u6b63\nvar triggerBuilder = Triggers.MonthlyAt(3);\n// \u6bcf\u6708\u7b2c 3\uff0c5\uff0c6 \u5929\u96f6\u70b9\u6b63\nvar triggerBuilder = Triggers.MonthlyAt(3, 5, 6);\n\n// \u6bcf\u5468\u661f\u671f 3 \u96f6\u70b9\u6b63\nvar triggerBuilder = Triggers.WeeklyAt(3);\nvar triggerBuilder = Triggers.WeeklyAt("WED");  // SUN\uff08\u661f\u671f\u5929\uff09\uff0cMON\uff0cTUE\uff0cWED\uff0cTHU\uff0cFRI\uff0cSAT\n// \u6bcf\u5468\u661f\u671f 3\uff0c5\uff0c6 \u96f6\u70b9\u6b63\nvar triggerBuilder = Triggers.WeeklyAt(3, 5, 6);\nvar triggerBuilder = Triggers.WeeklyAt("WED", "FRI", "SAT");\n// \u8fd8\u652f\u6301\u6df7\u5408\nvar triggerBuilder = Triggers.WeeklyAt(3, "FRI", 6);\n\n// \u6bcf\u5e74\u7b2c 3 \u6708 1 \u65e5\u96f6\u70b9\u6b63\nvar triggerBuilder = Triggers.YearlyAt(3);\nvar triggerBuilder = Triggers.YearlyAt("MAR");  // JAN\uff08\u4e00\u6708\uff09\uff0cFEB\uff0cMAR\uff0cAPR\uff0cMAY\uff0cJUN\uff0cJUL\uff0cAUG\uff0cSEP\uff0cOCT\uff0cNOV\uff0cDEC\n// \u6bcf\u5e74\u7b2c 3\uff0c5\uff0c6 \u6708 1 \u65e5\u96f6\u70b9\u6b63\nvar triggerBuilder = Triggers.YearlyAt(3);\nvar triggerBuilder = Triggers.YearlyAt(3, 5, 6);\nvar triggerBuilder = Triggers.YearlyAt("MAR", "MAY", "JUN");\n// \u8fd8\u652f\u6301\u6df7\u5408\nvar triggerBuilder = Triggers.YearlyAt(3, "MAY", 6);\n')),(0,a.kt)("h3",{id:"26155-\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.5.5 \u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("p",null,"\u9664\u4e86\u4f7f\u7528\u6846\u67b6\u63d0\u4f9b\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"PeriodTrigger")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"CronTrigger")," \u4ee5\u5916\uff0c\u8fd8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668\uff0c\u53ea\u9700\u8981\u7ee7\u627f ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u5e76\u91cd\u5199 ",(0,a.kt)("inlineCode",{parentName:"p"},"GetNextOccurrence")," \u65b9\u6cd5\u5373\u53ef\uff0c\u5982\u5b9e\u73b0\u4e00\u4e2a\u95f4\u9694\u4e24\u79d2\u7684\u4f5c\u4e1a\u89e6\u53d1\u5668\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,5}",showLineNumbers:!0,"{1,3,5}":!0},"public class CustomTrigger : Trigger\n{\n    public override DateTime GetNextOccurrence(DateTime startAt)\n    {\n        return startAt.AddSeconds(2);\n    }\n}\n")),(0,a.kt)("p",null,"\u4e4b\u540e\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder.Create")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},"Triggers.Create")," \u521b\u5efa\u5373\u53ef\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n    options.AddJob<MyJob>(Triggers.Create<CustomTrigger>());\n});\n")),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {12,14,16}",showLineNumbers:!0,"{12,14,16}":!0},"info: 2022-12-04 17:19:25.0980531 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-04 17:19:25.1027083 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-04 17:19:25.2702054 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-04 17:19:25.2723418 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-04 17:19:25.2999295 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-04 17:19:27.2849015 +08:00 \u661f\u671f\u65e5 L MyJob[0] #8\n      <job1> [C] <job1 job1_trigger1> 1ts 2022-12-04 17:19:27.234 -> 2022-12-04 17:19:29.232\ninfo: 2022-12-04 17:19:29.2604639 +08:00 \u661f\u671f\u65e5 L MyJob[0] #4\n      <job1> [C] <job1 job1_trigger1> 2ts 2022-12-04 17:19:29.232 -> 2022-12-04 17:19:31.225\ninfo: 2022-12-04 17:19:31.2422514 +08:00 \u661f\u671f\u65e5 L MyJob[0] #10\n      <job1> [C] <job1 job1_trigger1> 3ts 2022-12-04 17:19:31.225 -> 2022-12-04 17:19:33.207\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u53e6\u5916\uff0c\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668\u8fd8\u652f\u6301\u914d\u7f6e\u6784\u9020\u51fd\u6570\u53c2\u6570")),(0,a.kt)("admonition",{title:"\u53c2\u6570\u7279\u522b\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u5982\u679c\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668\u5305\u542b\u53c2\u6570\uff0c\u90a3\u4e48",(0,a.kt)("strong",{parentName:"p"},"\u5fc5\u987b\u6ee1\u8db3\u4ee5\u4e0b\u4e24\u4e2a\u6761\u4ef6"),"\uff1a"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u53c2\u6570\u5fc5\u987b\u901a\u8fc7\u552f\u4e00\u7684\u6784\u9020\u51fd\u6570\u4f20\u5165\uff0c\u6709\u4e14\u6700\u591a\u53ea\u80fd\u62e5\u6709\u4e00\u4e2a\u6784\u9020\u51fd\u6570")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u53c2\u6570\u7684\u7c7b\u578b\u53ea\u80fd\u662f ",(0,a.kt)("inlineCode",{parentName:"strong"},"int"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"string"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"bool"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"strong"},"null")," \u6216\u7531\u5b83\u4eec\u7ec4\u6210\u7684\u6570\u7ec4\u7c7b\u578b")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,5,8,12}",showLineNumbers:!0,"{1,3,5,8,12}":!0},"public class CustomTrigger : Trigger\n{\n    public CustomTrigger(int seconds) // \u53ef\u652f\u6301\u591a\u4e2a\u53c2\u6570\n    {\n        Seconds = seconds;\n    }\n\n    private int Seconds { get; set; }\n\n    public override DateTime GetNextOccurrence(DateTime startAt)\n    {\n        return startAt.AddSeconds(Seconds);\n    }\n}\n")),(0,a.kt)("p",null,"\u4e4b\u540e\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder.Create")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},"Triggers.Create")," \u521b\u5efa\u5e76\u4f20\u5165\u53c2\u6570\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n      options.AddJob<MyJob>(Triggers.Create<CustomTrigger>(3));\n});\n")),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {12,14,16}",showLineNumbers:!0,"{12,14,16}":!0},"info: 2022-12-04 17:23:09.3029251 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-04 17:23:09.3205593 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-04 17:23:09.7081119 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-04 17:23:09.7506504 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-04 17:23:09.9380816 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-04 17:23:12.6291716 +08:00 \u661f\u671f\u65e5 L MyJob[0] #6\n      <job1> [C] <job1 job1_trigger1> 1ts 2022-12-04 17:23:12.590 -> 2022-12-04 17:23:15.582\ninfo: 2022-12-04 17:23:15.6141563 +08:00 \u661f\u671f\u65e5 L MyJob[0] #9\n      <job1> [C] <job1 job1_trigger1> 2ts 2022-12-04 17:23:15.582 -> 2022-12-04 17:23:18.572\ninfo: 2022-12-04 17:23:18.5857464 +08:00 \u661f\u671f\u65e5 L MyJob[0] #8\n      <job1> [C] <job1 job1_trigger1> 3ts 2022-12-04 17:23:18.572 -> 2022-12-04 17:23:21.551\n")),(0,a.kt)("p",null,"\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668\u9664\u4e86\u53ef\u91cd\u5199 ",(0,a.kt)("inlineCode",{parentName:"p"},"GetNextOccurrence")," \u65b9\u6cd5\u4e4b\u540e\uff0c\u8fd8\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"ShouldRun")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"ToString")," \u65b9\u6cd5\u53ef\u91cd\u5199\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {15,21}",showLineNumbers:!0,"{15,21}":!0},'public class CustomTrigger : Trigger\n{\n    public CustomTrigger(int seconds)\n    {\n        Seconds = seconds;\n    }\n\n    private int Seconds { get; set; }\n\n    public override DateTime GetNextOccurrence(DateTime startAt)\n    {\n        return startAt.AddSeconds(Seconds);\n    }\n\n    public override bool ShouldRun(JobDetail jobDetail, DateTime startAt)\n    {\n        // \u5728\u8fd9\u91cc\u8fdb\u4e00\u6b65\u63a7\u5236\uff0c\u5982\u679c\u8fd4\u56de false\uff0c\u5219\u4f5c\u4e1a\u89e6\u53d1\u5668\u8df3\u8fc7\u6267\u884c\n        return base.ShouldRun(jobDetail, startAt);\n    }\n\n    public override string ToString()\n    {\n        return $"<{TriggerId}> \u81ea\u5b9a\u4e49\u9012\u589e {Seconds}s \u89e6\u53d1\u5668";\n    }\n}\n')),(0,a.kt)("p",null,"\u63a8\u8350\u91cd\u5199 ",(0,a.kt)("inlineCode",{parentName:"p"},"GetNextRunTime")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"ToString")," \u65b9\u6cd5\u5373\u53ef\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {11}",showLineNumbers:!0,"{11}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context}");\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {12,14,16}",showLineNumbers:!0,"{12,14,16}":!0},"info: 2022-12-04 17:26:43.9120082 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-04 17:26:43.9166481 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-04 17:26:44.1786114 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-04 17:26:44.1816154 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-04 17:26:44.2077386 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-04 17:26:47.1904549 +08:00 \u661f\u671f\u65e5 L MyJob[0] #8\n      <job1> [C] <job1_trigger1> \u81ea\u5b9a\u4e49\u9012\u589e 3s \u89e6\u53d1\u5668 2022-12-04 17:26:47.139 -> 2022-12-04 17:26:50.145\ninfo: 2022-12-04 17:26:50.1652618 +08:00 \u661f\u671f\u65e5 L MyJob[0] #6\n      <job1> [C] <job1_trigger1> \u81ea\u5b9a\u4e49\u9012\u589e 3s \u89e6\u53d1\u5668 2022-12-04 17:26:50.145 -> 2022-12-04 17:26:53.129\ninfo: 2022-12-04 17:26:53.1426614 +08:00 \u661f\u671f\u65e5 L MyJob[0] #8\n      <job1> [C] <job1_trigger1> \u81ea\u5b9a\u4e49\u9012\u589e 3s \u89e6\u53d1\u5668 2022-12-04 17:26:53.129 -> 2022-12-04 17:26:56.106\n")),(0,a.kt)("h3",{id:"26156-\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027\u53ca\u81ea\u5b9a\u4e49"},"26.1.5.6 \u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027\u53ca\u81ea\u5b9a\u4e49"),(0,a.kt)("p",null,"\u5982\u679c ",(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u914d\u7f6e\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"IncludeAnnotations")," \u53c2\u6570\u4e14\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"true"),"\uff0c\u90a3\u4e48\u5c06\u4f1a\u81ea\u52a8\u89e3\u6790 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJob")," \u7684\u5b9e\u73b0\u7c7b\u578b\u7684\u6240\u6709\u7ee7\u627f ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerAttribute")," \u7684\u7279\u6027\uff0c\u76ee\u524d\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u5185\u7f6e\u4e86\u4ee5\u4e0b\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Period(5000)]"),"\uff1a\u6beb\u79d2\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[PeriodSeconds(5)]"),"\uff1a\u79d2\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[PeriodMinutes(5)]"),"\uff1a\u5206\u949f\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[PeriodHours(5)]"),"\uff1a\u5c0f\u65f6\u5468\u671f\uff08\u95f4\u9694\uff09\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},'[Cron("* * * * *", CronStringFormat.Default)]'),"\uff1aCron \u8868\u8fbe\u5f0f\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Secondly]"),"\uff1a\u6bcf\u79d2\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Minutely]"),"\uff1a\u6bcf\u5206\u949f\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Hourly]"),"\uff1a\u6bcf\u5c0f\u65f6\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Daily]"),"\uff1a\u6bcf\u5929\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Monthly]"),"\uff1a\u6bcf\u6708 1 \u53f7\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Weekly]"),"\uff1a\u6bcf\u5468\u65e5\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Yearly]"),"\uff1a\u6bcf\u5e74 1 \u6708 1 \u53f7\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[Workday]"),"\uff1a\u6bcf\u5468\u4e00\u81f3\u5468\u4e94\uff08\u5348\u591c\uff09\u5f00\u59cb\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[SecondlyAt]"),"\uff1a\u7279\u5b9a\u79d2\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[MinutelyAt]"),"\uff1a\u6bcf\u5206\u949f\u7279\u5b9a\u79d2\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[HourlyAt]"),"\uff1a\u6bcf\u5c0f\u65f6\u7279\u5b9a\u5206\u949f\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[DailyAt]"),"\uff1a\u6bcf\u5929\u7279\u5b9a\u5c0f\u65f6\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[MonthlyAt]"),"\uff1a\u6bcf\u6708\u7279\u5b9a\u5929\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[WeeklyAt]"),"\uff1a\u6bcf\u5468\u7279\u5b9a\u661f\u671f\u51e0\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"[YearlyAt]"),"\uff1a\u6bcf\u5e74\u7279\u5b9a\u6708 1 \u53f7\uff08\u5348\u591c\uff09\u5f00\u59cb\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027")),(0,a.kt)("p",null,"\u4f7f\u7528\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3,6,10,13}",showLineNumbers:!0,"{3,6,10,13}":!0},"services.AddSchedule(options =>\n{\n    options.AddJob(JobBuilder.Create<MyJob>().SetIncludeAnnotations(true));\n\n    // \u4e5f\u652f\u6301\u81ea\u5b9a\u4e49\u914d\u7f6e + \u7279\u6027\u626b\u63cf\n    options.AddJob(JobBuilder.Create<MyJob>().SetIncludeAnnotations(true)\n                  , Triggers.PeriodSeconds(5));\n\n    // \u6216\u8005\u901a\u8fc7\u7c7b\u578b\u626b\u63cf\n    options.AddJob(typeof(MyJobj).ScanToBuilder());\n\n    // \u8fd8\u53ef\u4ee5\u6279\u91cf\u626b\u63cf TouchSocket 4.8.2.4+\n    options.AddJob(App.EffectiveTypes.ScanToBuilders());\n});\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1-3}",showLineNumbers:!0,"{1-3}":!0},'[Minutely]\n[PeriodSeconds(5)]\n[Cron("*/3 * * * * *", CronStringFormat.WithSeconds)]\npublic class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context}");\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {6,8,10,12,16,18,20,30}",showLineNumbers:!0,"{6,8,10,12,16,18,20,30}":!0},"info: 2022-12-04 17:35:47.0211372 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-04 17:35:47.0267027 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-04 17:35:47.2906591 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-04 17:35:47.2921849 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger2> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-04 17:35:47.2961669 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger3> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-04 17:35:47.2979859 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-04 17:35:47.3194555 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-04 17:35:48.0588231 +08:00 \u661f\u671f\u65e5 L MyJob[0] #8\n      <job1> [C] <job1 job1_trigger3> */3 * * * * * 1ts 2022-12-04 17:35:48.000 -> 2022-12-04 17:35:51.000\ninfo: 2022-12-04 17:35:51.0240459 +08:00 \u661f\u671f\u65e5 L MyJob[0] #9\n      <job1> [C] <job1 job1_trigger3> */3 * * * * * 2ts 2022-12-04 17:35:51.000 -> 2022-12-04 17:35:54.000\ninfo: 2022-12-04 17:35:52.2643935 +08:00 \u661f\u671f\u65e5 L MyJob[0] #12\n      <job1> [C] <job1 job1_trigger2> 5s 1ts 2022-12-04 17:35:52.246 -> 2022-12-04 17:35:57.227\ninfo: 2022-12-04 17:35:54.0175524 +08:00 \u661f\u671f\u65e5 L MyJob[0] #6\n      <job1> [C] <job1 job1_trigger3> */3 * * * * * 3ts 2022-12-04 17:35:54.000 -> 2022-12-04 17:35:57.000\ninfo: 2022-12-04 17:35:57.0270544 +08:00 \u661f\u671f\u65e5 L MyJob[0] #9\n      <job1> [C] <job1 job1_trigger3> */3 * * * * * 4ts 2022-12-04 17:35:57.000 -> 2022-12-04 17:36:00.000\ninfo: 2022-12-04 17:35:57.2433514 +08:00 \u661f\u671f\u65e5 L MyJob[0] #12\n      <job1> [C] <job1 job1_trigger2> 5s 2ts 2022-12-04 17:35:57.227 -> 2022-12-04 17:36:02.208\ninfo: 2022-12-04 17:36:00.0151605 +08:00 \u661f\u671f\u65e5 L MyJob[0] #14\n      <job1> [C] <job1 job1_trigger3> */3 * * * * * 5ts 2022-12-04 17:36:00.000 -> 2022-12-04 17:36:03.000\ninfo: 2022-12-04 17:36:00.0315972 +08:00 \u661f\u671f\u65e5 L MyJob[0] #8\n      <job1> [C] <job1 job1_trigger1> * * * * * 1ts 2022-12-04 17:36:00.000 -> 2022-12-04 17:37:00.000\ninfo: 2022-12-04 17:36:02.2203934 +08:00 \u661f\u671f\u65e5 L MyJob[0] #12\n      <job1> [C] <job1 job1_trigger2> 5s 3ts 2022-12-04 17:36:02.208 -> 2022-12-04 17:36:07.184\n")),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u9664\u4e86\u4f7f\u7528\u5185\u7f6e\u7279\u6027\uff0c\u6211\u4eec\u8fd8\u53ef\u4ee5\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027"),"\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,2,5}",showLineNumbers:!0,"{1,2,5}":!0},"[AttributeUsage(AttributeTargets.Class, AllowMultiple = true)]\npublic class CustomAttribute : TriggerAttribute\n{\n    public CustomAttribute(int seconds)\n        : base(typeof(CustomTrigger), seconds)\n    {\n    }\n}\n")),(0,a.kt)("admonition",{title:"\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u89e6\u53d1\u5668\u5fc5\u5907\u6761\u4ef6",type:"tip"},(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},"\u5fc5\u987b\u7ee7\u627f ",(0,a.kt)("inlineCode",{parentName:"li"},"TriggerAttribute")," \u7279\u6027\u7c7b"),(0,a.kt)("li",{parentName:"ul"},"\u81f3\u5c11\u5305\u542b\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u4e14\u901a\u8fc7\u57fa\u7c7b\u6784\u9020\u51fd\u6570\u914d\u7f6e ",(0,a.kt)("inlineCode",{parentName:"li"},":base(\u5b9e\u9645\u89e6\u53d1\u5668\u7c7b\u578b, \u6784\u9020\u51fd\u6570\u53c2\u6570)")),(0,a.kt)("li",{parentName:"ul"},"\u63a8\u8350\u6dfb\u52a0 ",(0,a.kt)("inlineCode",{parentName:"li"},"[AttributeUsage(AttributeTargets.Class, AllowMultiple = true)]")," \u7279\u6027"))),(0,a.kt)("p",null,"\u4f7f\u7528\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1}",showLineNumbers:!0,"{1}":!0},'[Custom(3)]\npublic class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context}");\n        await Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u6267\u884c\u7ed3\u679c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {12,14,16}",showLineNumbers:!0,"{12,14,16}":!0},"info: 2022-12-04 17:44:12.2702884 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-04 17:44:12.2872399 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-04 17:44:12.5730241 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-04 17:44:12.5751444 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-04 17:44:12.6174459 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-04 17:44:15.5850848 +08:00 \u661f\u671f\u65e5 L MyJob[0] #6\n      <job1> [C] <job1_trigger1> \u81ea\u5b9a\u4e49\u9012\u589e 3s \u89e6\u53d1\u5668 2022-12-04 17:44:15.537 -> 2022-12-04 17:44:18.542\ninfo: 2022-12-04 17:44:18.5693881 +08:00 \u661f\u671f\u65e5 L MyJob[0] #8\n      <job1> [C] <job1_trigger1> \u81ea\u5b9a\u4e49\u9012\u589e 3s \u89e6\u53d1\u5668 2022-12-04 17:44:18.542 -> 2022-12-04 17:44:21.527\ninfo: 2022-12-04 17:44:21.5396428 +08:00 \u661f\u671f\u65e5 L MyJob[0] #6\n      <job1> [C] <job1_trigger1> \u81ea\u5b9a\u4e49\u9012\u589e 3s \u89e6\u53d1\u5668 2022-12-04 17:44:21.527 -> 2022-12-04 17:44:24.504\n")),(0,a.kt)("hr",null),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u4f5c\u4e1a\u89e6\u53d1\u5668\u7279\u6027\u8fd8\u63d0\u4f9b\u4e86\u591a\u4e2a\u5c5e\u6027\u914d\u7f6e"),"\uff0c\u5982\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TriggerId"),"\uff1a\u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"li"},"Id"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Description"),"\uff1a\u63cf\u8ff0\u4fe1\u606f\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"StartTime"),"\uff1a\u8d77\u59cb\u65f6\u95f4\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"EndTime"),"\uff1a\u7ed3\u675f\u65f6\u95f4\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"MaxNumberOfRuns"),"\uff1a\u6700\u5927\u89e6\u53d1\u6b21\u6570\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"long")," \u7c7b\u578b\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"0"),"\uff1a\u4e0d\u9650\u5236\uff1b",(0,a.kt)("inlineCode",{parentName:"li"},"n"),"\uff1aN \u6b21"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"MaxNumberOfErrors"),"\uff1a\u6700\u5927\u51fa\u9519\u6b21\u6570\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"long")," \u7c7b\u578b\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"0"),"\uff1a\u4e0d\u9650\u5236\uff1b",(0,a.kt)("inlineCode",{parentName:"li"},"n"),"\uff1aN \u6b21"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"NumRetries"),"\uff1a\u91cd\u8bd5\u6b21\u6570\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"int")," \u7c7b\u578b\uff0c\u9ed8\u8ba4\u503c ",(0,a.kt)("inlineCode",{parentName:"li"},"0")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"RetryTimeout"),"\uff1a\u91cd\u8bd5\u95f4\u9694\u65f6\u95f4\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"int")," \u7c7b\u578b\uff0c\u9ed8\u8ba4\u503c ",(0,a.kt)("inlineCode",{parentName:"li"},"1000")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"StartNow"),"\uff1a\u662f\u5426\u7acb\u5373\u542f\u52a8\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"bool")," \u7c7b\u578b\uff0c\u9ed8\u8ba4\u503c ",(0,a.kt)("inlineCode",{parentName:"li"},"true")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"RunOnStart"),"\uff1a\u662f\u5426\u542f\u52a8\u65f6\u6267\u884c\u4e00\u6b21\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"bool")," \u7c7b\u578b\uff0c\u9ed8\u8ba4\u503c ",(0,a.kt)("inlineCode",{parentName:"li"},"false")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ResetOnlyOnce"),"\uff1a\u662f\u5426\u5728\u542f\u52a8\u65f6\u91cd\u7f6e\u6700\u5927\u89e6\u53d1\u6b21\u6570\u7b49\u4e8e\u4e00\u6b21\u7684\u4f5c\u4e1a\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"bool")," \u7c7b\u578b\uff0c\u9ed8\u8ba4\u503c ",(0,a.kt)("inlineCode",{parentName:"li"},"true"))),(0,a.kt)("p",null,"\u4f7f\u7528\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1}",showLineNumbers:!0,"{1}":!0},'[PeriodSeconds(5, TriggerId = "trigger1", Description = "\u8fd9\u662f\u4e00\u6bb5\u63cf\u8ff0")]\npublic class MyJob : IJob\n{\n      // ...\n}\n')),(0,a.kt)("h3",{id:"26157-\u8bbe\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668"},"26.1.5.7 \u8bbe\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u63d0\u4f9b\u4e86\u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u5b8c\u5168\u5339\u914d\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Set[\u5c5e\u6027\u540d]")," \u65b9\u6cd5\u6765\u914d\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668\u5404\u4e2a\u5c5e\u6027\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3,27}",showLineNumbers:!0,"{3,27}":!0},' services.AddSchedule(options =>\n {\n     var triggerBuilder = Triggers.Period(5000)\n         .SetTriggerId("trigger1")   // \u4f5c\u4e1a\u89e6\u53d1\u5668 Id\n         .SetTriggerType("TouchSocket", "TouchSocket.Schedule.PeriodTrigger")  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u7c7b\u578b\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n         .SetTriggerType<PeriodTrigger>()    // \u4f5c\u4e1a\u89e6\u53d1\u5668\u7c7b\u578b\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n         .SetTriggerType(typeof(PeriodTrigger))  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u7c7b\u578b\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n         .SetArgs("[5000]")  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570 object[] \u5e8f\u5217\u5316\u5b57\u7b26\u4e32\u7c7b\u578b\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n         .SetArgs(5000)   // \u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570\uff0c\u652f\u6301\u591a\u4e2a\u91cd\u8f7d\n         .SetDescription("\u4f5c\u4e1a\u89e6\u53d1\u5668\u63cf\u8ff0")  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u63cf\u8ff0\n         .SetStatus(TriggerStatus.Ready) // \u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001\n         .SetStartTime(DateTime.Now) // \u4f5c\u4e1a\u89e6\u53d1\u5668\u8d77\u59cb\u65f6\u95f4\n         .SetEndTime(DateTime.Now.AddMonths(1)) // \u4f5c\u4e1a\u89e6\u53d1\u5668\u7ed3\u675f\u65f6\u95f4\n         .SetLastRunTime(DateTime.Now.AddSeconds(-5))    // \u4f5c\u4e1a\u89e6\u53d1\u5668\u6700\u8fd1\u8fd0\u884c\u65f6\u95f4\n         .SetNextRunTime(DateTime.Now.AddSeconds(5)) // \u4f5c\u4e1a\u89e6\u53d1\u5668\u4e0b\u4e00\u6b21\u8fd0\u884c\u65f6\u95f4\n         .SetNumberOfRuns(1) // \u4f5c\u4e1a\u89e6\u53d1\u5668\u89e6\u53d1\u6b21\u6570\n         .SetMaxNumberOfRuns(100)    // \u4f5c\u4e1a\u89e6\u53d1\u5668\u6700\u5927\u89e6\u53d1\u5668\u6b21\u6570\n         .SetNumberOfErrors(1)   // \u4f5c\u4e1a\u89e6\u53d1\u5668\u51fa\u9519\u6b21\u6570\n         .SetMaxNumberOfErrors(100)  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u6700\u5927\u51fa\u9519\u6b21\u6570\n         .SetNumRetries(3)   // \u4f5c\u4e1a\u89e6\u53d1\u5668\u51fa\u9519\u91cd\u8bd5\u6b21\u6570\n         .SetRetryTimeout(1000)  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u91cd\u8bd5\u95f4\u9694\u65f6\u95f4\n         .SetStartNow(true)  // \u4f5c\u4e1a\u89e6\u53d1\u5668\u662f\u5426\u7acb\u5373\u542f\u52a8\n         .SetRunOnStart(false)    // \u4f5c\u4e1a\u89e6\u53d1\u5668\u662f\u5426\u542f\u52a8\u65f6\u6267\u884c\u4e00\u6b21\n         .SetResetOnlyOnce(true)    // \u4f5c\u4e1a\u89e6\u53d1\u5668\u662f\u5426\u5728\u542f\u52a8\u65f6\u91cd\u7f6e\u6700\u5927\u89e6\u53d1\u6b21\u6570\u7b49\u4e8e\u4e00\u6b21\u7684\u4f5c\u4e1a\n         ;\n\n     options.AddJob<MyJob>(triggerBuilder);\n });\n')),(0,a.kt)("h3",{id:"26158-\u4f5c\u4e1a\u89e6\u53d1\u5668\u6301\u4e45\u5316\u65b9\u6cd5"},"26.1.5.8 \u4f5c\u4e1a\u89e6\u53d1\u5668\u6301\u4e45\u5316\u65b9\u6cd5"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668 ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u63d0\u4f9b\u4e86\u4e09\u4e2a\u6807\u8bb0\u4f5c\u4e1a\u6301\u4e45\u5316\u884c\u4e3a\u7684\u65b9\u6cd5\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Appended()"),"\uff1a\u6807\u8bb0\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\u662f\u65b0\u589e\u7684\uff0c\u5c4a\u65f6\u751f\u6210\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u662f ",(0,a.kt)("inlineCode",{parentName:"li"},"INSERT")," \u8bed\u53e5"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Updated()"),"\uff1a\u6807\u8bb0\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\u5df2\u88ab\u66f4\u65b0\uff0c\u5c4a\u65f6\u751f\u6210\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u662f ",(0,a.kt)("inlineCode",{parentName:"li"},"Updated")," \u8bed\u53e5\uff0c\u5982\u679c\u6807\u8bb0\u4e3a\u6b64\u64cd\u4f5c\uff0c\u90a3\u4e48\u5f53\u524d\u4f5c\u4e1a\u8c03\u5ea6\u5668\u521d\u59cb\u5316\u65f6\u5c06\u65b0\u589e\u81f3\u5185\u5b58\u4e2d"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Removed()"),"\uff1a\u6807\u8bb0\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\u5df2\u88ab\u5220\u9664\uff0c\u5c4a\u65f6\u751f\u6210\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u662f ",(0,a.kt)("inlineCode",{parentName:"li"},"Deleted")," \u8bed\u53e5\uff0c\u5982\u679c\u6807\u8bb0\u4e3a\u6b64\u64cd\u4f5c\uff0c\u90a3\u4e48\u5f53\u524d\u4f5c\u4e1a\u8c03\u5ea6\u5668\u521d\u59cb\u5316\u65f6\u5c06\u4e0d\u4f1a\u6dfb\u52a0\u81f3\u4f5c\u4e1a\u8ba1\u5212\u4e2d")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4-6}",showLineNumbers:!0,"{4-6}":!0},' services.AddSchedule(options =>\n{\n      options.AddJob<MyJob>(\n            Triggers.PeriodSeconds(5).SetTriggerId("trigger1").Appended()\n            , Triggers.PeriodSeconds(5).SetTriggerId("trigger2").Updated()\n            , Triggers.PeriodSeconds(5).SetTriggerId("trigger3").Removed());\n});\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u8c03\u5ea6\u5668\u521d\u59cb\u5316\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {6,8,10,16,18}",showLineNumbers:!0,"{6,8,10,16,18}":!0},"info: 2022-12-04 18:29:22.3997873 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-04 18:29:22.4045304 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-04 18:29:22.5473237 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The <trigger3> trigger for scheduler of <job1> successfully removed to the schedule.\ninfo: 2022-12-04 18:29:22.5504289 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The <trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-04 18:29:22.5521396 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The <trigger2> trigger for scheduler of <job1> successfully appended and updated to the schedule.\ninfo: 2022-12-04 18:29:22.5535657 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-04 18:29:22.5896298 +08:00 \u661f\u671f\u65e5 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-04 18:29:27.5981907 +08:00 \u661f\u671f\u65e5 L MyJob[0] #14\n      <job1> [C] <job1 trigger2> 5s 1ts 2022-12-04 18:29:27.507 -> 2022-12-04 18:29:32.500\ninfo: 2022-12-04 18:29:27.6002420 +08:00 \u661f\u671f\u65e5 L MyJob[0] #15\n      <job1> [C] <job1 trigger1> 5s 1ts 2022-12-04 18:29:27.507 -> 2022-12-04 18:29:32.500\ninfo: 2022-12-04 18:29:32.5850223 +08:00 \u661f\u671f\u65e5 L MyJob[0] #12\n      <job1> [C] <job1 trigger2> 5s 2ts 2022-12-04 18:29:32.500 -> 2022-12-04 18:29:37.548\ninfo: 2022-12-04 18:29:32.6034646 +08:00 \u661f\u671f\u65e5 L MyJob[0] #8\n      <job1> [C] <job1 trigger1> 5s 2ts 2022-12-04 18:29:32.500 -> 2022-12-04 18:29:37.548\n")),(0,a.kt)("h3",{id:"26159-\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa"},"26.1.5.9 \u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u90fd\u63d0\u4f9b\u4e86\u591a\u79cd\u5c06\u81ea\u8eab\u8f6c\u6362\u6210\u7279\u5b9a\u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var json = trigger.ConvertToJSON();\n")),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:"showLineNumbers",showLineNumbers:!0},'{\n  "triggerId": "job1_trigger1",\n  "jobId": "job1",\n  "triggerType": "TouchSocket.Schedule.PeriodTrigger",\n  "assemblyName": "TouchSocket",\n  "args": "[5000]",\n  "description": null,\n  "status": 2,\n  "startTime": null,\n  "endTime": null,\n  "lastRunTime": "2022-12-04 17:52:34.768",\n  "nextRunTime": "2022-12-04 17:52:39.769",\n  "numberOfRuns": 1,\n  "maxNumberOfRuns": 0,\n  "numberOfErrors": 0,\n  "maxNumberOfErrors": 0,\n  "numRetries": 0,\n  "retryTimeout": 1000,\n  "startNow": true,\n  "runOnStart": false,\n  "resetOnlyOnce": true,\n  "updatedTime": "2022-12-04 17:52:34.803"\n}\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"SQL")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,6,9,13,16,20}",showLineNumbers:!0,"{2,6,9,13,16,20}":!0},'// \u8f93\u51fa\u65b0\u589e SQL\uff0c\u4f7f\u7528 CamelCase \u5c5e\u6027\u547d\u540d\nvar insertSql = trigger.ConvertToSQL("tbName"\n      , PersistenceBehavior.Appended\n      , NamingConventions.CamelCase);\n// \u66f4\u4fbf\u6377\u62d3\u5c55\nvar insertSql = trigger.ConvertToInsertSQL("tbName", NamingConventions.CamelCase);\n\n// \u8f93\u51fa\u5220\u9664 SQL\uff0c\u4f7f\u7528 Pascal \u5c5e\u6027\u547d\u540d\nvar deleteSql = trigger.ConvertToSQL("tbName"\n      , PersistenceBehavior.Removed\n      , NamingConventions.Pascal);\n// \u66f4\u4fbf\u6377\u62d3\u5c55\nvar deleteSql = trigger.ConvertToDeleteSQL("tbName", NamingConventions.Pascal);\n\n// \u8f93\u51fa\u66f4\u65b0 SQL\uff0c\u4f7f\u7528 UnderScoreCase \u5c5e\u6027\u547d\u540d\nvar updateSql = trigger.ConvertToSQL("tbName"\n      , PersistenceBehavior.Updated\n      , NamingConventions.UnderScoreCase);\n// \u66f4\u4fbf\u6377\u62d3\u5c55\nvar updateSql = trigger.ConvertToUpdateSQL("tbName", NamingConventions.UnderScoreCase);\n')),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql",metastring:"showLineNumbers {2,49,52}",showLineNumbers:!0,"{2,49,52}":!0},"-- \u65b0\u589e\u64cd\u4f5c\nINSERT INTO tbName(\n      triggerId,\n      jobId,\n      triggerType,\n      assemblyName,\n      args,\n      description,\n      status,\n      startTime,\n      endTime,\n      lastRunTime,\n      nextRunTime,\n      numberOfRuns,\n      maxNumberOfRuns,\n      numberOfErrors,\n      maxNumberOfErrors,\n      numRetries,\n      retryTimeout,\n      startNow,\n      runOnStart,\n      resetOnlyOnce,\n      updatedTime\n)\nVALUES(\n      'job1_trigger1',\n      'job1',\n      'TouchSocket.Schedule.PeriodTrigger',\n      'TouchSocket',\n      '[5000]',\n      NULL,\n      2,\n      NULL,\n      NULL,\n      '2022-12-04 17:54:42.693',\n      '2022-12-04 17:54:47.721',\n      1,\n      0,\n      0,\n      0,\n      0,\n      1000,\n      1,\n      0,\n      1,\n      '2022-12-04 17:54:42.754'\n);\n-- \u5220\u9664\u64cd\u4f5c\nDELETE FROM tbName\nWHERE TriggerId = 'job1_trigger1' AND JobId = 'job1';\n-- \u66f4\u65b0\u64cd\u4f5c\nUPDATE tbName\nSET\n      trigger_id = 'job1_trigger1',\n      job_id = 'job1',\n      trigger_type = 'TouchSocket.Schedule.PeriodTrigger',\n      assembly_name = 'TouchSocket',\n      args = '[5000]',\n      description = NULL,\n      status = 2,\n      start_time = NULL,\n      end_time = NULL,\n      last_run_time = '2022-12-04 17:54:42.693',\n      next_run_time = '2022-12-04 17:54:47.721',\n      number_of_runs = 1,\n      max_number_of_runs = 0,\n      number_of_errors = 0,\n      max_number_of_errors = 0,\n      num_retries = 0,\n      retry_timeout = 1000,\n      start_now = 1,\n      run_on_start = 0,\n      reset_only_once = 1,\n      updated_time = '2022-12-04 17:54:42.754'\nWHERE trigger_id = 'job1_trigger1' AND job_id = 'job1';\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Monitor")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var monitor = trigger.ConvertToMonitor();\n")),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers",showLineNumbers:!0},"\u250f\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  Trigger \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n\u2523 TouchSocket.Schedule.PeriodTrigger\n\u2523\n\u2523 triggerId\uff1a                job1_trigger1\n\u2523 jobId\uff1a                    job1\n\u2523 triggerType\uff1a              TouchSocket.Schedule.PeriodTrigger\n\u2523 assemblyName\uff1a             TouchSocket\n\u2523 args\uff1a                     [5000]\n\u2523 description\uff1a\n\u2523 status\uff1a                   Running\n\u2523 startTime\uff1a\n\u2523 endTime\uff1a\n\u2523 lastRunTime\uff1a              2022-12-04 17:56:55.384\n\u2523 nextRunTime\uff1a              2022-12-04 17:57:00.379\n\u2523 numberOfRuns\uff1a             1\n\u2523 maxNumberOfRuns\uff1a          0\n\u2523 numberOfErrors\uff1a           0\n\u2523 maxNumberOfErrors\uff1a        0\n\u2523 numRetries\uff1a               0\n\u2523 retryTimeout\uff1a             1000\n\u2523 startNow\uff1a                 True\n\u2523 runOnStart\uff1a               False\n\u2523 resetOnlyOnce\uff1a            True\n\u2523 updatedTime\uff1a              2022-12-04 17:56:55.413\n\u2517\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501  Trigger \u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\u2501\n")),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u7b80\u8981\u5b57\u7b26\u4e32\u8f93\u51fa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var str = trigger.ToString();\n")),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers",showLineNumbers:!0},"<job1 job1_trigger1> 5s \u8fd9\u662f\u4e00\u6bb5\u63cf\u8ff0 1ts\n")),(0,a.kt)("h3",{id:"261510-\u81ea\u5b9a\u4e49-sql-\u8f93\u51fa\u914d\u7f6e"},"26.1.5.10 \u81ea\u5b9a\u4e49 ",(0,a.kt)("inlineCode",{parentName:"h3"},"SQL")," \u8f93\u51fa\u914d\u7f6e"),(0,a.kt)("admonition",{title:"\u7248\u672c\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u9650 ",(0,a.kt)("inlineCode",{parentName:"p"},"TouchSocket 4.8.2 +")," \u7248\u672c\u4f7f\u7528\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,8,13,18}",showLineNumbers:!0,"{1,3,8,13,18}":!0},"services.AddSchedule(options =>\n{\n    options.Trigger.ConvertToSQL = (tableName, columnNames, trigger, behavior, naming) =>\n    {\n      // \u751f\u6210\u65b0\u589e SQL\n      if (behavior == PersistenceBehavior.Appended)\n      {\n            return trigger.ConvertToInsertSQL(tableName, naming);\n      }\n      // \u751f\u6210\u66f4\u65b0 SQL\n      else if (behavior == PersistenceBehavior.Updated)\n      {\n            return trigger.ConvertToUpdateSQL(tableName, naming);\n      }\n      // \u751f\u6210\u5220\u9664 SQL\n      else if (behavior == PersistenceBehavior.Removed)\n      {\n            return trigger.ConvertToDeleteSQL(tableName, naming);\n      }\n\n      return string.Empty;\n    };\n});\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ConvertToSQL")," \u59d4\u6258\u53c2\u6570\u8bf4\u660e",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"tableName"),"\uff1a\u6570\u636e\u5e93\u8868\u540d\u79f0\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"columnNames"),"\uff1a\u6570\u636e\u5e93\u5217\u540d\uff1a",(0,a.kt)("inlineCode",{parentName:"li"},"string[]")," \u7c7b\u578b\uff0c\u53ea\u80fd\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"li"},"\u7d22\u5f15")," \u83b7\u53d6"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"trigger"),"\uff1a\u4f5c\u4e1a\u4fe1\u606f ",(0,a.kt)("inlineCode",{parentName:"li"},"Trigger")," \u5bf9\u8c61"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"behavior"),"\uff1a\u6301\u4e45\u5316 ",(0,a.kt)("inlineCode",{parentName:"li"},"PersistenceBehavior")," \u7c7b\u578b\uff0c\u7528\u4e8e\u6807\u8bb0\u65b0\u589e\uff0c\u66f4\u65b0\u8fd8\u662f\u5220\u9664\u64cd\u4f5c"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"naming"),"\uff1a\u547d\u540d\u6cd5 ",(0,a.kt)("inlineCode",{parentName:"li"},"NamingConventions")," \u7c7b\u578b\uff0c\u5305\u542b ",(0,a.kt)("inlineCode",{parentName:"li"},"CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09"))))),(0,a.kt)("admonition",{title:"\u6ce8\u610f\u4e8b\u9879",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},"\u5982\u679c\u5728\u8be5\u81ea\u5b9a\u4e49 ",(0,a.kt)("inlineCode",{parentName:"p"},"SQL")," \u8f93\u51fa\u65b9\u6cd5\u4e2d\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"trigger.ConvertToSQL(..)")," \u4f1a\u5bfc\u81f4\u6b7b\u5faa\u73af\u3002")),(0,a.kt)("h3",{id:"261511-\u67e5\u770b\u6700\u8fd1\u8fd0\u884c\u8bb0\u5f55"},"26.1.5.11 \u67e5\u770b\u6700\u8fd1\u8fd0\u884c\u8bb0\u5f55"),(0,a.kt)("admonition",{title:"\u7248\u672c\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u9650 ",(0,a.kt)("inlineCode",{parentName:"p"},"TouchSocket 4.8.4.3 +")," \u7248\u672c\u4f7f\u7528\u3002")),(0,a.kt)("p",null,"\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"TouchSocket 4.8.4.3+")," \u7248\u672c\u65b0\u589e\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"GetTimelines()")," \u65b9\u6cd5\uff0c\u53ef\u83b7\u53d6\u5185\u5b58\u4e2d\u4f5c\u4e1a\u89e6\u53d1\u5668\u6700\u8fd1\u8fd0\u884c\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"10")," \u6761\u8bb0\u5f55\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},'var timelines = trigger.GetTimelines();   // => [{numberOfRuns: 2, lastRunTime: "2023-01-03 14:00:08"}, {numberOfRuns: 1, lastRunTime: "2023-01-03 14:00:03"}, ...]\n')),(0,a.kt)("h2",{id:"2616-\u4f5c\u4e1a\u8ba1\u5212-scheduler-\u53ca\u6784\u5efa\u5668"},"26.1.6 \u4f5c\u4e1a\u8ba1\u5212 ",(0,a.kt)("inlineCode",{parentName:"h2"},"Scheduler")," \u53ca\u6784\u5efa\u5668"),(0,a.kt)("h3",{id:"26161-\u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212"},"26.1.6.1 \u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212"),(0,a.kt)("p",null,"\u6240\u8c13\u7684\u4f5c\u4e1a\u8ba1\u5212\uff08",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler"),"\uff09\u662f\u5c06\u4f5c\u4e1a\u4fe1\u606f(",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail"),"\uff09\uff0c\u4f5c\u4e1a\u89e6\u53d1\u5668\uff08",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger"),"\uff09\u548c\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\uff08",(0,a.kt)("inlineCode",{parentName:"p"},"IJob"),"\uff09\u5173\u8054\u8d77\u6765\uff0c\u5e76\u6dfb\u52a0\u5230\u4f5c\u4e1a\u8c03\u5ea6\u5668\u4e2d\u7b49\u5f85\u8c03\u5ea6\u6267\u884c\u3002"),(0,a.kt)("p",null,"\u4f5c\u4e3a\u8ba1\u5212\uff08",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler"),"\uff09\u7c7b\u578b\u5bf9\u5916\u662f\u4e0d\u516c\u5f00\u7684\uff0c\u4f46\u63d0\u4f9b\u4e86\u5bf9\u5e94\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"IScheduler")," \u63a5\u53e3\u8fdb\u884c\u64cd\u4f5c\u3002"),(0,a.kt)("h3",{id:"26162-\u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668"},"26.1.6.2 \u5173\u4e8e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8ba1\u5212 ",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler")," \u662f\u6846\u67b6\u63d0\u4f9b\u8fd0\u884c\u65f6\u7684",(0,a.kt)("strong",{parentName:"p"},"\u5185\u90e8\u53ea\u8bfb\u7c7b\u578b"),"\uff0c\u90a3\u4e48\u6211\u4eec\u8be5\u5982\u4f55\u521b\u5efa\u6216\u53d8\u66f4 ",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler")," \u5bf9\u8c61\u5462\uff1f"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"SchedulerBuilder")," \u662f\u6846\u67b6\u63d0\u4f9b\u53ef\u7528\u6765\u751f\u6210\u8fd0\u884c\u65f6 ",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler")," \u7684\u7c7b\u578b\uff0c\u8fd9\u6837\u505a\u7684\u597d\u5904\u53ef\u907f\u514d\u5916\u90e8\u76f4\u63a5\u4fee\u6539\u8fd0\u884c\u65f6 ",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler")," \u6570\u636e\uff0c\u8fd8\u80fd\u5b9e\u73b0\u4efb\u4f55\u4fee\u6539\u52a8\u4f5c\u76d1\u542c\uff0c\u4e5f\u80fd\u907f\u514d\u591a\u7ebf\u7a0b\u62a2\u5360\u60c5\u51b5\u3002"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8c03\u5ea6\u6a21\u5757\u63d0\u4f9b\u4e86\u591a\u79cd\u65b9\u5f0f\u7528\u6765\u521b\u5efa ",(0,a.kt)("inlineCode",{parentName:"p"},"SchedulerBuilder")," \u5bf9\u8c61\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Create")," \u9759\u6001\u65b9\u6cd5\u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4,10,16,22}",showLineNumbers:!0,"{1,4,10,16,22}":!0},'// \u901a\u8fc7\u4f5c\u4e1a Id \u521b\u5efa\nvar schedulerBuilder = SchedulerBuilder.Create("job1");\n\n// \u901a\u8fc7\u6cdb\u578b\u65b9\u5f0f\nvar schedulerBuilder = SchedulerBuilder.Create<MyJob>(Triggers.PeriodSeconds(5), Triggers.Minutely());\nvar schedulerBuilder = SchedulerBuilder.Create<MyJob>(true, Triggers.PeriodSeconds(5), Triggers.Minutely());\nvar schedulerBuilder = SchedulerBuilder.Create<MyJob>("job1", Triggers.PeriodSeconds(5), Triggers.Minutely());\nvar schedulerBuilder = SchedulerBuilder.Create<MyJob>("job1", true, Triggers.PeriodSeconds(5), Triggers.Minutely());\n\n// \u901a\u8fc7\u7c7b\u578b\u65b9\u5f0f\nvar schedulerBuilder = SchedulerBuilder.Create(typeof(MyJob), Triggers.PeriodSeconds(5), Triggers.Minutely());\nvar schedulerBuilder = SchedulerBuilder.Create(typeof(MyJob), true, Triggers.PeriodSeconds(5), Triggers.Minutely());\nvar schedulerBuilder = SchedulerBuilder.Create(typeof(MyJob), "job1", Triggers.PeriodSeconds(5), Triggers.Minutely());\nvar schedulerBuilder = SchedulerBuilder.Create(typeof(MyJob), "job1", true, Triggers.PeriodSeconds(5), Triggers.Minutely());\n\n// \u901a\u8fc7\u59d4\u6258\u65b9\u5f0f\nvar schedulerBuilder = SchedulerBuilder.Create((serviceProvider, context, stoppingToken) => {}, Triggers.PeriodSeconds(5), Triggers.Minutely());\nvar schedulerBuilder = SchedulerBuilder.Create((serviceProvider, context, stoppingToken) => {}, true, Triggers.PeriodSeconds(5), Triggers.Minutely());\nvar schedulerBuilder = SchedulerBuilder.Create((serviceProvider, context, stoppingToken) => {}, "job1", Triggers.PeriodSeconds(5), Triggers.Minutely());\nvar schedulerBuilder = SchedulerBuilder.Create((serviceProvider, context, stoppingToken) => {}, "job1", true, Triggers.PeriodSeconds(5), Triggers.Minutely());\n\n// \u901a\u8fc7 JobBuilder \u548c 0 \u6216 N \u4e2a TriggerBuilder \u521b\u5efa\nvar schedulerBuilder = SchedulerBuilder.Create(\n            JobBuilder.Create<MyJob>()\n            , Triggers.PeriodSeconds(5), Triggers.Minutely());\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"IScheduler")," \u63a5\u53e3\u521b\u5efa"))),(0,a.kt)("p",null,"\u8fd9\u79cd\u65b9\u5f0f\u5e38\u7528\u4e8e\u5728\u8fd0\u884c\u65f6\u66f4\u65b0\u4f5c\u4e1a\u4fe1\u606f\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var schedulerBuilder = SchedulerBuilder.From(scheduler);\n\n//\u4e5f\u53ef\u4ee5\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\nvar schedulerBuilder = scheduler.GetBuilder();\n")),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u5b57\u7b26\u4e32\u521b\u5efa"))),(0,a.kt)("p",null,"\u8be5\u65b9\u5f0f\u975e\u5e38\u7075\u6d3b\uff0c\u53ef\u4ece\u914d\u7f6e\u6587\u4ef6\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," \u5b57\u7b26\u4e32\uff0c\u6216\u5176\u4ed6\u80fd\u591f\u8fd4\u56de ",(0,a.kt)("inlineCode",{parentName:"p"},"JSON")," \u5b57\u7b26\u4e32\u7684\u5730\u65b9\u521b\u5efa\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,14}",showLineNumbers:!0,"{1,3,14}":!0},'var schedulerBuilder = SchedulerBuilder.From(@"\n{\n    ""jobDetail"": {\n        ""jobId"": ""job1"",\n        ""groupName"": null,\n        ""jobType"": ""MyJob"",\n        ""assemblyName"": ""ConsoleApp32"",\n        ""description"": null,\n        ""concurrent"": true,\n        ""includeAnnotations"": false,\n        ""properties"": ""{}"",\n        ""updatedTime"": ""2022-12-04 11:51:00.483""\n    },\n    ""triggers"": [{\n        ""triggerId"": ""job1_trigger1"",\n        ""jobId"": ""job1"",\n        ""triggerType"": ""TouchSocket.Schedule.PeriodTrigger"",\n        ""assemblyName"": ""TouchSocket"",\n        ""args"": ""[5000]"",\n        ""description"": null,\n        ""status"": 2,\n        ""startTime"": null,\n        ""endTime"": null,\n        ""lastRunTime"": ""2022-12-04 17:52:34.768"",\n        ""nextRunTime"": ""2022-12-04 17:52:39.769"",\n        ""numberOfRuns"": 1,\n        ""maxNumberOfRuns"": 0,\n        ""numberOfErrors"": 0,\n        ""maxNumberOfErrors"": 0,\n        ""numRetries"": 0,\n        ""retryTimeout"": 1000,\n        ""startNow"": true,\n        ""runOnStart"": false,\n        ""resetOnlyOnce"": true,\n        ""updatedTime"": ""2022-12-04 17:52:34.803""\n    }]\n}\n");\n')),(0,a.kt)("p",null,"\u5982\u679c\u4f7f\u7528\u7684\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},".NET7"),"\uff0c\u53ef\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},'"""')," \u907f\u514d\u8f6c\u4e49\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,14}",showLineNumbers:!0,"{1,3,14}":!0},'var schedulerBuilder = SchedulerBuilder.From("""\n{\n      "jobDetail": {\n            "jobId": "job1",\n            "groupName": null,\n            "jobType": "MyJob",\n            "assemblyName": "ConsoleApp32",\n            "description": null,\n            "concurrent": true,\n            "includeAnnotations": false,\n            "properties": "{}",\n            "updatedTime": "2022-12-04 11:51:00.483"\n      },\n      "triggers": [{\n            "triggerId": "job1_trigger1",\n            "jobId": "job1",\n            "triggerType": "TouchSocket.Schedule.PeriodTrigger",\n            "assemblyName": "TouchSocket",\n            "args": "[5000]",\n            "description": null,\n            "status": 2,\n            "startTime": null,\n            "endTime": null,\n            "lastRunTime": "2022-12-04 17:52:34.768",\n            "nextRunTime": "2022-12-04 17:52:39.769",\n            "numberOfRuns": 1,\n            "maxNumberOfRuns": 0,\n            "numberOfErrors": 0,\n            "maxNumberOfErrors": 0,\n            "numRetries": 0,\n            "retryTimeout": 1000,\n            "startNow": true,\n            "runOnStart": false,\n            "resetOnlyOnce": true,\n            "updatedTime": "2022-12-04 17:52:34.803"\n      }]\n}\n""");\n')),(0,a.kt)("admonition",{title:"\u5173\u4e8e\u5c5e\u6027\u540d\u5339\u914d\u89c4\u5219",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09")," \u547d\u540d\u65b9\u5f0f\u3002"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("strong",{parentName:"p"},"\u4e0d\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"strong"},"UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09"))," \uff0c\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},'"include_annotations": true'))),(0,a.kt)("ol",{start:4},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8fd8\u53ef\u4ee5\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Clone")," \u9759\u6001\u65b9\u6cd5\u4ece\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"strong"},"SchedulerBuilder")," \u521b\u5efa"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var schedulerBuilder = SchedulerBuilder.Clone(fromSchedulerBuilder);\n")),(0,a.kt)("admonition",{title:"\u514b\u9686\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u514b\u9686\u64cd\u4f5c\u5c06\u514b\u9686 ",(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilders"),"\uff0c\u540c\u65f6\u6301\u4e45\u5316\u884c\u4e3a\u4f1a\u88ab\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"Appended"),"\u3002")),(0,a.kt)("h3",{id:"26163-\u8bbe\u7f6e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668"},"26.1.6.3 \u8bbe\u7f6e\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"SchedulerBuilder")," \u63d0\u4f9b\u4e86\u591a\u4e2a\u65b9\u6cd5\u64cd\u4f5c ",(0,a.kt)("inlineCode",{parentName:"p"},"JobBuilder")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder"),"\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},'// \u83b7\u53d6\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668\nvar jobBuilder = schedulerBuilder.GetJobBuilder();\n\n// \u83b7\u53d6\u6240\u6709\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilders = schedulerBuilder.GetTriggerBuilders();\n\n// \u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nvar triggerBuilder = schedulerBuilder.GetTriggerBuilder("job1_trigger1");\nvar triggerBuilder = schedulerBuilder.GetTriggerBuilder("not_found_trigger_id"); // => null\n\n// \u66f4\u65b0\u4f5c\u4e1a\u4fe1\u606f\u6784\u5efa\u5668\nschedulerBuilder.UpdateJobBuilder(jobBuilder);\n// \u5982\u679c\u901a\u8fc7 .GetJobBuilder() \u65b9\u5f0f\u83b7\u53d6\uff0c\u90a3\u4e48\u53ef\u76f4\u63a5\u66f4\u65b0\uff0c\u65e0\u9700\u8c03\u7528 .UpdateJobBuilder(jobBuilder);\nschedulerBuilder.UpdateJobBuilder(newJobBuilder, replace: true);\n\n// \u6dfb\u52a0\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nschedulerBuilder.AddTriggerBuilder(triggerBuilder1, triggerBuilder2, ...);\n\n// \u66f4\u65b0\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\nschedulerBuilder.UpdateTriggerBuilder(triggerBuilder1, triggerBuilder2, ...);\n// \u8fd8\u53ef\u4ee5\u9009\u62e9\u8986\u76d6\u66f4\u65b0\u8fd8\u662f\u4e0d\u8986\u76d6\nschedulerBuilder.UpdateTriggerBuilder(new[] { triggerBuilder1, triggerBuilder2, ... }, replace: true);\n\n// \u5220\u9664\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\uff0c\u6ce8\u610f\u4e0d\u662f\u771f\u7684\u5220\u9664\uff0c\u800c\u662f\u6807\u8bb0\u4e3a Removed \u5220\u9664\u72b6\u6001\nschedulerBuilder.RemoveTriggerBuilder("trigger1", "trigger2", ...);\n\n// \u6e05\u9664\u6240\u6709\u4f5c\u4e1a\u89e6\u53d1\u5668\u6784\u5efa\u5668\uff0c\u6ce8\u610f\u4e0d\u662f\u771f\u7684\u5220\u9664\uff0c\u800c\u662f\u6807\u8bb0\u4e3a Removed \u5220\u9664\u72b6\u6001\nschedulerBuilder.ClearTriggerBuilders();\n\n// \u8f93\u51fa\u4e3a JSON \u683c\u5f0f\nvar json = schedulerBuilder.ConvertToJSON();\nvar json = schedulerBuilder.ConvertToJSON(NamingConventions.CamelCase);\n\n// \u5c06\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u8f6c\u6362\u6210\u53ef\u679a\u4e3e\u7684 Dictionary<JobBuilder, TriggerBuilder>\nforeach(var (jobBuilder, triggerBuilder) in schedulerBuilder.GetEnumerable())\n{\n      // ....\n}\n')),(0,a.kt)("h3",{id:"26164-\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u6301\u4e45\u5316\u65b9\u6cd5"},"26.1.6.4 \u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u6301\u4e45\u5316\u65b9\u6cd5"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668 ",(0,a.kt)("inlineCode",{parentName:"p"},"SchedulerBuilder")," \u63d0\u4f9b\u4e86\u4e09\u4e2a\u6807\u8bb0\u4f5c\u4e1a\u6301\u4e45\u5316\u884c\u4e3a\u7684\u65b9\u6cd5\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Appended()"),"\uff1a\u6807\u8bb0\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u662f\u65b0\u589e\u7684\uff0c\u5c4a\u65f6\u751f\u6210\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u662f ",(0,a.kt)("inlineCode",{parentName:"li"},"INSERT")," \u8bed\u53e5"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Updated()"),"\uff1a\u6807\u8bb0\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u5df2\u88ab\u66f4\u65b0\uff0c\u5c4a\u65f6\u751f\u6210\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u662f ",(0,a.kt)("inlineCode",{parentName:"li"},"Updated")," \u8bed\u53e5\uff0c\u5982\u679c\u6807\u8bb0\u4e3a\u6b64\u64cd\u4f5c\uff0c\u90a3\u4e48\u5f53\u524d\u4f5c\u4e1a\u8c03\u5ea6\u5668\u521d\u59cb\u5316\u65f6\u5c06\u65b0\u589e\u81f3\u5185\u5b58\u4e2d"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Removed()"),"\uff1a\u6807\u8bb0\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u5df2\u88ab\u5220\u9664\uff0c\u5c4a\u65f6\u751f\u6210\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u662f ",(0,a.kt)("inlineCode",{parentName:"li"},"Deleted")," \u8bed\u53e5\uff0c\u5982\u679c\u6807\u8bb0\u4e3a\u6b64\u64cd\u4f5c\uff0c\u90a3\u4e48\u5f53\u524d\u4f5c\u4e1a\u8c03\u5ea6\u5668\u521d\u59cb\u5316\u65f6\u5c06\u4e0d\u4f1a\u6dfb\u52a0\u81f3\u8c03\u5ea6\u5668\u4e2d")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3-5}",showLineNumbers:!0,"{3-5}":!0},'services.AddSchedule(options =>\n{\n    options.AddJob(SchedulerBuilder.Create<MyJob>("job1").Appended()\n        , SchedulerBuilder.Create<MyJob>("job2").Updated()\n        , SchedulerBuilder.Create<MyJob>("job3").Removed());\n});\n')),(0,a.kt)("p",null,"\u67e5\u770b\u4f5c\u4e1a\u8c03\u5ea6\u5668\u521d\u59cb\u5316\u65e5\u5fd7\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {6,8,10,12}",showLineNumbers:!0,"{6,8,10,12}":!0},"info: 2022-12-05 12:14:42.8481157 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-05 12:14:42.8597028 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-05 12:14:42.9360896 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-05 12:14:42.9471072 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job2> successfully appended and updated to the schedule.\ninfo: 2022-12-05 12:14:42.9562673 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job3> successfully removed to the schedule.\nwarn: 2022-12-05 12:14:42.9748930 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <2> schedulers are appended.\n")),(0,a.kt)("h3",{id:"26165-\u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa"},"26.1.6.5 \u591a\u79cd\u683c\u5f0f\u5b57\u7b26\u4e32\u8f93\u51fa"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler/IScheduler")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"SchedulerBuilder")," \u90fd\u63d0\u4f9b\u4e86\u591a\u79cd\u5c06\u81ea\u8eab\u8f6c\u6362\u6210\u7279\u5b9a\u683c\u5f0f\u7684\u5b57\u7b26\u4e32\u3002"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JSON")," \u5b57\u7b26\u4e32"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var json = schedulerBuilder.ConvertToJSON();\n")),(0,a.kt)("p",null,"\u5b57\u7b26\u4e32\u6253\u5370\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-json",metastring:"showLineNumbers {2,13}",showLineNumbers:!0,"{2,13}":!0},'{\n  "jobDetail": {\n    "jobId": "job1",\n    "groupName": null,\n    "jobType": "MyJob",\n    "assemblyName": "ConsoleApp32",\n    "description": null,\n    "concurrent": true,\n    "includeAnnotations": false,\n    "properties": "{}",\n    "updatedTime": "2022-12-04 11:51:00.483"\n  },\n  "triggers": [\n    {\n      "triggerId": "job1_trigger1",\n      "jobId": "job1",\n      "triggerType": "TouchSocket.Schedule.PeriodTrigger",\n      "assemblyName": "TouchSocket",\n      "args": "[5000]",\n      "description": null,\n      "status": 2,\n      "startTime": null,\n      "endTime": null,\n      "lastRunTime": "2022-12-04 17:52:34.768",\n      "nextRunTime": "2022-12-04 17:52:39.769",\n      "numberOfRuns": 1,\n      "maxNumberOfRuns": 0,\n      "numberOfErrors": 0,\n      "maxNumberOfErrors": 0,\n      "numRetries": 0,\n      "retryTimeout": 1000,\n      "startNow": true,\n      "runOnStart": false,\n      "resetOnlyOnce": true,\n      "updatedTime": "2022-12-04 17:52:34.803"\n    }\n  ]\n}\n')),(0,a.kt)("h2",{id:"2617-\u4f5c\u4e1a\u8c03\u5ea6\u5668-scheduleoptionsbuilder-\u914d\u7f6e\u9009\u9879"},"26.1.7 \u4f5c\u4e1a\u8c03\u5ea6\u5668 ",(0,a.kt)("inlineCode",{parentName:"h2"},"ScheduleOptionsBuilder")," \u914d\u7f6e\u9009\u9879"),(0,a.kt)("h3",{id:"26171-\u5173\u4e8e-scheduleoptionsbuilder"},"26.1.7.1 \u5173\u4e8e ",(0,a.kt)("inlineCode",{parentName:"h3"},"ScheduleOptionsBuilder")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ScheduleOptionsBuilder")," \u914d\u7f6e\u9009\u9879\u4e3b\u8981\u662f\u7528\u6765\u521d\u59cb\u5316\u4f5c\u4e1a\u8c03\u5ea6\u5668\u53ca\u76f8\u5173\u670d\u52a1\u914d\u7f6e\u7684\u3002\u53ea\u4f5c\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"services.AddSchedule")," \u670d\u52a1\u6ce8\u518c\u7684\u914d\u7f6e\u53c2\u6570\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,8-9}",showLineNumbers:!0,"{2,8-9}":!0},"// \u901a\u8fc7\u59d4\u6258\u7684\u65b9\u5f0f\u914d\u7f6e\nservices.AddSchedule(options =>\n{\n      // options \u7c7b\u578b\u4e3a ScheduleOptionsBuilder\n});\n\n// \u81ea\u884c\u521b\u5efa\u5bf9\u8c61\u5b9e\u4f8b\u65b9\u5f0f\u914d\u7f6e\nvar scheduleOptionsBuilder = new ScheduleOptionsBuilder();\nservices.AddSchedule(scheduleOptionsBuilder);\n")),(0,a.kt)("h3",{id:"26172-scheduleoptionsbuilder-\u5185\u7f6e\u5c5e\u6027\u548c\u65b9\u6cd5"},"26.1.7.2 ",(0,a.kt)("inlineCode",{parentName:"h3"},"ScheduleOptionsBuilder")," \u5185\u7f6e\u5c5e\u6027\u548c\u65b9\u6cd5"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5185\u7f6e\u5c5e\u6027\u914d\u7f6e"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4,7,10,13,16,21,24,29}",showLineNumbers:!0,"{4,7,10,13,16,21,24,29}":!0},'services.AddSchedule(options =>\n{\n      // \u662f\u5426\u4f7f\u7528 UTC \u65f6\u95f4\uff0c\u8be5\u914d\u7f6e\u4e3b\u8981\u7528\u6765\u4f5c\u4e3a\u4f5c\u4e1a\u8c03\u5ea6\u5668\u68c0\u67e5\u65f6\u95f4\u683c\u5f0f\u7684\u4f9d\u636e\n      options.UseUtcTimestamp = false;\n\n      // \u662f\u5426\u8f93\u51fa\u4f5c\u4e1a\u8c03\u5ea6\u5668\u65e5\u5fd7\n      options.LogEnabled = true;\n\n      // \u914d\u7f6e\u96c6\u7fa4 Id\uff0c\u9ed8\u8ba4\u503c\u4e3a\u542f\u52a8\u7a0b\u5e8f\u96c6\u7684\u540d\u79f0\n      options.ClusterId = "cluster1";\n\n      // \u914d\u7f6e\u8f93\u51fa SQL \u7684\u6570\u636e\u5e93\u7c7b\u578b\uff0cTouchSocket 4.8.2.3+\n      options.BuildSqlType = SqlTypes.SqlServer;\n\n      // \u914d\u7f6e\u4f5c\u4e1a\u4fe1\u606f JobDetail \u76f8\u5173\u914d\u7f6e\uff0c\u5982\u914d\u7f6e\u81ea\u5b9a\u4e49 SQL \u8f93\u51fa\n      options.JobDetail.ConvertToSQL((tableName, columnNames, jobDetail, behavior, naming) =>\n      {\n      });\n\n      // \u542f\u7528\u4f5c\u4e1a\u6267\u884c\u65e5\u5fd7\u8f93\u51fa\uff0cTouchSocket 4.8.3.7+ \u7248\u672c\u652f\u6301\n      options.JobDetail.LogEnabled = true;      // \u9ed8\u8ba4 false\n\n      // \u914d\u7f6e\u4f5c\u4e1a\u89e6\u53d1\u5668 Trigger \u76f8\u5173\u914d\u7f6e\uff0c\u5982\u914d\u7f6e\u81ea\u5b9a\u4e49 SQL \u8f93\u51fa\n      options.Trigger.ConvertToSQL((tableName, columnNames, trigger, behavior, naming) =>\n      {\n      });\n\n      // \u5b9a\u4e49\u672a\u6355\u83b7\u7684\u5f02\u5e38\uff0c\u901a\u5e38\u662f Task \u5f02\u5e38\n      options.UnobservedTaskExceptionHandler = (obj, args) =>\n      {\n      };\n});\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5185\u7f6e\u65b9\u6cd5\u914d\u7f6e"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4-18,21,24,27,30}",showLineNumbers:!0,"{4-18,21,24,27,30}":!0},'services.AddSchedule(options =>\n{\n      // \u6dfb\u52a0\u4f5c\u4e1a\n      options.AddJob(schedulerBuilder);\n      options.AddJob(schedulerBuilder, schedulerBuilder1, ...); // TouchSocket 4.8.2.4+\n      options.AddJob(jobBuilder, triggerBuilder, ...);\n      options.AddJob<MyJob>(triggerBuilder, ...);\n      options.AddJob<MyJob>("\u4f5c\u4e1a Id", triggerBuilder, ...);\n      options.AddJob<MyJob>("\u4f5c\u4e1a Id", concurrent: true, triggerBuilder, ...);\n      options.AddJob<MyJob>(concurrent: true, triggerBuilder, ...);\n      options.AddJob(typeof(MyJob), triggerBuilder, ...);\n      options.AddJob(typeof(MyJob), "\u4f5c\u4e1a Id", triggerBuilder, ...);\n      options.AddJob(typeof(MyJob), "\u4f5c\u4e1a Id", concurrent: true, triggerBuilder, ...);\n      options.AddJob(typeof(MyJob), concurrent: true, triggerBuilder, ...);\n      options.AddJob((serviceProvider, context, stoppingToken) => {}, triggerBuilder, ...);\n      options.AddJob((serviceProvider, context, stoppingToken) => {}, "\u4f5c\u4e1a Id", triggerBuilder, ...);\n      options.AddJob((serviceProvider, context, stoppingToken) => {}, "\u4f5c\u4e1a Id", concurrent: true, triggerBuilder, ...);\n      options.AddJob((serviceProvider, context, stoppingToken) => {}, concurrent: true, triggerBuilder, ...);\n\n      // \u6dfb\u52a0\u4f5c\u4e1a\u6267\u884c\u76d1\u89c6\u5668\n      options.AddMonitor<YourJobMonitor>();\n\n      // \u6dfb\u52a0\u4f5c\u4e1a\u6267\u884c\u5668\n      options.AddExecutor<YourJobMonitor>();\n\n      // \u6dfb\u52a0\u4f5c\u4e1a\u6301\u4e45\u5316\u5668\n      options.AddPersistence<YourJobPersistence>();\n\n      // \u6ce8\u518c\u4f5c\u4e1a\u96c6\u7fa4\u670d\u52a1\n      options.AddClusterServer<YourClusterServer>();\n});\n')),(0,a.kt)("h2",{id:"2618-\u4f5c\u4e1a\u76d1\u89c6\u5668-ijobmonitor"},"26.1.8 \u4f5c\u4e1a\u76d1\u89c6\u5668 ",(0,a.kt)("inlineCode",{parentName:"h2"},"IJobMonitor")),(0,a.kt)("p",null,"\u8c03\u5ea6\u4f5c\u4e1a\u670d\u52a1\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJobMonitor")," \u76d1\u89c6\u5668\u63a5\u53e3\uff0c\u5b9e\u73b0\u8be5\u63a5\u53e3\u53ef\u4ee5\u76d1\u89c6\u6240\u6709\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u6267\u884c\u4e8b\u4ef6\uff0c\u5305\u62ec ",(0,a.kt)("inlineCode",{parentName:"p"},"\u6267\u884c\u4e4b\u524d\u3001\u6267\u884c\u4e4b\u540e\uff0c\u6267\u884c\u5f02\u5e38"),"\u3002"),(0,a.kt)("p",null,"\u901a\u8fc7\u4f5c\u4e1a\u76d1\u89c6\u5668\u53ef\u4ee5\u5b9e\u73b0\u4f5c\u4e1a\u5b8c\u6574\u751f\u547d\u5468\u671f\u63a7\u5236\uff0c\u8fd8\u80fd\u5b9e\u73b0\u4f5c\u4e1a\u6267\u884c\u5f02\u5e38\u53d1\u9001\u77ed\u4fe1\u6216\u90ae\u4ef6\u901a\u77e5\u7ba1\u7406\u5458\u6216\u9879\u76ee\u7ef4\u62a4\u8005\u3002"),(0,a.kt)("p",null,"\u5982\u6dfb\u52a0 ",(0,a.kt)("inlineCode",{parentName:"p"},"YourJobMonitor"),"\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers  {1,9,15}",showLineNumbers:!0,"":!0,"{1,9,15}":!0},'public class YourJobMonitor : IJobMonitor\n{\n    private readonly ILogger<YourJobMonitor> _logger;\n    public YourJobMonitor(ILogger<YourJobMonitor> logger)\n    {\n        _logger = logger;\n    }\n\n    public Task OnExecutingAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation("\u6267\u884c\u4e4b\u524d\uff1a{context}", context);\n        return Task.CompletedTask;\n    }\n\n    public Task OnExecutedAsync(JobExecutedContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation("\u6267\u884c\u4e4b\u540e\uff1a{context}", context);\n\n        if (context.Exception != null)\n        {\n            _logger.LogError(context.Exception, "\u6267\u884c\u51fa\u9519\u5566\uff1a{context}", context);\n        }\n\n        return Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u6700\u540e\uff0c\u5728\u6ce8\u518c ",(0,a.kt)("inlineCode",{parentName:"p"},"Schedule")," \u670d\u52a1\u4e2d\u6ce8\u518c ",(0,a.kt)("inlineCode",{parentName:"p"},"YourJobMonitor"),"\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers  {4}",showLineNumbers:!0,"":!0,"{4}":!0},"services.AddSchedule(options =>\n{\n    // \u6dfb\u52a0\u4f5c\u4e1a\u6267\u884c\u76d1\u89c6\u5668\n    options.AddMonitor<YourJobMonitor>();\n});\n")),(0,a.kt)("p",null,"\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {12,16,26,28}",showLineNumbers:!0,"{12,16,26,28}":!0},"info: 2022-12-05 14:09:47.2337395 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-05 14:09:47.2401561 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-05 14:09:47.2780446 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-05 14:09:47.2810119 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-05 14:09:47.2941716 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-05 14:09:52.3190129 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobMonitor[0] #4\n      \u6267\u884c\u4e4b\u524d\uff1a<job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:09:52.241 -> 2022-12-05 14:09:57.260\ninfo: 2022-12-05 14:09:52.3240208 +08:00 \u661f\u671f\u4e00 L MyJob[0] #4\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:09:52.241 -> 2022-12-05 14:09:57.260\nfail: 2022-12-05 14:09:52.5253398 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #4\n      Error occurred executing <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:09:52.241 -> 2022-12-05 14:09:57.260.\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n      System.Exception: \u6a21\u62df\u51fa\u9519\n         at MyJob.ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken) in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\Program.cs:line 28\n         at TouchSocket.Schedule.ScheduleHostedService.<>c__DisplayClass23_3.<<BackgroundProcessing>b__3>d.MoveNext() in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\Schedule\\HostedServices\\ScheduleHostedService.cs:line 220\n      --- End of stack trace from previous location ---\n         at TouchSocket.FriendlyException.Retry.InvokeAsync(Func`1 action, Int32 numRetries, Int32 retryTimeout, Boolean finalThrow, Type[] exceptionTypes, Func`2 fallbackPolicy, Action`2 retryAction) in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\FriendlyException\\Retry.cs:line 87\n         at TouchSocket.Schedule.ScheduleHostedService.<>c__DisplayClass23_2.<<BackgroundProcessing>b__2>d.MoveNext() in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\Schedule\\HostedServices\\ScheduleHostedService.cs:line 218\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\ninfo: 2022-12-05 14:09:52.5288429 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobMonitor[0] #4\n      \u6267\u884c\u4e4b\u540e\uff1a<job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:09:52.241 -> 2022-12-05 14:09:57.260\nfail: 2022-12-05 14:09:52.5318526 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobMonitor[0] #4\n      \u6267\u884c\u51fa\u9519\u5566\uff1a<job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:09:52.241 -> 2022-12-05 14:09:57.260\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n      System.InvalidOperationException: Error occurred executing <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:09:52.241 -> 2022-12-05 14:09:57.260.\n       ---\x3e System.Exception: \u6a21\u62df\u51fa\u9519\n         at MyJob.ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken) in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\Program.cs:line 28\n         at TouchSocket.Schedule.ScheduleHostedService.<>c__DisplayClass23_3.<<BackgroundProcessing>b__3>d.MoveNext() in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\Schedule\\HostedServices\\ScheduleHostedService.cs:line 220\n      --- End of stack trace from previous location ---\n         at TouchSocket.FriendlyException.Retry.InvokeAsync(Func`1 action, Int32 numRetries, Int32 retryTimeout, Boolean finalThrow, Type[] exceptionTypes, Func`2 fallbackPolicy, Action`2 retryAction) in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\FriendlyException\\Retry.cs:line 87\n         at TouchSocket.Schedule.ScheduleHostedService.<>c__DisplayClass23_2.<<BackgroundProcessing>b__2>d.MoveNext() in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\Schedule\\HostedServices\\ScheduleHostedService.cs:line 218\n         --- End of inner exception stack trace ---\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u8fd8\u53ef\u4ee5\u8bbe\u7f6e\u6267\u884c\u5931\u8d25\u91cd\u8bd5\uff0c\u5982\uff1a")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n      options.AddJob<MyJob>(Triggers.PeriodSeconds(5).SetNumRetries(3));      // \u91cd\u8bd5 3 \u6b21\n      options.AddMonitor<YourJobMonitor>();\n});\n")),(0,a.kt)("p",null,"\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {12,16,20,24,28,39,41}",showLineNumbers:!0,"{12,16,20,24,28,39,41}":!0},"info: 2022-12-05 14:25:15.9316915 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-05 14:25:15.9391765 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-05 14:25:15.9737767 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-05 14:25:15.9754882 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-05 14:25:15.9892059 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-05 14:25:21.0056685 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobMonitor[0] #4\n      \u6267\u884c\u4e4b\u524d\uff1a<job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:25:20.937 -> 2022-12-05 14:25:25.949\ninfo: 2022-12-05 14:25:21.0140485 +08:00 \u661f\u671f\u4e00 L MyJob[0] #4\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:25:20.937 -> 2022-12-05 14:25:25.949\nwarn: 2022-12-05 14:25:21.0754973 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #4\n      Retrying 1/3 times for <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:25:20.937 -> 2022-12-05 14:25:25.949\ninfo: 2022-12-05 14:25:22.0935914 +08:00 \u661f\u671f\u4e00 L MyJob[0] #4\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:25:20.937 -> 2022-12-05 14:25:25.949\nwarn: 2022-12-05 14:25:22.1574937 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #4\n      Retrying 2/3 times for <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:25:20.937 -> 2022-12-05 14:25:25.949\ninfo: 2022-12-05 14:25:23.1666732 +08:00 \u661f\u671f\u4e00 L MyJob[0] #4\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:25:20.937 -> 2022-12-05 14:25:25.949\nwarn: 2022-12-05 14:25:23.2213212 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #4\n      Retrying 3/3 times for <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:25:20.937 -> 2022-12-05 14:25:25.949\ninfo: 2022-12-05 14:25:24.2337356 +08:00 \u661f\u671f\u4e00 L MyJob[0] #4\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:25:20.937 -> 2022-12-05 14:25:25.949\nfail: 2022-12-05 14:25:24.3832385 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #4\n      Error occurred executing <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:25:20.937 -> 2022-12-05 14:25:25.949.\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n      System.Exception: \u6a21\u62df\u51fa\u9519\n         at MyJob.ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken) in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\Program.cs:line 28\n         at TouchSocket.Schedule.ScheduleHostedService.<>c__DisplayClass23_3.<<BackgroundProcessing>b__3>d.MoveNext() in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\Schedule\\HostedServices\\ScheduleHostedService.cs:line 220\n      --- End of stack trace from previous location ---\n         at TouchSocket.FriendlyException.Retry.InvokeAsync(Func`1 action, Int32 numRetries, Int32 retryTimeout, Boolean finalThrow, Type[] exceptionTypes, Func`2 fallbackPolicy, Action`2 retryAction) in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\FriendlyException\\Retry.cs:line 99\n         at TouchSocket.FriendlyException.Retry.InvokeAsync(Func`1 action, Int32 numRetries, Int32 retryTimeout, Boolean finalThrow, Type[] exceptionTypes, Func`2 fallbackPolicy, Action`2 retryAction) in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\FriendlyException\\Retry.cs:line 110\n         at TouchSocket.Schedule.ScheduleHostedService.<>c__DisplayClass23_2.<<BackgroundProcessing>b__2>d.MoveNext() in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\Schedule\\HostedServices\\ScheduleHostedService.cs:line 218\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\ninfo: 2022-12-05 14:25:24.3857991 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobMonitor[0] #4\n      \u6267\u884c\u4e4b\u540e\uff1a<job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:25:20.937 -> 2022-12-05 14:25:25.949\nfail: 2022-12-05 14:25:24.3888126 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobMonitor[0] #4\n      \u6267\u884c\u51fa\u9519\u5566\uff1a<job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:25:20.937 -> 2022-12-05 14:25:25.949\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n      System.InvalidOperationException: Error occurred executing <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:25:20.937 -> 2022-12-05 14:25:25.949.\n       ---\x3e System.Exception: \u6a21\u62df\u51fa\u9519\n         at MyJob.ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken) in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\Program.cs:line 28\n         at TouchSocket.Schedule.ScheduleHostedService.<>c__DisplayClass23_3.<<BackgroundProcessing>b__3>d.MoveNext() in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\Schedule\\HostedServices\\ScheduleHostedService.cs:line 220\n      --- End of stack trace from previous location ---\n         at TouchSocket.FriendlyException.Retry.InvokeAsync(Func`1 action, Int32 numRetries, Int32 retryTimeout, Boolean finalThrow, Type[] exceptionTypes, Func`2 fallbackPolicy, Action`2 retryAction) in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\FriendlyException\\Retry.cs:line 99\n         at TouchSocket.FriendlyException.Retry.InvokeAsync(Func`1 action, Int32 numRetries, Int32 retryTimeout, Boolean finalThrow, Type[] exceptionTypes, Func`2 fallbackPolicy, Action`2 retryAction) in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\FriendlyException\\Retry.cs:line 110\n         at TouchSocket.Schedule.ScheduleHostedService.<>c__DisplayClass23_2.<<BackgroundProcessing>b__2>d.MoveNext() in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\Schedule\\HostedServices\\ScheduleHostedService.cs:line 218\n         --- End of inner exception stack trace ---\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n")),(0,a.kt)("h3",{id:"26181-\u5173\u4e8e\u53c2\u6570-jobexecutioncontext"},"26.1.8.1 \u5173\u4e8e\u53c2\u6570 ",(0,a.kt)("inlineCode",{parentName:"h3"},"JobExecutionContext")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"IJobMonitor")," \u63d0\u4f9b\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"OnExecutingAsync")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"OnExecutedAsync")," \u63a5\u53e3\u65b9\u6cd5\u90fd\u5305\u542b\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"p"},"context")," \u53c2\u6570\uff0c\u524d\u8005\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"JobExecutingContext"),"\uff0c\u540e\u8005\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"JobExecutedContext"),"\uff0c\u5b83\u4eec\u90fd\u6709\u4e00\u4e2a\u5171\u540c\u7684\u57fa\u7c7b ",(0,a.kt)("inlineCode",{parentName:"p"},"JobExecutionContext"),"\u3002"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"JobExecutionContext")," \u63d0\u4f9b\u4e86\u4ee5\u4e0b\u516c\u5171\u5c5e\u6027\u548c\u516c\u5171\u65b9\u6cd5:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"JobExecutionContext")," \u5c5e\u6027\u5217\u8868"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JobId"),"\uff1a\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"li"},"Id")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TriggerId"),"\uff1a\u5f53\u524d\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"li"},"Id")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JobDetail"),"\uff1a\u4f5c\u4e1a\u4fe1\u606f"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Trigger"),"\uff1a\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"OccurrenceTime"),"\uff1a",(0,a.kt)("strong",{parentName:"li"},"\u4f5c\u4e1a\u8ba1\u5212\u89e6\u53d1\u65f6\u95f4\uff0c\u6700\u51c6\u786e\u7684\u8bb0\u5f55\u65f6\u95f4")))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"JobExecutionContext")," \u65b9\u6cd5\u5217\u8868"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},".ConvertToJSON(naming)"),"\uff1a\u5c06\u4f5c\u4e1a\u8ba1\u5212\u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"JSON")," \u5b57\u7b26\u4e32"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},".ToString()"),"\uff1a\u5c06\u4f5c\u4e1a\u6267\u884c\u4fe1\u606f\u8f93\u51fa\u4e3a\u7b80\u8981\u5b57\u7b26\u4e32")))),(0,a.kt)("p",null),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"JobExecutingContext"))," \u5728\u57fa\u7c7b\u57fa\u7840\u4e0a\u62d3\u5c55\u4e86 ",(0,a.kt)("inlineCode",{parentName:"li"},"ExecutingTime")," \u5c5e\u6027\uff1a",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ExecutingTime"),"\uff1a\u6267\u884c\u524d\u65f6\u95f4"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"JobExecutedContext"))," \u5219\u5728\u57fa\u7c7b\u57fa\u7840\u4e0a\u62d3\u5c55\u4e86 ",(0,a.kt)("inlineCode",{parentName:"li"},"ExecutedTime")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"Exception")," \u5c5e\u6027\uff1a",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ExecutedTime"),"\uff1a\u6267\u884c\u540e\u65f6\u95f4"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Exception"),"\uff1a\u6267\u884c\u5f02\u5e38")))),(0,a.kt)("h2",{id:"2619-\u4f5c\u4e1a\u6267\u884c\u5668-ijobexecutor"},"26.1.9 \u4f5c\u4e1a\u6267\u884c\u5668 ",(0,a.kt)("inlineCode",{parentName:"h2"},"IJobExecutor")),(0,a.kt)("p",null,"\u8c03\u5ea6\u4f5c\u4e1a\u670d\u52a1\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJobExecutor")," \u6267\u884c\u5668\u63a5\u53e3\uff0c\u53ef\u4ee5\u8ba9\u5f00\u53d1\u8005\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u5904\u7406\u51fd\u6570\u6267\u884c\u7b56\u7565\uff0c\u5982 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u8d85\u65f6\u63a7\u5236\uff0c\u5931\u8d25\u91cd\u8bd5\u7b49\u7b49"),"\u3002"),(0,a.kt)("h3",{id:"26191-\u5b9e\u73b0\u91cd\u8bd5\u7b56\u7565"},"26.1.9.1 \u5b9e\u73b0\u91cd\u8bd5\u7b56\u7565"),(0,a.kt)("p",null,"\u5982\u6dfb\u52a0 ",(0,a.kt)("inlineCode",{parentName:"p"},"YourJobExecutor"),"\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,12,14,17-20}",showLineNumbers:!0,"{1,12,14,17-20}":!0},'public class YourJobExecutor : IJobExecutor\n{\n    private readonly ILogger<YourJobExecutor> _logger;\n    public YourJobExecutor(ILogger<YourJobExecutor> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, IJob jobHandler, CancellationToken stoppingToken)\n    {\n        // \u5b9e\u73b0\u5931\u8d25\u91cd\u8bd5\u7b56\u7565\uff0c\u5982\u5931\u8d25\u91cd\u8bd5 3 \u6b21\n        await Retry.InvokeAsync(async () =>\n        {\n            await jobHandler.ExecuteAsync(context, stoppingToken);\n        }, 3, 1000\n        // \u6bcf\u6b21\u91cd\u8bd5\u8f93\u51fa\u65e5\u5fd7\n        , retryAction: (total, times) =>\n        {\n            _logger.LogWarning("Retrying {current}/{times} times for {context}", times, total, context);\n        });\n    }\n}\n')),(0,a.kt)("p",null,"\u63a5\u7740\u6a21\u62df ",(0,a.kt)("inlineCode",{parentName:"p"},"MyJob")," \u6267\u884c\u51fa\u9519\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,13}",showLineNumbers:!0,"{1,13}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context}");\n\n        throw new Exception("\u6a21\u62df\u51fa\u9519");\n        return Task.CompletedTask;\n    }\n}\n')),(0,a.kt)("p",null,"\u6700\u540e\uff0c\u5728\u6ce8\u518c ",(0,a.kt)("inlineCode",{parentName:"p"},"Schedule")," \u670d\u52a1\u4e2d\u6ce8\u518c ",(0,a.kt)("inlineCode",{parentName:"p"},"YourJobExecutor"),"\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4}",showLineNumbers:!0,"{4}":!0},"services.AddSchedule(options =>\n{\n      // \u6dfb\u52a0\u4f5c\u4e1a\u6267\u884c\u5668\n      options.AddExecutor<YourJobExecutor>();\n});\n")),(0,a.kt)("p",null,"\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {14,18,22}",showLineNumbers:!0,"{14,18,22}":!0},"info: 2022-12-05 14:36:41.2085688 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-05 14:36:41.2162510 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-05 14:36:41.2885816 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-05 14:36:41.2912130 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-05 14:36:41.3102057 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-05 14:36:46.3329097 +08:00 \u661f\u671f\u4e00 L MyJob[0] #13\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:36:46.249 -> 2022-12-05 14:36:51.274\nwarn: 2022-12-05 14:36:46.3910063 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobExecutor[0] #13\n      Retrying 1/3 times for <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:36:46.249 -> 2022-12-05 14:36:51.274\ninfo: 2022-12-05 14:36:47.4014898 +08:00 \u661f\u671f\u4e00 L MyJob[0] #13\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:36:46.249 -> 2022-12-05 14:36:51.274\nwarn: 2022-12-05 14:36:47.4471172 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobExecutor[0] #13\n      Retrying 2/3 times for <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:36:46.249 -> 2022-12-05 14:36:51.274\ninfo: 2022-12-05 14:36:48.4539737 +08:00 \u661f\u671f\u4e00 L MyJob[0] #13\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:36:46.249 -> 2022-12-05 14:36:51.274\nwarn: 2022-12-05 14:36:48.4880918 +08:00 \u661f\u671f\u4e00 L ConsoleApp32.YourJobExecutor[0] #13\n      Retrying 3/3 times for <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:36:46.249 -> 2022-12-05 14:36:51.274\ninfo: 2022-12-05 14:36:49.4984333 +08:00 \u661f\u671f\u4e00 L MyJob[0] #13\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:36:46.249 -> 2022-12-05 14:36:51.274\nfail: 2022-12-05 14:36:49.6714485 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #13\n      Error occurred executing <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 14:36:46.249 -> 2022-12-05 14:36:51.274.\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n      System.Exception: \u6a21\u62df\u51fa\u9519\n         at MyJob.ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken) in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\Program.cs:line 31\n         at ConsoleApp32.YourJobExecutor.<>c__DisplayClass2_0.<<ExecuteAsync>b__0>d.MoveNext() in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\YourJobExecutor.cs:line 20\n      --- End of stack trace from previous location ---\n         at TouchSocket.FriendlyException.Retry.InvokeAsync(Func`1 action, Int32 numRetries, Int32 retryTimeout, Boolean finalThrow, Type[] exceptionTypes, Func`2 fallbackPolicy, Action`2 retryAction) in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\FriendlyException\\Retry.cs:line 99\n         at TouchSocket.FriendlyException.Retry.InvokeAsync(Func`1 action, Int32 numRetries, Int32 retryTimeout, Boolean finalThrow, Type[] exceptionTypes, Func`2 fallbackPolicy, Action`2 retryAction) in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\FriendlyException\\Retry.cs:line 110\n         at ConsoleApp32.YourJobExecutor.ExecuteAsync(JobExecutingContext context, IJob jobHandler, CancellationToken stoppingToken) in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\YourJobExecutor.cs:line 18\n         at TouchSocket.Schedule.ScheduleHostedService.<>c__DisplayClass23_2.<<BackgroundProcessing>b__2>d.MoveNext() in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\Schedule\\HostedServices\\ScheduleHostedService.cs:line 232\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n")),(0,a.kt)("h3",{id:"26192-\u5b9e\u73b0\u8d85\u65f6\u63a7\u5236"},"26.1.9.2 \u5b9e\u73b0\u8d85\u65f6\u63a7\u5236"),(0,a.kt)("p",null,"\u5982\u6dfb\u52a0 ",(0,a.kt)("inlineCode",{parentName:"p"},"YourJobExecutor"),"\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {12}",showLineNumbers:!0,"{12}":!0},"public class YourJobExecutor : IJobExecutor\n{\n    private readonly ILogger<YourJobExecutor> _logger;\n    public YourJobExecutor(ILogger<YourJobExecutor> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, IJob jobHandler, CancellationToken stoppingToken)\n    {\n        await jobHandler.ExecuteAsync(context, stoppingToken)\n            .WaitAsync(TimeSpan.FromMilliseconds(3000));    // \u8bbe\u7f6e 3 \u79d2\u8d85\u65f6\n    }\n}\n")),(0,a.kt)("p",null,"\u63a5\u7740\u6a21\u62df ",(0,a.kt)("inlineCode",{parentName:"p"},"MyJob")," \u6267\u884c\u8d85\u65f6\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {12}",showLineNumbers:!0,"{12}":!0},'public class MyJob : IJob\n{\n    private readonly ILogger<MyJob> _logger;\n    public MyJob(ILogger<MyJob> logger)\n    {\n        _logger = logger;\n    }\n\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        _logger.LogInformation($"{context}");\n        await Task.Delay(6000);     // \u6a21\u62df\u8017\u65f6 6 \u79d2\n    }\n}\n')),(0,a.kt)("p",null,"\u6267\u884c\u7ed3\u679c\u5982\u4e0b\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {16}",showLineNumbers:!0,"{16}":!0},"info: 2022-12-20 13:57:01.7251541 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-20 13:57:01.7336016 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is preloading...\ninfo: 2022-12-20 13:57:02.2846096 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #1\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-20 13:57:02.3448819 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #1\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-20 13:57:02.3800053 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #1\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-20 13:57:07.3261111 +08:00 \u661f\u671f\u4e8c L MyJob[0] #14\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-20 13:57:07.240 -> 2022-12-20 13:57:12.260\nfail: 2022-12-20 13:57:10.5743871 +08:00 \u661f\u671f\u4e8c L System.Logging.ScheduleService[0] #14\n      Error occurred executing <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-20 13:57:07.240 -> 2022-12-20 13:57:12.260.\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n      System.TimeoutException: The operation has timed out.\n         at YourJobExecutor.ExecuteAsync(JobExecutingContext context, IJob jobHandler, CancellationToken stoppingToken) in D:\\Workplaces\\Study\\CSharp\\ConsoleApp32\\ConsoleApp32\\Program.cs:line 41\n         at TouchSocket.Schedule.ScheduleHostedService.<>c__DisplayClass23_2.<<BackgroundProcessing>b__2>d.MoveNext() in D:\\Workplaces\\OpenSources\\TouchSocket\\framework\\TouchSocket\\Schedule\\HostedServices\\ScheduleHostedService.cs:line 234\n      ++++++++++++++++++++++++++++++++++++++++++++++++++++++++\n")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("mdxAdmonitionTitle",{parentName:"admonition"},"\u5173\u4e8e ",(0,a.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"WaitAsync")," \u8bf4\u660e"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"WaitAsync")," \u662f ",(0,a.kt)("inlineCode",{parentName:"p"},".NET6+")," \u65b0\u589e\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"Task")," \u62d3\u5c55\u65b9\u6cd5\uff0c\u5982\u9700\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},".NET5")," \u4e2d\u652f\u6301\uff0c\u53ef\u6dfb\u52a0\u4ee5\u4e0b\u62d3\u5c55\uff1a"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},'public static async Task WaitAsync(this Task task, TimeSpan timeout)\n{\n      using var timeoutCancellationTokenSource = new CancellationTokenSource();\n      var delayTask = Task.Delay(timeout, timeoutCancellationTokenSource.Token);\n\n      if(await Task.WhenAny(task, delayTask) == task)\n      {\n            timeoutCancellationTokenSource.Cancel();\n            await task;\n      }\n      else\n      {\n            throw new TimeoutException("The operation has timed out.")\n      }\n}\n'))),(0,a.kt)("h3",{id:"26193-\u66f4\u591a\u63a7\u5236"},"26.1.9.3 \u66f4\u591a\u63a7\u5236"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u6267\u884c\u5668\u529f\u80fd\u8fdc\u4e0d\u6b62\u4e8e\u6b64\uff0c\u901a\u8fc7\u81ea\u5b9a\u4e49\u4f5c\u4e1a\u6267\u884c\u5668\u8fd8\u53ef\u4ee5\u5b9e\u73b0\u5206\u7247\u4f5c\u4e1a\uff0c\u5173\u8054\u5b50\u4f5c\u4e1a\uff0c\u6545\u969c\u8f6c\u79fb\uff0c\u96c6\u7fa4\u7b49\u63a7\u5236\u3002"),(0,a.kt)("h2",{id:"26110-\u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382-ischedulerfactory"},"26.1.10 \u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382 ",(0,a.kt)("inlineCode",{parentName:"h2"},"ISchedulerFactory")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8ba1\u5212\u5de5\u5382\u63d0\u4f9b\u4e86\u7a0b\u5e8f\u8fd0\u884c\u65f6\u64cd\u4f5c\u4f5c\u4e1a\u8c03\u5ea6\u5668\uff0c\u4f5c\u4e1a\u8ba1\u5212\u7b49\u8bf8\u591a\u65b9\u6cd5\u3002"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"ISchedulerFactory")," \u88ab\u6ce8\u518c\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"\u5355\u4f8b")," \u670d\u52a1\uff0c\u5141\u8bb8\u5728\u4efb\u4f55\u53ef\u4f9d\u8d56\u6ce8\u5165\u7684\u670d\u52a1\u83b7\u53d6\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4,8,11,16}",showLineNumbers:!0,"{4,8,11,16}":!0},"public class YourService: IYourService\n{\n    private readonly ISchedulerFactory _schedulerFactory;\n    public YourService(ISchedulerFactory schedulerFactory)\n    {\n        _schedulerFactory = schedulerFactory;\n\n        // \u4e5f\u53ef\u4ee5\u901a\u8fc7 App.GetService<ISchedulerFactory>() \u83b7\u53d6\n    }\n\n    public void SomeMethod([FromServices]ISchedulerFactory schedulerFactory)\n    {\n    }\n\n    // .NET7+ \u6216 TouchSocket 4.8.0+\n    public void SomeMethod(ISchedulerFactory schedulerFactory)\n    {\n    }\n}\n")),(0,a.kt)("h3",{id:"261101-\u67e5\u627e\u6240\u6709\u4f5c\u4e1a"},"26.1.10.1 \u67e5\u627e\u6240\u6709\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,5,9,13}",showLineNumbers:!0,"{1,5,9,13}":!0},'// \u67e5\u627e\u6240\u6709\u4f5c\u4e1a\uff0c\u5305\u62ec JobType == null \u7684\u975e\u6709\u6548\u4f5c\u4e1a\nvar jobs = _schedulerFactory.GetJobs();\nvar jobsOfModels = _schedulerFactory.GetJobsOfModels();\n\n// \u67e5\u627e\u7279\u5b9a\u5206\u7ec4\u7684\u4f5c\u4e1a\uff0c\u5305\u62ec JobType == null \u7684\u975e\u6709\u6548\u4f5c\u4e1a\nvar jobs = _schedulerFactory.GetJobs("group1");\nvar jobsOfModels = _schedulerFactory.GetJobsOfModels("group1");\n\n// \u67e5\u627e\u6240\u6709\u4f5c\u4e1a\uff0c\u4ec5 JobType != null \u6709\u6548\u4f5c\u4e1a\nvar jobs = _schedulerFactory.GetJobs(active: true);\nvar jobsOfModels = _schedulerFactory.GetJobsOfModels(active: true);\n\n// \u67e5\u627e\u7279\u5b9a\u5206\u7ec4\u7684\u4f5c\u4e1a\uff0c\u4ec5 JobType != null \u6709\u6548\u4f5c\u4e1a\nvar jobs = _schedulerFactory.GetJobs("group1", true);\nvar jobsOfModels = _schedulerFactory.GetJobsOfModels("group1", true);\n')),(0,a.kt)("h3",{id:"261102-\u67e5\u627e\u4e0b\u4e00\u6279\u89e6\u53d1\u7684\u4f5c\u4e1a"},"26.1.10.2 \u67e5\u627e\u4e0b\u4e00\u6279\u89e6\u53d1\u7684\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,5}",showLineNumbers:!0,"{1,5}":!0},'// \u67e5\u627e\u4e0b\u4e00\u6279\u89e6\u53d1\u7684\u4f5c\u4e1a\nvar nextRunJobs = _schedulerFactory.GetNextRunJobs(DateTime.Now);\nvar nextRunJobsOfModels = _schedulerFactory.GetNextRunJobsOfModels(DateTime.Now);\n\n// \u67e5\u627e\u7279\u5b9a\u5206\u7ec4\u4e0b\u4e00\u6279\u89e6\u53d1\u7684\u4f5c\u4e1a\nvar nextRunJobs = _schedulerFactory.GetNextRunJobs(DateTime.Now, "group1");\nvar nextRunJobsOfModels = _schedulerFactory.GetNextRunJobsOfModels(DateTime.Now, "group1");\n')),(0,a.kt)("h3",{id:"261103-\u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a"},"26.1.10.3 \u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,6}",showLineNumbers:!0,"{1,6}":!0},'// \u8fd4\u56de ScheduleResult \u7c7b\u578b\nvar scheduleResult = _schedulerFactory.TryGetJob("job1", out var scheduler); // \u5982\u679c\u5b58\u5728\u8fd4\u56de => ScheduleResult.Succeed\nvar scheduleResult = _schedulerFactory.TryGetJob("not_found", out var scheduler); // => ScheduleResult.NotFound\nvar scheduleResult = _schedulerFactory.TryGetJob("", out var scheduler); // => ScheduleResult.NotIdentify\n\n// \u8fd4\u56de IScheduler \u7c7b\u578b\nvar scheduler = _schedulerFactory.GetJob("job1"); // \u5982\u679c\u5b58\u5728\u8fd4\u56de IScheduler\nvar scheduler = _schedulerFactory.GetJob("not_found"); // => null\nvar scheduler = _schedulerFactory.GetJob(""); // => null\n')),(0,a.kt)("h3",{id:"261104-\u4fdd\u5b58\u4f5c\u4e1a"},"26.1.10.4 \u4fdd\u5b58\u4f5c\u4e1a"),(0,a.kt)("p",null,"\u4fdd\u5b58\u4f5c\u4e1a\u662f\u6846\u67b6\u63d0\u4f9b\u5f3a\u5927\u4e14\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u65b0\u589e"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"\u7f16\u8f91"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"\u5220\u9664")," \u4f5c\u4e1a\uff0c\u4e5f\u5c31\u662f\u4e09\u5927\u64cd\u4f5c\u90fd\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u6b64\u65b9\u6cd5\u76f4\u63a5\u64cd\u4f5c\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"// \u8fd4\u56de ScheduleResult \u7c7b\u578b\nvar scheduleResult = _schedulerFactory.TrySaveJob(schedulerBuilder, out var scheduler);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u652f\u6301\u591a\u4e2a\n_schedulerFactory.SaveJob(schedulerBuilder1, schedulerBuilder2, ...)\n")),(0,a.kt)("admonition",{title:"\u5173\u4e8e\u4fdd\u5b58\u4f5c\u4e1a\u7684\u80cc\u540e\u884c\u4e3a",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4fdd\u5b58\u4f5c\u4e1a\u9700\u8981\u4f20\u9012 ",(0,a.kt)("inlineCode",{parentName:"p"},"SchedulerBuilder")," \u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"GetJob(jobId)")," \u83b7\u53d6\uff0c\u5982\uff1a"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},'var schedulerBuilder = _schedulerFactory.GetJob("jobId")?.GetBuilder();\n')),(0,a.kt)("p",{parentName:"admonition"},"\u6b64\u65f6\u5b83\u7684\u5185\u90e8 ",(0,a.kt)("inlineCode",{parentName:"p"},"Behavior")," \u5c5e\u6027\u88ab\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"PersistenceBehavior.Updated"),"\uff0c\u4e5f\u5c31\u662f\u66f4\u65b0\u72b6\u6001\uff0c\u90a3\u4e48\u5bf9\u4e8e\u8fd9\u4e2a\u6784\u5efa\u5668\u7684\u4efb\u4f55\u64cd\u4f5c\u90fd\u4f1a\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"\u66f4\u65b0")," \u64cd\u4f5c\u3002"),(0,a.kt)("p",{parentName:"admonition"},"\u5982\u679c\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},".Appended()")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},".Removed()")," \u65b9\u6cd5\u6807\u8bb0\u4e4b\u540e\uff0c\u90a3\u4e48\u5b83\u7684\u64cd\u4f5c\u884c\u4e3a\u5c31\u53d1\u751f\u53d8\u5316\u4e86\u3002"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5982\u679c\u88ab\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"strong"},".Appended()")),"\uff0c\u90a3\u4e48\u5b83\u5c06\u8fdb\u884c ",(0,a.kt)("inlineCode",{parentName:"li"},"\u65b0\u589e")," \u64cd\u4f5c\u3002\u5982\uff1a")),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"schedulerBuilder.Appended();\n")),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5982\u679c\u88ab\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"strong"},".Removed()")),"\uff0c\u90a3\u4e48\u5b83\u5c06\u8fdb\u884c ",(0,a.kt)("inlineCode",{parentName:"li"},"\u5220\u9664")," \u64cd\u4f5c\u3002\u5982\uff1a")),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"schedulerBuilder.Removed();\n")),(0,a.kt)("p",{parentName:"admonition"},"\u6bd4\u5982\u4ee5\u4e0b\u7684\u4ee3\u7801\u5b9e\u5219\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"\u65b0\u589e")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u5220\u9664")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u66f4\u65b0")," \u64cd\u4f5c\uff1a"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4,8}",showLineNumbers:!0,"{1,4,8}":!0},'// \u5b9e\u9645\u505a\u65b0\u589e\u64cd\u4f5c\nvar scheduleResult = _schedulerFactory.TrySaveJob(SchedulerBuilder.Create<MyJob>(), out var scheduler); // Create \u65b9\u6cd5\u9ed8\u8ba4\u6807\u8bb0\u4e3a Appended\n\n// \u5b9e\u9645\u505a\u5220\u9664\u64cd\u4f5c\nvar schedulerBuilder = _schedulerFactory.GetJob("jobId")?.GetBuilder();\nvar scheduleResult = _schedulerFactory.TrySaveJob(schedulerBuilder?.Removed(), out var scheduler); // \u6807\u8bb0\u4e3a Removed\n\n// \u5b9e\u9645\u505a\u66f4\u65b0\u64cd\u4f5c\nvar scheduleResult = _schedulerFactory.TrySaveJob(SchedulerBuilder.Create<MyJob>().Updated(), out var scheduler); // Create \u65b9\u6cd5\u9ed8\u8ba4\u6807\u8bb0\u4e3a Appended\uff0c\u4f46\u8c03\u7528 Updated() \u65b9\u6cd5\n')),(0,a.kt)("p",{parentName:"admonition"},"\u53e6\u5916\uff0c\u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u4e5f\u5177\u5907\u76f8\u540c\u7684\u884c\u4e3a\u3002")),(0,a.kt)("h3",{id:"261105-\u6dfb\u52a0\u4f5c\u4e1a"},"26.1.10.5 \u6dfb\u52a0\u4f5c\u4e1a"),(0,a.kt)("p",null,"\u6846\u67b6\u63d0\u4f9b\u4e86\u975e\u5e38\u591a\u7684\u91cd\u8f7d\u65b9\u6cd5\u6dfb\u52a0\u4f5c\u4e1a\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,5,9,22,35}",showLineNumbers:!0,"{1,5,9,22,35}":!0},'// SchedulerBuilder \u65b9\u5f0f\nvar scheduleResult = _schedulerFactory.TryAddJob(schedulerBuilder, out var scheduler);\n_schedulerFactory.AddJob(schedulerBuilder1, schedulerBuilder2, ...);\n\n// JobBuilder + TriggerBuilders \u65b9\u5f0f\nvar scheduleResult = _schedulerFactory.TryAddJob(jobBuilder, new[] { triggerBuilder1, triggerBuilder2, ...}, out var scheduler);\n_schedulerFactory.TryAddJob(jobBuilder, triggerBuilder1, triggerBuilder2, ...);\n\n// \u6cdb\u578b\u65b9\u5f0f\nvar scheduleResult = _schedulerFactory.TryAddJob<MyJob>(new[] { triggerBuilder1, triggerBuilder2, ...}, out var scheduler);\n_schedulerFactory.AddJob<MyJob>(triggerBuilder1, triggerBuilder2, ...);\n// \u652f\u6301\u914d\u7f6e\u4f5c\u4e1a Id\nvar scheduleResult = _schedulerFactory.TryAddJob<MyJob>("job1", new[] { triggerBuilder1, triggerBuilder2, ...}, out var scheduler);\n_schedulerFactory.AddJob<MyJob>("job1", triggerBuilder1, triggerBuilder2, ...);\n// \u652f\u6301\u914d\u7f6e\u4f5c\u4e1a Id + \u4e32\u884c/\u5e76\u884c\nvar scheduleResult = _schedulerFactory.TryAddJob<MyJob>("job1", true, new[] { triggerBuilder1, triggerBuilder2, ...}, out var scheduler);\n_schedulerFactory.AddJob<MyJob>("job1", true, triggerBuilder1, triggerBuilder2, ...);\n// \u652f\u6301\u914d\u7f6e \u4e32\u884c/ \u5e76\u884c\nvar scheduleResult = _schedulerFactory.TryAddJob<MyJob>(true, new[] { triggerBuilder1, triggerBuilder2, ...}, out var scheduler);\n_schedulerFactory.AddJob<MyJob>(true, triggerBuilder1, triggerBuilder2, ...);\n\n// \u7c7b\u578b\u65b9\u5f0f\nvar scheduleResult = _schedulerFactory.TryAddJob(typeof(MyJob), new[] { triggerBuilder1, triggerBuilder2, ...}, out var scheduler);\n_schedulerFactory.AddJob(typeof(MyJob), triggerBuilder1, triggerBuilder2, ...);\n// \u652f\u6301\u914d\u7f6e\u4f5c\u4e1a Id\nvar scheduleResult = _schedulerFactory.TryAddJob(typeof(MyJob), "job1", new[] { triggerBuilder1, triggerBuilder2, ...}, out var scheduler);\n_schedulerFactory.AddJob(typeof(MyJob), "job1", triggerBuilder1, triggerBuilder2, ...);\n// \u652f\u6301\u914d\u7f6e\u4f5c\u4e1a Id + \u4e32\u884c/\u5e76\u884c\nvar scheduleResult = _schedulerFactory.TryAddJob(typeof(MyJob), "job1", true, new[] { triggerBuilder1, triggerBuilder2, ...}, out var scheduler);\n_schedulerFactory.AddJob(typeof(MyJob), "job1", true, triggerBuilder1, triggerBuilder2, ...);\n// \u652f\u6301\u914d\u7f6e \u4e32\u884c/ \u5e76\u884c\nvar scheduleResult = _schedulerFactory.TryAddJob(typeof(MyJob), true, new[] { triggerBuilder1, triggerBuilder2, ...}, out var scheduler);\n_schedulerFactory.AddJob(typeof(MyJob), true, triggerBuilder1, triggerBuilder2, ...);\n\n// \u52a8\u6001\u4f5c\u4e1a\u59d4\u6258\u65b9\u5f0f\nvar scheduleResult = _schedulerFactory.TryAddJob((serviceProvider, context, stoppingToken) => { }, new[] { triggerBuilder1, triggerBuilder2, ...}, out var scheduler);\n_schedulerFactory.AddJob((serviceProvider, context, stoppingToken) => { }, triggerBuilder1, triggerBuilder2, ...);\n// \u652f\u6301\u914d\u7f6e\u4f5c\u4e1a Id\nvar scheduleResult = _schedulerFactory.TryAddJob((serviceProvider, context, stoppingToken) => { }, "job1", new[] { triggerBuilder1, triggerBuilder2, ...}, out var scheduler);\n_schedulerFactory.AddJob((serviceProvider, context, stoppingToken) => { }, "job1", triggerBuilder1, triggerBuilder2, ...);\n// \u652f\u6301\u914d\u7f6e\u4f5c\u4e1a Id + \u4e32\u884c/\u5e76\u884c\nvar scheduleResult = _schedulerFactory.TryAddJob((serviceProvider, context, stoppingToken) => { }, "job1", true, new[] { triggerBuilder1, triggerBuilder2, ...}, out var scheduler);\n_schedulerFactory.AddJob((serviceProvider, context, stoppingToken) => { }, "job1", true, triggerBuilder1, triggerBuilder2, ...);\n// \u652f\u6301\u914d\u7f6e \u4e32\u884c/ \u5e76\u884c\nvar scheduleResult = _schedulerFactory.TryAddJob((serviceProvider, context, stoppingToken) => { }, true, new[] { triggerBuilder1, triggerBuilder2, ...}, out var scheduler);\n_schedulerFactory.AddJob((serviceProvider, context, stoppingToken) => { }, true, triggerBuilder1, triggerBuilder2, ...);\n')),(0,a.kt)("h3",{id:"261106-\u66f4\u65b0\u4f5c\u4e1a"},"26.1.10.6 \u66f4\u65b0\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"// \u8fd4\u56de ScheduleResult \u65b9\u5f0f\nvar scheduleResult = _schedulerFactory.TryUpdateJob(schedulerBuilder, out var scheduler);\n\n// \u65e0\u8fd4\u56de\u503c\u65b9\u5f0f\n_schedulerFactory.UpdateJob(schedulerBuilder1, schedulerBuilder2, ...);\n")),(0,a.kt)("h3",{id:"261107-\u5220\u9664\u4f5c\u4e1a"},"26.1.10.7 \u5220\u9664\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},'// \u8fd4\u56de ScheduleResult \u65b9\u5f0f\nvar scheduleResult = _schedulerFactory.TryRemoveJob("job1", out var scheduler);\nvar scheduleResult = _schedulerFactory.TryRemoveJob(scheduler);\n\n// \u65e0\u8fd4\u56de\u503c\u65b9\u5f0f\n_schedulerFactory.RemoveJob("job1", "job2", ...);\n_schedulerFactory.RemoveJob(scheduler1, scheduler2, ...);\n')),(0,a.kt)("h3",{id:"261108-\u68c0\u67e5\u4f5c\u4e1a\u662f\u5426\u5b58\u5728"},"26.1.10.8 \u68c0\u67e5\u4f5c\u4e1a\u662f\u5426\u5b58\u5728"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4}",showLineNumbers:!0,"{1,4}":!0},'var isExist = _schedulerFactory.ContainsJob("job1");\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7 group \u67e5\u627e\nvar isExist = _schedulerFactory.ContainsJob("job1", "group1");\n')),(0,a.kt)("h3",{id:"261109-\u542f\u52a8\u6240\u6709\u4f5c\u4e1a"},"26.1.10.9 \u542f\u52a8\u6240\u6709\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4}",showLineNumbers:!0,"{1,4}":!0},'_schedulerFactory.StartAll();\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7 group \u542f\u52a8\n_schedulerFactory.StartAll("group1");\n')),(0,a.kt)("h3",{id:"2611010-\u6682\u505c\u6240\u6709\u4f5c\u4e1a"},"26.1.10.10 \u6682\u505c\u6240\u6709\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4}",showLineNumbers:!0,"{1,4}":!0},' _schedulerFactory.PauseAll();\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7 group \u64cd\u4f5c\n _schedulerFactory.PauseAll("group1");\n')),(0,a.kt)("h3",{id:"2611011-\u5220\u9664\u6240\u6709\u4f5c\u4e1a"},"26.1.10.11 \u5220\u9664\u6240\u6709\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4}",showLineNumbers:!0,"{1,4}":!0},' _schedulerFactory.RemoveAll();\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7 group \u64cd\u4f5c\n _schedulerFactory.RemoveAll("group1");\n')),(0,a.kt)("h3",{id:"2611012-\u5f3a\u5236\u89e6\u53d1\u6240\u6709\u4f5c\u4e1a\u6301\u4e45\u5316\u64cd\u4f5c"},"26.1.10.12 \u5f3a\u5236\u89e6\u53d1\u6240\u6709\u4f5c\u4e1a\u6301\u4e45\u5316\u64cd\u4f5c"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4}",showLineNumbers:!0,"{1,4}":!0},' _schedulerFactory.PersistAll();\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7 group \u64cd\u4f5c\n _schedulerFactory.PersistAll("group1");\n')),(0,a.kt)("h3",{id:"2611013-\u6821\u5bf9\u6240\u6709\u4f5c\u4e1a"},"26.1.10.13 \u6821\u5bf9\u6240\u6709\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4}",showLineNumbers:!0,"{1,4}":!0},' _schedulerFactory.CollateAll();\n\n// \u8fd8\u53ef\u4ee5\u901a\u8fc7 group \u64cd\u4f5c\n _schedulerFactory.CollateAll("group1");\n')),(0,a.kt)("h3",{id:"2611014-\u5f3a\u5236\u5524\u9192\u4f5c\u4e1a\u8c03\u5ea6\u5668"},"26.1.10.14 \u5f3a\u5236\u5524\u9192\u4f5c\u4e1a\u8c03\u5ea6\u5668"),(0,a.kt)("p",null,"\u6b63\u5e38\u60c5\u51b5\u4e0b\uff0c\u4f5c\u4e1a\u8c03\u5ea6\u5668\u4f1a\u81ea\u52a8\u7ba1\u7406 ",(0,a.kt)("inlineCode",{parentName:"p"},"CPU")," \u4f11\u7720\u548c\u5524\u9192\uff0c\u4f46\u4e00\u4e9b\u7279\u6b8a\u60c5\u51b5\u4e0b\u9700\u8981\u5f3a\u5236\u5524\u9192\u4f5c\u4e1a\u8c03\u5ea6\u5668\uff08\u6bd4\u5982\u8c03\u5ea6\u5668\u5047\u6b7b\u4e86\uff0c\u88ab\u56de\u6536\u4e86...\uff09\uff0c\u53ef\u901a\u8fc7\u4ee5\u4e0b\u65b9\u5f0f\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"_schedulerFactory.CancelSleep();\n")),(0,a.kt)("h2",{id:"26111-\u4f5c\u4e1a\u8ba1\u5212-ischeduler"},"26.1.11 \u4f5c\u4e1a\u8ba1\u5212 ",(0,a.kt)("inlineCode",{parentName:"h2"},"IScheduler")),(0,a.kt)("p",null,"\u4f5c\u4e1a\u8ba1\u5212 ",(0,a.kt)("inlineCode",{parentName:"p"},"Scheduler")," \u7684\u9ed8\u8ba4\u5b9e\u73b0\u63a5\u53e3\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"IScheduler"),"\uff0c\u8be5\u63a5\u53e3\u4e3b\u8981\u7528\u6765\u64cd\u4f5c\u5f53\u524d\uff08\u5355\u4e2a\uff09\u4f5c\u4e1a\u3002"),(0,a.kt)("h3",{id:"261111-\u83b7\u53d6-schedulermodel-\u5b9e\u4f8b"},"26.1.11.1 \u83b7\u53d6 ",(0,a.kt)("inlineCode",{parentName:"h3"},"SchedulerModel")," \u5b9e\u4f8b"),(0,a.kt)("p",null,"\u83b7\u53d6 ",(0,a.kt)("inlineCode",{parentName:"p"},"SchedulerModel")," \u4e4b\u540e\u53ef\u76f4\u63a5\u8bbf\u95ee ",(0,a.kt)("inlineCode",{parentName:"p"},"JobDetail")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"Trigger")," \u5bf9\u8c61\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var schedulerModel = scheduler.GetModel();\n")),(0,a.kt)("h3",{id:"261112-\u83b7\u53d6-schedulerbuilder"},"26.1.11.2 \u83b7\u53d6 ",(0,a.kt)("inlineCode",{parentName:"h3"},"SchedulerBuilder")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var schedulerBuilder = scheduler.GetBuilder();\n")),(0,a.kt)("h3",{id:"261113-\u83b7\u53d6-jobbuilder"},"26.1.11.3 \u83b7\u53d6 ",(0,a.kt)("inlineCode",{parentName:"h3"},"JobBuilder")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var jobBuilder = scheduler.GetJobBuilder();\n")),(0,a.kt)("h3",{id:"261114-\u83b7\u53d6-triggerbuilder-\u96c6\u5408"},"26.1.11.4 \u83b7\u53d6 ",(0,a.kt)("inlineCode",{parentName:"h3"},"TriggerBuilder")," \u96c6\u5408"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var triggerBuilders = scheduler.GetTriggerBuilders();\n")),(0,a.kt)("h3",{id:"261115-\u83b7\u53d6\u5355\u4e2a-triggerbuilder"},"26.1.11.5 \u83b7\u53d6\u5355\u4e2a ",(0,a.kt)("inlineCode",{parentName:"h3"},"TriggerBuilder")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},'var triggerBuilder = scheduler.GetTriggerBuilder("trigger1");\n')),(0,a.kt)("h3",{id:"261116-\u83b7\u53d6\u4f5c\u4e1a\u4fe1\u606f"},"26.1.11.6 \u83b7\u53d6\u4f5c\u4e1a\u4fe1\u606f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var jobDetail = scheduler.GetJobDetail();\n")),(0,a.kt)("h3",{id:"261117-\u83b7\u53d6\u4f5c\u4e1a\u89e6\u53d1\u5668\u96c6\u5408"},"26.1.11.7 \u83b7\u53d6\u4f5c\u4e1a\u89e6\u53d1\u5668\u96c6\u5408"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var triggers = scheduler.GetTriggers();\n")),(0,a.kt)("h3",{id:"261118-\u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.11.8 \u83b7\u53d6\u5355\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,6}",showLineNumbers:!0,"{1,6}":!0},'// \u8fd4\u56de ScheduleResult \u65b9\u5f0f\nvar scheduleResult = scheduler.TryGetTrigger("trigger1", out var trigger);    // \u5982\u679c\u5b58\u5728\u8fd4\u56de ScheduleResult.Succeed\nvar scheduleResult = scheduler.TryGetTrigger("not_found", out var trigger);    // => ScheduleResult.NotFound\nvar scheduleResult = scheduler.TryGetTrigger("", out var trigger);    // => ScheduleResult.NotIdentify\n\n// \u8fd4\u56de Trigger \u65b9\u5f0f\nvar trigger = scheduler.GetTrigger("trigger1"); // \u5982\u679c\u5b58\u5728\u8fd4\u56de Trigger\nvar trigger = scheduler.GetTrigger("not_found"); // => null\nvar trigger = scheduler.GetTrigger(""); // => null\n')),(0,a.kt)("h3",{id:"261119-\u4fdd\u5b58\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.11.9 \u4fdd\u5b58\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("p",null,"\u4fdd\u5b58\u4f5c\u4e1a\u89e6\u53d1\u5668\u662f\u6846\u67b6\u63d0\u4f9b\u5f3a\u5927\u4e14\u7b80\u5355\u7684\u65b9\u6cd5\uff0c\u652f\u6301 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u65b0\u589e"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"\u7f16\u8f91"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"\u5220\u9664")," \u4f5c\u4e1a\u89e6\u53d1\u5668\uff0c\u4e5f\u5c31\u662f\u4e09\u5927\u64cd\u4f5c\u90fd\u53ef\u4ee5\u76f4\u63a5\u901a\u8fc7\u6b64\u65b9\u6cd5\u76f4\u63a5\u64cd\u4f5c\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"// \u8fd4\u56de ScheduleResult \u7c7b\u578b\nvar scheduleResult = scheduler.TrySaveTrigger(triggerBuilder, out var trigger);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u652f\u6301\u591a\u4e2a\nscheduler.SaveTrigger(triggerBuilder1, triggerBuilder2, ...)\n")),(0,a.kt)("admonition",{title:"\u5173\u4e8e\u4fdd\u5b58\u4f5c\u4e1a\u89e6\u53d1\u5668\u7684\u80cc\u540e\u884c\u4e3a",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u4fdd\u5b58\u4f5c\u4e1a\u89e6\u53d1\u5668\u9700\u8981\u4f20\u9012 ",(0,a.kt)("inlineCode",{parentName:"p"},"TriggerBuilder")," \u5bf9\u8c61\uff0c\u8fd9\u4e2a\u5bf9\u8c61\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"GetTriggerBuilder(triggerId)")," \u83b7\u53d6\uff0c\u5982\uff1a"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},'var triggerBuilder = scheduler.GetTriggerBuilder("trigger1");\n')),(0,a.kt)("p",{parentName:"admonition"},"\u6b64\u65f6\u5b83\u7684\u5185\u90e8 ",(0,a.kt)("inlineCode",{parentName:"p"},"Behavior")," \u5c5e\u6027\u88ab\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"PersistenceBehavior.Updated"),"\uff0c\u4e5f\u5c31\u662f\u66f4\u65b0\u72b6\u6001\uff0c\u90a3\u4e48\u5bf9\u4e8e\u8fd9\u4e2a\u6784\u5efa\u5668\u7684\u4efb\u4f55\u64cd\u4f5c\u90fd\u4f1a\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"\u66f4\u65b0")," \u64cd\u4f5c\u3002"),(0,a.kt)("p",{parentName:"admonition"},"\u5982\u679c\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},".Appended()")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},".Removed()")," \u65b9\u6cd5\u6807\u8bb0\u4e4b\u540e\uff0c\u90a3\u4e48\u5b83\u7684\u64cd\u4f5c\u884c\u4e3a\u5c31\u53d1\u751f\u53d8\u5316\u4e86\u3002"),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5982\u679c\u88ab\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"strong"},".Appended()")),"\uff0c\u90a3\u4e48\u5b83\u5c06\u8fdb\u884c ",(0,a.kt)("inlineCode",{parentName:"li"},"\u65b0\u589e")," \u64cd\u4f5c\u3002\u5982\uff1a")),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"triggerBuilder.Appended();\n")),(0,a.kt)("ul",{parentName:"admonition"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},"\u5982\u679c\u88ab\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"strong"},".Removed()")),"\uff0c\u90a3\u4e48\u5b83\u5c06\u8fdb\u884c ",(0,a.kt)("inlineCode",{parentName:"li"},"\u5220\u9664")," \u64cd\u4f5c\u3002\u5982\uff1a")),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"triggerBuilder.Removed();\n")),(0,a.kt)("p",{parentName:"admonition"},"\u6bd4\u5982\u4ee5\u4e0b\u7684\u4ee3\u7801\u5b9e\u5219\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"\u65b0\u589e")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u5220\u9664")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"p"},"\u66f4\u65b0")," \u64cd\u4f5c\uff1a"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,4,8}",showLineNumbers:!0,"{1,4,8}":!0},'// \u5b9e\u9645\u505a\u65b0\u589e\u64cd\u4f5c\nvar scheduleResult = scheduler.TrySaveTrigger(Triggers.PeriodSeconds(5), out var trigger); // Create \u65b9\u6cd5\u9ed8\u8ba4\u6807\u8bb0\u4e3a Appended\n\n// \u5b9e\u9645\u505a\u5220\u9664\u64cd\u4f5c\nvar triggerBuilder = scheduler.GetTriggerBuilder("trigger1");\nvar scheduleResult = scheduler.TrySaveTrigger(triggerBuilder?.Removed(), out var trigger); // \u6807\u8bb0\u4e3a Removed\n\n// \u5b9e\u9645\u505a\u66f4\u65b0\u64cd\u4f5c\nvar scheduleResult = scheduler.TrySaveTrigger(Trigggers.PeriodSeconds(5).Updated(), out var trigger); // Create \u65b9\u6cd5\u9ed8\u8ba4\u6807\u8bb0\u4e3a Appended\uff0c\u4f46\u8c03\u7528 Updated() \u65b9\u6cd5\n'))),(0,a.kt)("h3",{id:"2611110-\u66f4\u65b0\u4f5c\u4e1a\u4fe1\u606f"},"26.1.11.10 \u66f4\u65b0\u4f5c\u4e1a\u4fe1\u606f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"// \u8fd4\u56de ScheduleResult \u7c7b\u578b\nvar scheduleResult = scheduler.TryUpdateDetail(jobBuilder, out var jobDetail);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u652f\u6301\u591a\u4e2a\nscheduler.UpdateDetail(jobBuilder)\n")),(0,a.kt)("h3",{id:"2611111-\u6dfb\u52a0\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.11.11 \u6dfb\u52a0\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"// \u8fd4\u56de ScheduleResult \u7c7b\u578b\nvar scheduleResult = scheduler.TryAddTrigger(triggerBuilder, out var trigger);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u652f\u6301\u591a\u4e2a\nscheduler.AddTrigger(triggerBuilder1, triggerBuilder2, ...);\n")),(0,a.kt)("h3",{id:"2611112-\u66f4\u65b0\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.11.12 \u66f4\u65b0\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"// \u8fd4\u56de ScheduleResult \u7c7b\u578b\nvar scheduleResult = scheduler.TryUpdateTrigger(triggerBuilder, out var trigger);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u652f\u6301\u591a\u4e2a\nscheduler.UpdateTrigger(triggerBuilder1, triggerBuilder2, ...);\n")),(0,a.kt)("h3",{id:"2611113-\u5220\u9664\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.11.13 \u5220\u9664\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},'// \u8fd4\u56de ScheduleResult \u7c7b\u578b\nvar scheduleResult = scheduler.TryRemoveTrigger("trigger1", out var trigger);\n\n// \u65e0\u8fd4\u56de\u503c\uff0c\u652f\u6301\u591a\u4e2a\nscheduler.RemoveTrigger("trigger1", "trigger2", ...);\n')),(0,a.kt)("h3",{id:"2611114-\u5220\u9664\u5f53\u524d\u4f5c\u4e1a"},"26.1.11.14 \u5220\u9664\u5f53\u524d\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"// \u8fd4\u56de ScheduleResult \u7c7b\u578b\nvar scheduleResult = scheduler.TryRemove();\n\n// \u65e0\u8fd4\u56de\u503c\nscheduler.Remove();\n")),(0,a.kt)("h3",{id:"2611115-\u5224\u65ad\u4f5c\u4e1a\u89e6\u53d1\u5668\u662f\u5426\u5b58\u5728"},"26.1.11.15 \u5224\u65ad\u4f5c\u4e1a\u89e6\u53d1\u5668\u662f\u5426\u5b58\u5728"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},'bool isExist = scheduler.ContainsTrigger("trigger1");\n')),(0,a.kt)("h3",{id:"2611116-\u542f\u52a8\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.11.16 \u542f\u52a8\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},'bool succeed = scheduler.StartTrigger("trigger1");\n')),(0,a.kt)("h3",{id:"2611117-\u6682\u505c\u4f5c\u4e1a\u89e6\u53d1\u5668"},"26.1.11.17 \u6682\u505c\u4f5c\u4e1a\u89e6\u53d1\u5668"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},'bool succeed = scheduler.PauseTrigger("trigger1");\n')),(0,a.kt)("h3",{id:"2611118-\u5f3a\u5236\u89e6\u53d1\u4f5c\u4e1a\u6301\u4e45\u5316\u64cd\u4f5c"},"26.1.11.18 \u5f3a\u5236\u89e6\u53d1\u4f5c\u4e1a\u6301\u4e45\u5316\u64cd\u4f5c"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"scheduler.Persist();\n")),(0,a.kt)("h3",{id:"2611119-\u542f\u52a8\u5f53\u524d\u4f5c\u4e1a"},"26.1.11.19 \u542f\u52a8\u5f53\u524d\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"scheduler.Start();\n")),(0,a.kt)("h3",{id:"2611120-\u6682\u505c\u5f53\u524d\u4f5c\u4e1a"},"26.1.11.20 \u6682\u505c\u5f53\u524d\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"scheduler.Start();\n")),(0,a.kt)("h3",{id:"2611121-\u6821\u5bf9\u5f53\u524d\u4f5c\u4e1a"},"26.1.11.21 \u6821\u5bf9\u5f53\u524d\u4f5c\u4e1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"scheduler.Collate();\n")),(0,a.kt)("h3",{id:"2611122-\u5f3a\u5236\u5237\u65b0\u5f53\u524d\u4f5c\u4e1a"},"26.1.11.22 \u5f3a\u5236\u5237\u65b0\u5f53\u524d\u4f5c\u4e1a"),(0,a.kt)("admonition",{title:"\u7248\u672c\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u9650 ",(0,a.kt)("inlineCode",{parentName:"p"},"TouchSocket 4.8.3.3 +")," \u7248\u672c\u4f7f\u7528\u3002")),(0,a.kt)("p",null,"\u901a\u5e38\u60c5\u51b5\u4e0b\u6211\u4eec\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},'_schedulerFactory.GetJob("jobId")')," \u83b7\u53d6\u5230\u4f5c\u4e1a\u4e4b\u540e\uff0c\u7136\u540e\u5bf9\u8fd9\u4e2a\u4f5c\u4e1a\u8fdb\u884c\u64cd\u4f5c\uff0c",(0,a.kt)("strong",{parentName:"p"},"\u4f46\u64cd\u4f5c\u4e4b\u540e\u8fd9\u4e2a\u5bf9\u8c61\u5e76\u4e0d\u80fd\u540c\u6b65\u66f4\u6539\uff0c\u9700\u8981\u53cd\u590d\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"strong"},"GetJob")," \u65b9\u6cd5\u3002"),"\u3002"),(0,a.kt)("p",null,"\u6240\u4ee5\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"TouchSocket 4.8.3.3+")," \u7248\u672c\u4e4b\u540e\uff0c",(0,a.kt)("strong",{parentName:"p"},(0,a.kt)("inlineCode",{parentName:"strong"},"IScheduler")," \u4efb\u4f55\u64cd\u4f5c\u90fd\u5c06\u81ea\u52a8\u8c03\u7528 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Reload()")," \u65b9\u6cd5\u5237\u65b0\u53d8\u91cf"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"// \u4e5f\u53ef\u4ee5\u81ea\u5df1\u624b\u52a8\u5f3a\u5236\u5237\u65b0\uff08\u901a\u5e38\u4e0d\u9700\u8981\u8c03\u7528\u4e0b\u9762\u4ee3\u7801~~\uff09\nscheduler.Reload();\n")),(0,a.kt)("h3",{id:"2611123-\u8f6c\u6362\u6210-json-\u683c\u5f0f"},"26.1.11.23 \u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"h3"},"JSON")," \u683c\u5f0f"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers",showLineNumbers:!0},"var json = scheduler.ConvertToJSON();\nvar json = scheduler.ConvertToJSON(NamingConventions.CamelCase);\n")),(0,a.kt)("h3",{id:"2611124-\u8f6c\u6362\u6210\u53ef\u679a\u4e3e\u5b57\u5178"},"26.1.11.24 \u8f6c\u6362\u6210\u53ef\u679a\u4e3e\u5b57\u5178"),(0,a.kt)("admonition",{title:"\u7248\u672c\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u9650 ",(0,a.kt)("inlineCode",{parentName:"p"},"TouchSocket 4.8.4 +")," \u7248\u672c\u4f7f\u7528\u3002")),(0,a.kt)("p",null,"\u901a\u5e38\u6211\u4eec\u5728\u5f00\u53d1\u5e94\u7528\u65f6\uff0c\u9700\u8981\u5c06\u4f5c\u4e1a\u8ba1\u5212\u4fe1\u606f\u8fdb\u884c\u62c6\u89e3\uff0c\u6bd4\u5982\u4e00\u4e2a\u4f5c\u4e1a\u8ba1\u5212\u5305\u542b\u4e24\u4e2a\u4f5c\u4e1a\u89e6\u53d1\u5668\uff0c\u90a3\u4e48\u53ef\u4ee5\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"scheduler.GetEnumerable()")," \u65b9\u6cd5\u751f\u6210\u53ef\u679a\u4e3e\u5b57\u5178\u5bf9\u8c61\uff0c\u5b57\u5178\u4e2d\u7684\u9879\u6570\u91cf\u7b49\u4e8e\u4f5c\u4e1a\u89e6\u53d1\u5668\u6570\u91cf\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1}",showLineNumbers:!0,"{1}":!0},"foreach (var (jobDetail, trigger) in scheduler.GetEnumerable())\n{\n      // ....\n}\n")),(0,a.kt)("h2",{id:"26112-\u4f5c\u4e1a\u6301\u4e45\u5316\u5668-ijobpersistence"},"26.1.12 \u4f5c\u4e1a\u6301\u4e45\u5316\u5668 ",(0,a.kt)("inlineCode",{parentName:"h2"},"IJobPersistence")),(0,a.kt)("h3",{id:"261121-\u5173\u4e8e\u4f5c\u4e1a\u6301\u4e45\u5316\u5668"},"26.1.12.1 \u5173\u4e8e\u4f5c\u4e1a\u6301\u4e45\u5316\u5668"),(0,a.kt)("p",null,"\u4f5c\u4e1a\u6301\u4e45\u5316\u5668\u6307\u7684\u662f\u53ef\u4ee5\u901a\u8fc7\u5b58\u50a8\u4ecb\u8d28\u5982\u6570\u636e\u5e93\u4e2d\u52a0\u8f7d\u4f5c\u4e1a\u4fe1\u606f\u5230\u5185\u5b58\u4e2d\uff0c\u53c8\u53ef\u4ee5\u5c06\u5185\u5b58\u4e2d\u4f5c\u4e1a\u8c03\u5ea6\u5668\u7684\u4f5c\u4e1a\u4fe1\u606f\u5b9e\u65f6\u540c\u6b65\u56de\u5b58\u50a8\u4ecb\u8d28\u4e2d\u3002"),(0,a.kt)("h3",{id:"261122-\u5b9e\u73b0\u4f5c\u4e1a\u6301\u4e45\u5316\u5668"},"26.1.12.2 \u5b9e\u73b0\u4f5c\u4e1a\u6301\u4e45\u5316\u5668"),(0,a.kt)("p",null,"\u8c03\u5ea6\u4f5c\u4e1a\u670d\u52a1\u63d0\u4f9b\u4e86\u975e\u5e38\u7b80\u5355\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJobPersistence")," \u63a5\u53e3\uff0c\u53ea\u9700\u5b9e\u73b0\u8be5\u63a5\u53e3\u5373\u53ef\u5b9e\u73b0\u6301\u4e45\u5316\uff0c\u5982\u5b9e\u73b0\u6570\u636e\u5e93\u6301\u4e45\u5316\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,9,18,24}",showLineNumbers:!0,"{1,3,9,18,24}":!0},'public class DbJobPersistence : IJobPersistence\n{\n    public IEnumerable<SchedulerBuilder> Preload()\n    {\n        // \u4f5c\u4e1a\u8c03\u5ea6\u670d\u52a1\u542f\u52a8\u65f6\u8fd0\u884c\u65f6\u521d\u59cb\u5316\uff0c\u53ef\u901a\u8fc7\u6570\u636e\u5e93\u52a0\u8f7d\uff0c\u6216\u8005\u5176\u4ed6\u65b9\u5f0f\n        return Array.Empty<SchedulerBuilder>();\n    }\n\n    public SchedulerBuilder OnLoading(SchedulerBuilder builder)\n    {\n        // \u5982\u679c\u662f\u66f4\u65b0\u64cd\u4f5c\uff0c\u5219 return builder.Updated(); \u5c06\u751f\u6210 UPDATE \u8bed\u53e5\n        // \u5982\u679c\u662f\u65b0\u589e\u64cd\u4f5c\uff0c\u5219 return builder.Appended(); \u5c06\u751f\u6210 INSERT \u8bed\u53e5\n        // \u5982\u679c\u662f\u5220\u9664\u64cd\u4f5c\uff0c\u5219 return builder.Removed(); \u5c06\u751f\u6210 DELETE \u8bed\u53e5\n        // \u5982\u679c\u65e0\u9700\u6807\u8bb0\u64cd\u4f5c\uff0c\u8fd4\u56de builder \u9ed8\u8ba4\u503c\u5373\u53ef\n        return builder;\n    }\n\n    public void OnChanged(PersistenceContext context)\n    {\n        var sql = context.ConvertToSQL("job_detail");\n        // \u8fd9\u91cc\u6267\u884c sql \u5373\u53ef \ud83d\udc96\n    }\n\n    public void OnTriggerChanged(PersistenceTriggerContext context)\n    {\n        var sql = context.ConvertToSQL("job_trigger");\n        // \u8fd9\u91cc\u6267\u884c sql \u5373\u53ef \ud83d\udc96\n    }\n}\n')),(0,a.kt)("p",null,"\u4e4b\u540e\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"Startup.cs")," \u4e2d\u6ce8\u518c\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3}",showLineNumbers:!0,"{3}":!0},"services.AddSchedule(options =>\n{\n      options.AddPersistence<DbJobPersistence>();\n});\n")),(0,a.kt)("p",null,"\u53ef\u80fd\u6709\u4e9b\u5f00\u53d1\u8005\u770b\u5230\u8fd9\u91cc\u4e00\u8138\u4e0d\u89e3\uff0c\u6301\u4e45\u5316\u4e0d\u5e94\u8be5\u8fd9\u4e48\u7b80\u5355\u554a\uff01\u5176\u5b9e\u5c31\u662f\u8fd9\u4e48\u7b80\u5355...."),(0,a.kt)("h3",{id:"261123-ijobpersistence-\u8be6\u7ec6\u8bf4\u660e"},"26.1.12.3 ",(0,a.kt)("inlineCode",{parentName:"h3"},"IJobPersistence")," \u8be6\u7ec6\u8bf4\u660e"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"IJobPersistence")," \u63a5\u53e3\u63d0\u4f9b\u4e86\u4ee5\u4e0b\u56db\u4e2a\u65b9\u6cd5\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"Preload"),"\uff1a\u4f5c\u4e1a\u8c03\u5ea6\u670d\u52a1\u542f\u52a8\u65f6\u8c03\u7528\uff0c\u53ef\u5728\u8fd9\u91cc\u52a8\u6001\u521b\u5efa\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u5e76\u8fd4\u56de\u3002"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,5,9,13,16}",showLineNumbers:!0,"{1,3,5,9,13,16}":!0},"public IEnumerable<SchedulerBuilder> Preload()\n{\n      // \u53ef\u4ee5\u8fd9\u91cc\u67e5\u8be2\u6570\u636e\u5e93\u8fd4\u56de\n\n      // \u8fd9\u91cc\u53ef\u4ee5\u626b\u63cf\u7a0b\u5e8f\u96c6\u52a8\u6001\u521b\u5efa\u8fd4\u56de\n      return App.EffectiveTypes.Where(t => t.IsJobType())\n                               .Select(t => SchedulerBuilder.Create(JobBuilder.Create(t), t.ScanTriggers()));\n\n      // \u5982\u679c\u7c7b\u578b\u8d34\u6709 [JobDetail] \u7279\u6027\uff0c\u8fd8\u53ef\u4ee5\u4e00\u952e\u626b\u63cf\u8fd4\u56de\n      return App.EffectiveTypes.Where(t => t.IsJobType())\n                               .Select(t => t.ScanToBuilder());\n\n      // \u8fd8\u53ef\u4ee5\u66f4\u7b80\u5355~~\n      return App.EffectiveTypes.ScanToBuilders();\n\n      // \u4e5f\u53ef\u4ee5\u624b\u52a8\u8fd4\u56de\n      return new[]\n      {\n            SchedulerBuilder.Create(JobBuilder.Create<MyJob>(), Triggers.Minutely())\n      }\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"OnLoading"),"\uff1a\u4f5c\u4e1a\u8ba1\u5212\u521d\u59cb\u5316\u901a\u77e5\uff0c\u901a\u5e38\u5728\u8fd9\u91cc\u8fdb\u4e00\u6b65\u4fee\u6539\u521d\u59cb\u5316\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u3002"))),(0,a.kt)("p",null,"\u5728\u4f5c\u4e1a\u8c03\u5ea6\u5668\u670d\u52a1\u542f\u52a8\u65f6\u4f1a\u904d\u5386\u7a0b\u5e8f\u4e2d\u6240\u6709\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\uff0c\u7136\u540e\u9010\u6761\u8c03\u7528\u8be5\u65b9\u6cd5\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u5728\u8fd9\u91cc\u8fdb\u4e00\u6b65\u4fee\u6539\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u6570\u636e\uff0c\u4e4b\u540e",(0,a.kt)("strong",{parentName:"p"},"\u9009\u62e9\u6027\u8fd4\u56de ",(0,a.kt)("inlineCode",{parentName:"strong"},"SchedulerBuilder")," \u7684\u6301\u4e45\u5316\u884c\u4e3a"),"\u3002"),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"SchedulerBuilder")," \u63d0\u4f9b ",(0,a.kt)("inlineCode",{parentName:"p"},"Updated()"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Appended()")," \u548c ",(0,a.kt)("inlineCode",{parentName:"p"},"Removed()")," \u6765\u4f5c\u4e3a\u6301\u4e45\u5316\u884c\u4e3a\u6807\u8bb0\u3002\u6b64\u6807\u8bb0\u5c06\u51b3\u5b9a\u6700\u7ec8\u751f\u6210\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"SQL")," \u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"UPDATE")," \u8fd8\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"INSERT")," \u8fd8\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"UPDATE"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4,8,12-13,16}",showLineNumbers:!0,"{4,8,12-13,16}":!0},'public SchedulerBuilder OnLoading(SchedulerBuilder builder)\n{\n      // \u6bd4\u5982\u8fd9\u91cc\u4fee\u6539\u4f5c\u4e1a\u4fe1\u606f\u63cf\u8ff0\n      builder.GetJobBuilder()\n             .SetDescription("\u8fd9\u662f\u63cf\u8ff0~~");\n\n      // \u8fd8\u53ef\u4ee5\u4fee\u6539\u89e6\u53d1\u5668\n      builder.GetTriggerBuilder("trigger1")\n             .SetDescription("\u8fd9\u662f\u89e6\u53d1\u5668\u63cf\u8ff0~~");\n\n      // \u8fd8\u53ef\u4ee5\u901a\u8fc7\u6570\u636e\u5e93\u67e5\u8be2\u8fd4\u56de\u586b\u5145 \ud83d\ude0e\n      builder.GetJobBuilder()\n             .LoadFrom(dbJobDetail); // dbJobDetail \u8868\u793a\u6839\u636e jobId \u67e5\u8be2\u6570\u636e\u5e93\u8fd4\u56de\u7684\u5bf9\u8c61\n\n      // \u8fd8\u53ef\u4ee5\u83b7\u53d6\u679a\u4e3e\u5bf9\u8c61\u9010\u6761\u66f4\u65b0\n      foreach(var (jobBuilder, triggerBuilder) in builder.GetEnumerable())\n      {\n            jobBuilder.SetDescription("....");\n            triggerBuilder.Updated();     // \u6807\u8bb0\u8be5\u89e6\u53d1\u5668\u5df2\u88ab\u66f4\u65b0\uff0c\u5e76\u751f\u6210 UPDATE \u8bed\u53e5\n            triggerBuilder.Removed();     // \u6807\u8bb0\u8be5\u89e6\u53d1\u5668\u5df2\u88ab\u5220\u9664\uff0c\u5e76\u751f\u6210 DELETE \u8bed\u53e5\n      }\n\n      // \u6807\u8bb0\u4ece\u5176\u4ed6\u5730\u65b9\u66f4\u65b0\uff0c\u6bd4\u5982\u6570\u636e\u5e93\n      return builder;\n}\n')),(0,a.kt)("p",null,"\u5982\u679c\u5b58\u50a8\u4ecb\u8d28\uff08\u5982\u6570\u636e\u5e93\uff09\u5df2\u7ecf\u5220\u9664\u8be5\u4f5c\u4e1a\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"Removed()"),"\uff0c\u8fd9\u6837\u8be5\u4f5c\u4e1a\u4f1a\u4ece\u5185\u5b58\u4e2d\u79fb\u9664\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3,6}",showLineNumbers:!0,"{3,6}":!0},"public SchedulerBuilder OnLoading(SchedulerBuilder builder)\n{\n      // \u6bd4\u5982\u8fd9\u91cc\u6839\u636e jobId \u67e5\u8be2\u6570\u636e\u5e93\u5df2\u7ecf\u786e\u8ba4\u6570\u636e\u4e0d\u5b58\u5728\u4e86\n\n      // \u6807\u8bb0\u4ece\u5176\u4ed6\u5730\u65b9\u79fb\u9664\n      return builder.Removed();\n}\n")),(0,a.kt)("p",null,"\u5982\u679c\u5b58\u50a8\u4ecb\u8d28\uff08\u5982\u6570\u636e\u5e93\uff09\u65b0\u589e\u4e86\u65b0\u4f5c\u4e1a\u4f46\u5185\u5b58\u4e2d\u4e0d\u5b58\u5728\uff0c\u5f00\u53d1\u8005\u53ef\u4ee5\u6807\u8bb0\u4e3a ",(0,a.kt)("inlineCode",{parentName:"p"},"Append()"),"\uff0c\u8fd9\u6837\u8be5\u4f5c\u4e1a\u4f1a\u6dfb\u52a0\u5230\u5185\u5b58\u4e2d\uff0c",(0,a.kt)("strong",{parentName:"p"},"\u4f46\u539f\u6709\u7684 ",(0,a.kt)("inlineCode",{parentName:"strong"},"builder")," \u5c31\u4f1a\u88ab\u4e22\u5f03"),"\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4,6,8,11}",showLineNumbers:!0,"{4,6,8,11}":!0},"public SchedulerBuilder OnLoading(SchedulerBuilder builder)\n{\n      // \u6bd4\u5982\u5728\u8fd9\u91cc\u52a8\u6001\u521b\u5efa\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\n      var newBuilder = SchedulerBuilder.Create<MyJob>(Triggers.Minutely());\n      // \u8fd8\u53ef\u4ee5\u514b\u9686\u4e00\u4e2a\n      var newBuilder = SchedulerBuilder.Clone(builder);\n      // \u8fd8\u53ef\u4ee5\u8bfb\u53d6\u914d\u7f6e\u6587\u4ef6/JSON\n      var newBuilder = SchedulerBuilder.From(json);\n\n      // \u8fd4\u56de\u65b0\u7684\u4f5c\u4e1a\u8ba1\u5212\u6784\u5efa\u5668\u5e76\u6807\u8bb0\u4e3a\u65b0\u589e\n      return newBuilder.Appended();\n}\n")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"OnChanged"),"\uff1a\u4f5c\u4e1a\u8ba1\u5212 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Scheduler")," \u7684 ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobDetail")," \u53d8\u5316\u65f6\u8c03\u7528\u3002"))),(0,a.kt)("p",null,"\u53ea\u8981\u4f5c\u4e1a\u8ba1\u5212\u6709\u4efb\u4f55\u53d8\u5316\u90fd\u5c06\u89e6\u53d1\u8be5\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u6709\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"p"},"PersistenceContext")," \u7c7b\u578b\u7684\u53c2\u6570 ",(0,a.kt)("inlineCode",{parentName:"p"},"context"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"PersistenceContext")," \u5305\u542b\u4ee5\u4e0b\u6210\u5458\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"PersistenceContext")," \u5c5e\u6027\u5217\u8868"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JobId"),"\uff1a\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"li"},"Id"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JobDetail"),"\uff1a\u4f5c\u4e1a\u4fe1\u606f\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"JobDetail")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Behavior"),"\uff1a\u6301\u4e45\u5316\u884c\u4e3a\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"PersistenceBehavior")," \u679a\u4e3e\u7c7b\u578b\uff0c\u5305\u542b ",(0,a.kt)("inlineCode",{parentName:"li"},"Appended"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"Updated")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"Removed")," \u4e09\u4e2a\u679a\u4e3e\u6210\u5458"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"PersistenceContext")," \u65b9\u6cd5\u5217\u8868"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ConvertToSQL"),"\uff1a\u5c06 ",(0,a.kt)("inlineCode",{parentName:"li"},"PersistenceContext")," \u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u5b57\u7b26\u4e32\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"Behavior")," \u5c5e\u6027\u503c\u4e0d\u540c\uff0c\u751f\u6210\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u4e0d\u540c"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ConvertToJSON"),"\uff1a\u5c06 ",(0,a.kt)("inlineCode",{parentName:"li"},"PersistenceContext")," \u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"JSON")," \u5b57\u7b26\u4e32"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ConvertToMonitor"),"\uff1a\u5c06 ",(0,a.kt)("inlineCode",{parentName:"li"},"PersistenceContext")," \u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"Monitor")," \u5b57\u7b26\u4e32"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ToString"),"\uff1a\u5c06 ",(0,a.kt)("inlineCode",{parentName:"li"},"PersistenceContext")," \u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"\u7b80\u8981")," \u5b57\u7b26\u4e32"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"GetNaming"),"\uff1a\u63d0\u4f9b\u5c06\u7279\u5b9a\u5b57\u7b26\u4e32\u8f93\u51fa\u4e0d\u540c\u7684\u547d\u540d\u89c4\u5219\u5b57\u7b26\u4e32")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4,6,8,10}",showLineNumbers:!0,"{4,6,8,10}":!0},'public void OnChanged(PersistenceContext context)\n{\n      // \u8f93\u51fa CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09SQL \u8bed\u53e5\uff0c\u9ed8\u8ba4\u503c\n      var sql = context.ConvertToSQL("job_detail");\n      // \u8f93\u51fa Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09 SQL \u8bed\u53e5\n      var sql = context.ConvertToSQL("job_detail", NamingConventions.Pascal);\n      // \u8f93\u51fa UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09 SQL \u8bed\u53e5\n      var sql = context.ConvertToSQL("job_detail", NamingConventions.UnderScoreCase);\n\n      // \u4f60\u8981\u505a\u7684\u53ea\u662f\u6267\u884c SQL \u4e86\uff01\uff01\uff01 \ud83d\ude0e\n}\n')),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"OnTriggerChanged"),"\uff1a\u4f5c\u4e1a\u8ba1\u5212 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Scheduler")," \u7684\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Trigger")," \u53d8\u5316\u65f6\u8c03\u7528\u3002"))),(0,a.kt)("p",null,"\u53ea\u8981\u4f5c\u4e1a\u8ba1\u5212",(0,a.kt)("strong",{parentName:"p"},"\u89e6\u53d1\u5668"),"\u6709\u4efb\u4f55\u53d8\u5316\u90fd\u5c06\u89e6\u53d1\u8be5\u65b9\u6cd5\uff0c\u8be5\u65b9\u6cd5\u6709\u4e00\u4e2a ",(0,a.kt)("inlineCode",{parentName:"p"},"PersistenceTriggerContext")," \u7c7b\u578b\u7684\u53c2\u6570 ",(0,a.kt)("inlineCode",{parentName:"p"},"context"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"PersistenceTriggerContext")," \u7ee7\u627f\u81ea ",(0,a.kt)("inlineCode",{parentName:"p"},"PersistenceContext"),"\uff1a"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"PersistenceTriggerContext")," \u5c5e\u6027\u5217\u8868"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JobId"),"\uff1a\u4f5c\u4e1a ",(0,a.kt)("inlineCode",{parentName:"li"},"Id"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"JobDetail"),"\uff1a\u4f5c\u4e1a\u4fe1\u606f\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"JobDetail")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"TriggerId"),"\uff1a\u4f5c\u4e1a\u89e6\u53d1\u5668 ",(0,a.kt)("inlineCode",{parentName:"li"},"Id"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"string")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Trigger"),"\uff1a\u4f5c\u4e1a\u89e6\u53d1\u5668\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"Trigger")," \u7c7b\u578b"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Behavior"),"\uff1a\u6301\u4e45\u5316\u884c\u4e3a\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"PersistenceBehavior")," \u679a\u4e3e\u7c7b\u578b\uff0c\u5305\u542b ",(0,a.kt)("inlineCode",{parentName:"li"},"Appended"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"Updated")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"Removed")," \u4e09\u4e2a\u679a\u4e3e\u6210\u5458"))),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"PersistenceTriggerContext")," \u65b9\u6cd5\u5217\u8868"),(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ConvertToSQL"),"\uff1a\u5c06 ",(0,a.kt)("inlineCode",{parentName:"li"},"PersistenceTriggerContext")," \u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u5b57\u7b26\u4e32\uff0c",(0,a.kt)("inlineCode",{parentName:"li"},"Behavior")," \u5c5e\u6027\u503c\u4e0d\u540c\uff0c\u751f\u6210\u7684 ",(0,a.kt)("inlineCode",{parentName:"li"},"SQL")," \u4e0d\u540c"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ConvertToJSON"),"\uff1a\u5c06 ",(0,a.kt)("inlineCode",{parentName:"li"},"PersistenceTriggerContext")," \u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"JSON")," \u5b57\u7b26\u4e32\uff0c\u53ea\u5305\u542b ",(0,a.kt)("inlineCode",{parentName:"li"},"Trigger")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ConvertAllToJSON"),"\uff1a\u5c06 ",(0,a.kt)("inlineCode",{parentName:"li"},"PersistenceTriggerContext")," \u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"JSON")," \u5b57\u7b26\u4e32\uff0c\u5305\u542b ",(0,a.kt)("inlineCode",{parentName:"li"},"JobDetail")," \u548c ",(0,a.kt)("inlineCode",{parentName:"li"},"Trigger")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ConvertToMonitor"),"\uff1a\u5c06 ",(0,a.kt)("inlineCode",{parentName:"li"},"PersistenceTriggerContext")," \u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"Monitor")," \u5b57\u7b26\u4e32"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"ToString"),"\uff1a\u5c06 ",(0,a.kt)("inlineCode",{parentName:"li"},"PersistenceTriggerContext")," \u8f6c\u6362\u6210 ",(0,a.kt)("inlineCode",{parentName:"li"},"\u7b80\u8981")," \u5b57\u7b26\u4e32"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"GetNaming"),"\uff1a\u63d0\u4f9b\u5c06\u7279\u5b9a\u5b57\u7b26\u4e32\u8f93\u51fa\u4e0d\u540c\u7684\u547d\u540d\u89c4\u5219\u5b57\u7b26\u4e32")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4,6,8,10}",showLineNumbers:!0,"{4,6,8,10}":!0},'public void OnTriggerChanged(PersistenceTriggerContext context)\n{\n      // \u8f93\u51fa CamelCase\uff08\u9a7c\u5cf0\u547d\u540d\u6cd5\uff09SQL \u8bed\u53e5\uff0c\u9ed8\u8ba4\u503c\n      var sql = context.ConvertToSQL("job_trigger");\n      // \u8f93\u51fa Pascal\uff08\u5e15\u65af\u5361\u547d\u540d\u6cd5\uff09 SQL \u8bed\u53e5\n      var sql = context.ConvertToSQL("job_trigger", NamingConventions.Pascal);\n      // \u8f93\u51fa UnderScoreCase\uff08\u4e0b\u5212\u7ebf\u547d\u540d\u6cd5\uff09 SQL \u8bed\u53e5\n      var sql = context.ConvertToSQL("job_trigger", NamingConventions.UnderScoreCase);\n\n      // \u4f60\u8981\u505a\u7684\u53ea\u662f\u6267\u884c SQL \u4e86\uff01\uff01\uff01 \ud83d\ude0e\n}\n')),(0,a.kt)("admonition",{title:"\u5c0f\u77e5\u8bc6",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"\u9ed8\u8ba4\u60c5\u51b5\u4e0b\uff0c\u751f\u6210\u7684 ",(0,a.kt)("inlineCode",{parentName:"p"},"SQL")," \u5c5e\u4e8e\u6807\u51c6 ",(0,a.kt)("inlineCode",{parentName:"p"},"SQL")," \u8bed\u53e5\uff0c\u4f46\u672a\u5fc5\u9002\u5408\u6240\u6709\u6570\u636e\u5e93\u7c7b\u578b\uff0c\u6240\u4ee5\u6211\u4eec\u53ef\u4ee5\u6307\u5b9a ",(0,a.kt)("inlineCode",{parentName:"p"},"BuildSqlType")," \u6765\u751f\u6210\u7279\u5b9a\u6570\u636e\u5e93\u7684\u8bed\u53e5\uff0c\u5982\uff1a"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {4}",showLineNumbers:!0,"{4}":!0},"services.AddSchedule(options =>\n{\n      // \u914d\u7f6e\u8f93\u51fa SQL \u7684\u6570\u636e\u5e93\u7c7b\u578b\uff0cTouchSocket 4.8.2.3+\n      options.BuildSqlType = SqlTypes.SqlServer;\n});\n"))),(0,a.kt)("h3",{id:"261124-\u5404\u7c7b\u6570\u636e\u5e93\u521b\u5efa\u4f5c\u4e1a\u6301\u4e45\u5316\u8868\u8bed\u53e5"},"26.1.12.4 \u5404\u7c7b\u6570\u636e\u5e93\u521b\u5efa\u4f5c\u4e1a\u6301\u4e45\u5316\u8868\u8bed\u53e5"),(0,a.kt)(l.Z,{defaultValue:"Sqlite",values:[{label:"Sqlite",value:"Sqlite"},{label:"SqlServer",value:"SqlServer"},{label:"MySQL",value:"MySQL"},{label:"PostgreSQL",value:"PostgreSQL"},{label:"Oracle",value:"Oracle"},{label:"Firebird",value:"Firebird"},{label:"EFCore",value:"EFCore"},{label:"SqlSugar",value:"SqlSugar"}],mdxType:"Tabs"},(0,a.kt)(s.Z,{value:"Sqlite",mdxType:"TabItem"},(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u53ef\u81ea\u884c\u8c03\u6574\u5217\u547d\u540d\u89c4\u5219\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql",metastring:"showLineNumbers {1,14}",showLineNumbers:!0,"{1,14}":!0},'CREATE TABLE "JobDetails" (\n    "Id" INTEGER NOT NULL CONSTRAINT "PK_JobDetails" PRIMARY KEY AUTOINCREMENT,\n    "JobId" TEXT NOT NULL,\n    "GroupName" TEXT NULL,\n    "JobType" TEXT NULL,\n    "AssemblyName" TEXT NULL,\n    "Description" TEXT NULL,\n    "Concurrent" INTEGER NOT NULL,\n    "IncludeAnnotations" INTEGER NOT NULL,\n    "Properties" TEXT NULL,\n    "UpdatedTime" TEXT NULL\n);\n\nCREATE TABLE "JobTriggers" (\n    "Id" INTEGER NOT NULL CONSTRAINT "PK_JobTriggers" PRIMARY KEY AUTOINCREMENT,\n    "TriggerId" TEXT NOT NULL,\n    "JobId" TEXT NOT NULL,\n    "TriggerType" TEXT NULL,\n    "AssemblyName" TEXT NULL,\n    "Args" TEXT NULL,\n    "Description" TEXT NULL,\n    "Status" INTEGER NOT NULL,\n    "StartTime" TEXT NULL,\n    "EndTime" TEXT NULL,\n    "LastRunTime" TEXT NULL,\n    "NextRunTime" TEXT NULL,\n    "NumberOfRuns" INTEGER NOT NULL,\n    "MaxNumberOfRuns" INTEGER NOT NULL,\n    "NumberOfErrors" INTEGER NOT NULL,\n    "MaxNumberOfErrors" INTEGER NOT NULL,\n    "NumRetries" INTEGER NOT NULL,\n    "RetryTimeout" INTEGER NOT NULL,\n    "StartNow" INTEGER NOT NULL,\n    "RunOnStart" INTEGER NOT NULL,\n    "ResetOnlyOnce" INTEGER NOT NULL,\n    "UpdatedTime" TEXT NULL\n);\n'))),(0,a.kt)(s.Z,{value:"SqlServer",mdxType:"TabItem"},(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u53ef\u81ea\u884c\u8c03\u6574\u5217\u547d\u540d\u89c4\u5219\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql",metastring:"showLineNumbers {1,16}",showLineNumbers:!0,"{1,16}":!0},"CREATE TABLE [JobDetails] (\n    [Id] int NOT NULL IDENTITY,\n    [JobId] nvarchar(max) NOT NULL,\n    [GroupName] nvarchar(max) NULL,\n    [JobType] nvarchar(max) NULL,\n    [AssemblyName] nvarchar(max) NULL,\n    [Description] nvarchar(max) NULL,\n    [Concurrent] bit NOT NULL,\n    [IncludeAnnotations] bit NOT NULL,\n    [Properties] nvarchar(max) NULL,\n    [UpdatedTime] datetime2 NULL,\n    CONSTRAINT [PK_JobDetails] PRIMARY KEY ([Id])\n);\nGO\n\nCREATE TABLE [JobTriggers] (\n    [Id] int NOT NULL IDENTITY,\n    [TriggerId] nvarchar(max) NOT NULL,\n    [JobId] nvarchar(max) NOT NULL,\n    [TriggerType] nvarchar(max) NULL,\n    [AssemblyName] nvarchar(max) NULL,\n    [Args] nvarchar(max) NULL,\n    [Description] nvarchar(max) NULL,\n    [Status] bigint NOT NULL,\n    [StartTime] datetime2 NULL,\n    [EndTime] datetime2 NULL,\n    [LastRunTime] datetime2 NULL,\n    [NextRunTime] datetime2 NULL,\n    [NumberOfRuns] bigint NOT NULL,\n    [MaxNumberOfRuns] bigint NOT NULL,\n    [NumberOfErrors] bigint NOT NULL,\n    [MaxNumberOfErrors] bigint NOT NULL,\n    [NumRetries] int NOT NULL,\n    [RetryTimeout] int NOT NULL,\n    [StartNow] bit NOT NULL,\n    [RunOnStart] bit NOT NULL,\n    [ResetOnlyOnce] bit NOT NULL,\n    [UpdatedTime] datetime2 NULL,\n    CONSTRAINT [PK_JobTriggers] PRIMARY KEY ([Id])\n);\n"))),(0,a.kt)(s.Z,{value:"MySQL",mdxType:"TabItem"},(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u53ef\u81ea\u884c\u8c03\u6574\u5217\u547d\u540d\u89c4\u5219\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql",metastring:"showLineNumbers {3,17}",showLineNumbers:!0,"{3,17}":!0},"ALTER DATABASE CHARACTER SET utf8mb4;\n\nCREATE TABLE `JobDetails` (\n    `Id` int NOT NULL AUTO_INCREMENT,\n    `JobId` longtext CHARACTER SET utf8mb4 NOT NULL,\n    `GroupName` longtext CHARACTER SET utf8mb4 NULL,\n    `JobType` longtext CHARACTER SET utf8mb4 NULL,\n    `AssemblyName` longtext CHARACTER SET utf8mb4 NULL,\n    `Description` longtext CHARACTER SET utf8mb4 NULL,\n    `Concurrent` tinyint(1) NOT NULL,\n    `IncludeAnnotations` tinyint(1) NOT NULL,\n    `Properties` longtext CHARACTER SET utf8mb4 NULL,\n    `UpdatedTime` datetime(6) NULL,\n    CONSTRAINT `PK_JobDetails` PRIMARY KEY (`Id`)\n) CHARACTER SET=utf8mb4;\n\nCREATE TABLE `JobTriggers` (\n    `Id` int NOT NULL AUTO_INCREMENT,\n    `TriggerId` longtext CHARACTER SET utf8mb4 NOT NULL,\n    `JobId` longtext CHARACTER SET utf8mb4 NOT NULL,\n    `TriggerType` longtext CHARACTER SET utf8mb4 NULL,\n    `AssemblyName` longtext CHARACTER SET utf8mb4 NULL,\n    `Args` longtext CHARACTER SET utf8mb4 NULL,\n    `Description` longtext CHARACTER SET utf8mb4 NULL,\n    `Status` int unsigned NOT NULL,\n    `StartTime` datetime(6) NULL,\n    `EndTime` datetime(6) NULL,\n    `LastRunTime` datetime(6) NULL,\n    `NextRunTime` datetime(6) NULL,\n    `NumberOfRuns` bigint NOT NULL,\n    `MaxNumberOfRuns` bigint NOT NULL,\n    `NumberOfErrors` bigint NOT NULL,\n    `MaxNumberOfErrors` bigint NOT NULL,\n    `NumRetries` int NOT NULL,\n    `RetryTimeout` int NOT NULL,\n    `StartNow` tinyint(1) NOT NULL,\n    `RunOnStart` tinyint(1) NOT NULL,\n    `ResetOnlyOnce` tinyint(1) NOT NULL,\n    `UpdatedTime` datetime(6) NULL,\n    CONSTRAINT `PK_JobTriggers` PRIMARY KEY (`Id`)\n) CHARACTER SET=utf8mb4;\n"))),(0,a.kt)(s.Z,{value:"PostgreSQL",mdxType:"TabItem"},(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u53ef\u81ea\u884c\u8c03\u6574\u5217\u547d\u540d\u89c4\u5219\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql",metastring:"showLineNumbers {1,15}",showLineNumbers:!0,"{1,15}":!0},'CREATE TABLE "JobDetails" (\n    "Id" integer GENERATED BY DEFAULT AS IDENTITY,\n    "JobId" text NOT NULL,\n    "GroupName" text NULL,\n    "JobType" text NULL,\n    "AssemblyName" text NULL,\n    "Description" text NULL,\n    "Concurrent" boolean NOT NULL,\n    "IncludeAnnotations" boolean NOT NULL,\n    "Properties" text NULL,\n    "UpdatedTime" timestamp with time zone NULL,\n    CONSTRAINT "PK_JobDetails" PRIMARY KEY ("Id")\n);\n\nCREATE TABLE "JobTriggers" (\n    "Id" integer GENERATED BY DEFAULT AS IDENTITY,\n    "TriggerId" text NOT NULL,\n    "JobId" text NOT NULL,\n    "TriggerType" text NULL,\n    "AssemblyName" text NULL,\n    "Args" text NULL,\n    "Description" text NULL,\n    "Status" bigint NOT NULL,\n    "StartTime" timestamp with time zone NULL,\n    "EndTime" timestamp with time zone NULL,\n    "LastRunTime" timestamp with time zone NULL,\n    "NextRunTime" timestamp with time zone NULL,\n    "NumberOfRuns" bigint NOT NULL,\n    "MaxNumberOfRuns" bigint NOT NULL,\n    "NumberOfErrors" bigint NOT NULL,\n    "MaxNumberOfErrors" bigint NOT NULL,\n    "NumRetries" integer NOT NULL,\n    "RetryTimeout" integer NOT NULL,\n    "StartNow" boolean NOT NULL,\n    "RunOnStart" boolean NOT NULL,\n    "ResetOnlyOnce" boolean NOT NULL,\n    "UpdatedTime" timestamp with time zone NULL,\n    CONSTRAINT "PK_JobTriggers" PRIMARY KEY ("Id")\n);\n'))),(0,a.kt)(s.Z,{value:"Oracle",mdxType:"TabItem"},(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u53ef\u81ea\u884c\u8c03\u6574\u5217\u547d\u540d\u89c4\u5219\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql",metastring:"showLineNumbers {1,15}",showLineNumbers:!0,"{1,15}":!0},'CREATE TABLE "JobDetails" (\n    "Id" NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL,\n    "JobId" NVARCHAR2(2000) NOT NULL,\n    "GroupName" NVARCHAR2(2000),\n    "JobType" NVARCHAR2(2000),\n    "AssemblyName" NVARCHAR2(2000),\n    "Description" NVARCHAR2(2000),\n    "Concurrent" NUMBER(1) NOT NULL,\n    "IncludeAnnotations" NUMBER(1) NOT NULL,\n    "Properties" NVARCHAR2(2000),\n    "UpdatedTime" TIMESTAMP(7),\n    CONSTRAINT "PK_JobDetails" PRIMARY KEY ("Id")\n);\n\nCREATE TABLE "JobTriggers" (\n    "Id" NUMBER(10) GENERATED BY DEFAULT ON NULL AS IDENTITY NOT NULL,\n    "TriggerId" NVARCHAR2(2000) NOT NULL,\n    "JobId" NVARCHAR2(2000) NOT NULL,\n    "TriggerType" NVARCHAR2(2000),\n    "AssemblyName" NVARCHAR2(2000),\n    "Args" NVARCHAR2(2000),\n    "Description" NVARCHAR2(2000),\n    "Status" NUMBER(10) NOT NULL,\n    "StartTime" TIMESTAMP(7),\n    "EndTime" TIMESTAMP(7),\n    "LastRunTime" TIMESTAMP(7),\n    "NextRunTime" TIMESTAMP(7),\n    "NumberOfRuns" NUMBER(19) NOT NULL,\n    "MaxNumberOfRuns" NUMBER(19) NOT NULL,\n    "NumberOfErrors" NUMBER(19) NOT NULL,\n    "MaxNumberOfErrors" NUMBER(19) NOT NULL,\n    "NumRetries" NUMBER(10) NOT NULL,\n    "RetryTimeout" NUMBER(10) NOT NULL,\n    "StartNow" NUMBER(1) NOT NULL,\n    "RunOnStart" NUMBER(1) NOT NULL,\n    "ResetOnlyOnce" NUMBER(1) NOT NULL,\n    "UpdatedTime" TIMESTAMP(7),\n    CONSTRAINT "PK_JobTriggers" PRIMARY KEY ("Id")\n);\n'))),(0,a.kt)(s.Z,{value:"Firebird",mdxType:"TabItem"},(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u53ef\u81ea\u884c\u8c03\u6574\u5217\u547d\u540d\u89c4\u5219\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-sql",metastring:"showLineNumbers {1,15}",showLineNumbers:!0,"{1,15}":!0},'CREATE TABLE "JobDetails" (\n    "Id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,\n    "JobId" BLOB SUB_TYPE TEXT NOT NULL,\n    "GroupName" BLOB SUB_TYPE TEXT,\n    "JobType" BLOB SUB_TYPE TEXT,\n    "AssemblyName" BLOB SUB_TYPE TEXT,\n    "Description" BLOB SUB_TYPE TEXT,\n    "Concurrent" BOOLEAN NOT NULL,\n    "IncludeAnnotations" BOOLEAN NOT NULL,\n    "Properties" BLOB SUB_TYPE TEXT,\n    "UpdatedTime" TIMESTAMP,\n    CONSTRAINT "PK_JobDetails" PRIMARY KEY ("Id")\n);\n\nCREATE TABLE "JobTriggers" (\n    "Id" INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL,\n    "TriggerId" BLOB SUB_TYPE TEXT NOT NULL,\n    "JobId" BLOB SUB_TYPE TEXT NOT NULL,\n    "TriggerType" BLOB SUB_TYPE TEXT,\n    "AssemblyName" BLOB SUB_TYPE TEXT,\n    "Args" BLOB SUB_TYPE TEXT,\n    "Description" BLOB SUB_TYPE TEXT,\n    "Status" BIGINT NOT NULL,\n    "StartTime" TIMESTAMP,\n    "EndTime" TIMESTAMP,\n    "LastRunTime" TIMESTAMP,\n    "NextRunTime" TIMESTAMP,\n    "NumberOfRuns" BIGINT NOT NULL,\n    "MaxNumberOfRuns" BIGINT NOT NULL,\n    "NumberOfErrors" BIGINT NOT NULL,\n    "MaxNumberOfErrors" BIGINT NOT NULL,\n    "NumRetries" INTEGER NOT NULL,\n    "RetryTimeout" INTEGER NOT NULL,\n    "StartNow" BOOLEAN NOT NULL,\n    "RunOnStart" BOOLEAN NOT NULL,\n    "ResetOnlyOnce" BOOLEAN NOT NULL,\n    "UpdatedTime" TIMESTAMP,\n    CONSTRAINT "PK_JobTriggers" PRIMARY KEY ("Id")\n);\n'))),(0,a.kt)(s.Z,{value:"EFCore",mdxType:"TabItem"},(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u53ef\u81ea\u884c\u8c03\u6574\u5217\u547d\u540d\u89c4\u5219\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,56}",showLineNumbers:!0,"{1,56}":!0},'public class JobDetail\n{\n    [Key]\n    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]\n    public int Id { get; set; }\n\n    /// <summary>\n    /// \u4f5c\u4e1a Id\n    /// </summary>\n    public string JobId { get; set; }\n\n    /// <summary>\n    /// \u4f5c\u4e1a\u7ec4\u540d\u79f0\n    /// </summary>\n    public string? GroupName { get; set; }\n\n    /// <summary>\n    /// \u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u7c7b\u578b\n    /// </summary>\n    /// <remarks>\u5b58\u50a8\u7684\u662f\u7c7b\u578b\u7684 FullName</remarks>\n    public string? JobType { get; set; }\n\n    /// <summary>\n    /// \u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u7c7b\u578b\u6240\u5728\u7a0b\u5e8f\u96c6\n    /// </summary>\n    /// <remarks>\u5b58\u50a8\u7684\u662f\u7a0b\u5e8f\u96c6 Name</remarks>\n    public string? AssemblyName { get; set; }\n\n    /// <summary>\n    /// \u63cf\u8ff0\u4fe1\u606f\n    /// </summary>\n    public string? Description { get; set; }\n\n    /// <summary>\n    /// \u662f\u5426\u91c7\u7528\u5e76\u884c\u6267\u884c\n    /// </summary>\n    /// <remarks>\u5982\u679c\u8bbe\u7f6e\u4e3a false\uff0c\u90a3\u4e48\u4f7f\u7528\u4e32\u884c\u6267\u884c</remarks>\n    public bool Concurrent { get; set; } = true;\n\n    /// <summary>\n    /// \u662f\u5426\u626b\u63cf IJob \u5b9e\u73b0\u7c7b [Trigger] \u7279\u6027\u89e6\u53d1\u5668\n    /// </summary>\n    public bool IncludeAnnotations { get; set; } = false;\n\n    /// <summary>\n    /// \u4f5c\u4e1a\u4fe1\u606f\u989d\u5916\u6570\u636e\n    /// </summary>\n    public string? Properties { get; set; } = "{}";\n\n    /// <summary>\n    /// \u4f5c\u4e1a\u66f4\u65b0\u65f6\u95f4\n    /// </summary>\n    public DateTime? UpdatedTime { get; set; }\n}\n\npublic class JobTrigger\n{\n    [Key]\n    [DatabaseGenerated(DatabaseGeneratedOption.Identity)]\n    public int Id { get; set; }\n\n    /// <summary>\n    /// \u4f5c\u4e1a\u89e6\u53d1\u5668 Id\n    /// </summary>\n    public string TriggerId { get; set; }\n\n    /// <summary>\n    /// \u4f5c\u4e1a Id\n    /// </summary>\n    public string JobId { get; set; }\n\n    /// <summary>\n    /// \u4f5c\u4e1a\u89e6\u53d1\u5668\u7c7b\u578b\n    /// </summary>\n    /// <remarks>\u5b58\u50a8\u7684\u662f\u7c7b\u578b\u7684 FullName</remarks>\n    public string? TriggerType { get; set; }\n\n    /// <summary>\n    /// \u4f5c\u4e1a\u89e6\u53d1\u5668\u7c7b\u578b\u6240\u5728\u7a0b\u5e8f\u96c6\n    /// </summary>\n    /// <remarks>\u5b58\u50a8\u7684\u662f\u7a0b\u5e8f\u96c6 Name</remarks>\n    public string? AssemblyName { get; set; }\n\n    /// <summary>\n    /// \u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570\n    /// </summary>\n    /// <remarks>\u8fd0\u884c\u65f6\u5c06\u53cd\u5e8f\u5217\u5316\u4e3a object[] \u7c7b\u578b\u5e76\u4f5c\u4e3a\u6784\u9020\u51fd\u6570\u53c2\u6570</remarks>\n    public string? Args { get; set; }\n\n    /// <summary>\n    /// \u63cf\u8ff0\u4fe1\u606f\n    /// </summary>\n    public string? Description { get; set; }\n\n    /// <summary>\n    /// \u4f5c\u4e1a\u89e6\u53d1\u5668\u72b6\u6001\n    /// </summary>\n    public TriggerStatus Status { get; set; } = TriggerStatus.Ready;\n\n    /// <summary>\n    /// \u8d77\u59cb\u65f6\u95f4\n    /// </summary>\n    public DateTime? StartTime { get; set; }\n\n    /// <summary>\n    /// \u7ed3\u675f\u65f6\u95f4\n    /// </summary>\n    public DateTime? EndTime { get; set; }\n\n    /// <summary>\n    /// \u6700\u8fd1\u8fd0\u884c\u65f6\u95f4\n    /// </summary>\n    public DateTime? LastRunTime { get; set; }\n\n    /// <summary>\n    /// \u4e0b\u4e00\u6b21\u8fd0\u884c\u65f6\u95f4\n    /// </summary>\n    public DateTime? NextRunTime { get; set; }\n\n    /// <summary>\n    /// \u89e6\u53d1\u6b21\u6570\n    /// </summary>\n    public long NumberOfRuns { get; set; }\n\n    /// <summary>\n    /// \u6700\u5927\u89e6\u53d1\u6b21\u6570\n    /// </summary>\n    /// <remarks>\n    /// <para>0\uff1a\u4e0d\u9650\u5236</para>\n    /// <para>n\uff1aN \u6b21</para>\n    /// </remarks>\n    public long MaxNumberOfRuns { get; set; }\n\n    /// <summary>\n    /// \u51fa\u9519\u6b21\u6570\n    /// </summary>\n    public long NumberOfErrors { get; set; }\n\n    /// <summary>\n    /// \u6700\u5927\u51fa\u9519\u6b21\u6570\n    /// </summary>\n    /// <remarks>\n    /// <para>0\uff1a\u4e0d\u9650\u5236</para>\n    /// <para>n\uff1aN \u6b21</para>\n    /// </remarks>\n    public long MaxNumberOfErrors { get; set; }\n\n    /// <summary>\n    /// \u91cd\u8bd5\u6b21\u6570\n    /// </summary>\n    public int NumRetries { get; set; } = 0;\n\n    /// <summary>\n    /// \u91cd\u8bd5\u95f4\u9694\u65f6\u95f4\n    /// </summary>\n    /// <remarks>\u9ed8\u8ba41000\u6beb\u79d2</remarks>\n    public int RetryTimeout { get; set; } = 1000;\n\n    /// <summary>\n    /// \u662f\u5426\u7acb\u5373\u542f\u52a8\n    /// </summary>\n    public bool StartNow { get; set; } = true;\n\n    /// <summary>\n    /// \u662f\u5426\u542f\u52a8\u65f6\u6267\u884c\u4e00\u6b21\n    /// </summary>\n    public bool RunOnStart { get; set; } = false;\n\n    /// <summary>\n    /// \u662f\u5426\u5728\u542f\u52a8\u65f6\u91cd\u7f6e\u6700\u5927\u89e6\u53d1\u6b21\u6570\u7b49\u4e8e\u4e00\u6b21\u7684\u4f5c\u4e1a\n    /// </summary>\n    /// <remarks>\u89e3\u51b3\u56e0\u6301\u4e45\u5316\u6570\u636e\u5df2\u5b8c\u6210\u4e00\u6b21\u89e6\u53d1\u4f46\u542f\u52a8\u65f6\u4e0d\u518d\u6267\u884c\u7684\u95ee\u9898</remarks>\n    public bool ResetOnlyOnce { get; set; } = true;\n\n    /// <summary>\n    /// \u4f5c\u4e1a\u89e6\u53d1\u5668\u66f4\u65b0\u65f6\u95f4\n    /// </summary>\n    public DateTime? UpdatedTime { get; set; }\n}\n'))),(0,a.kt)(s.Z,{value:"SqlSugar",mdxType:"TabItem"},(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u53ef\u81ea\u884c\u8c03\u6574\u5217\u547d\u540d\u89c4\u5219\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,66}",showLineNumbers:!0,"{2,66}":!0},'[SugarTable("JobDetail", "\u4f5c\u4e1a\u4fe1\u606f\u8868")]\npublic class JobDetail\n{\n    /// <summary>\n    /// Id\n    /// </summary>\n    [SugarColumn(ColumnDescription = "Id", IsPrimaryKey = true, IsIdentity = true)]\n    public virtual long Id { get; set; }\n\n    /// <summary>\n    /// \u4f5c\u4e1a Id\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u4f5c\u4e1aId")]\n    public virtual string JobId { get; set; }\n\n    /// <summary>\n    /// \u7ec4\u540d\u79f0\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u7ec4\u540d\u79f0")]\n    public string? GroupName { get; set; }\n\n    /// <summary>\n    /// \u4f5c\u4e1a\u7c7b\u578b FullName\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u4f5c\u4e1a\u7c7b\u578b")]\n    public string? JobType { get; set; }\n\n    /// <summary>\n    /// \u7a0b\u5e8f\u96c6 Name\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u7a0b\u5e8f\u96c6")]\n    public string? AssemblyName { get; set; }\n\n    /// <summary>\n    /// \u63cf\u8ff0\u4fe1\u606f\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u63cf\u8ff0\u4fe1\u606f")]\n    public string? Description { get; set; }\n\n    /// <summary>\n    /// \u662f\u5426\u5e76\u884c\u6267\u884c\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u662f\u5426\u5e76\u884c\u6267\u884c")]\n    public bool Concurrent { get; set; } = true;\n\n    /// <summary>\n    /// \u662f\u5426\u626b\u63cf\u7279\u6027\u89e6\u53d1\u5668\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u662f\u5426\u626b\u63cf\u7279\u6027\u89e6\u53d1\u5668")]\n    public bool IncludeAnnotations { get; set; } = false;\n\n    /// <summary>\n    /// \u989d\u5916\u6570\u636e\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u989d\u5916\u6570\u636e", ColumnDataType = "longtext,text,clob")]\n    public string? Properties { get; set; } = "{}";\n\n    /// <summary>\n    /// \u66f4\u65b0\u65f6\u95f4\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u66f4\u65b0\u65f6\u95f4")]\n    public DateTime? UpdatedTime { get; set; }\n}\n\n[SugarTable("JobTrigger", "\u4f5c\u4e1a\u89e6\u53d1\u5668\u8868")]\npublic class JobTrigger\n{\n    /// <summary>\n    /// Id\n    /// </summary>\n    [SugarColumn(ColumnDescription = "Id", IsPrimaryKey = true, IsIdentity = true)]\n    public virtual long Id { get; set; }\n\n    /// <summary>\n    /// \u89e6\u53d1\u5668 Id\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u89e6\u53d1\u5668Id")]\n    public virtual string TriggerId { get; set; }\n\n    /// <summary>\n    /// \u4f5c\u4e1a Id\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u4f5c\u4e1aId")]\n    public virtual string JobId { get; set; }\n\n    /// <summary>\n    /// \u89e6\u53d1\u5668\u7c7b\u578b FullName\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u89e6\u53d1\u5668\u7c7b\u578b")]\n    public string? TriggerType { get; set; }\n\n    /// <summary>\n    /// \u7a0b\u5e8f\u96c6 Name\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u7a0b\u5e8f\u96c6")]\n    public string? AssemblyName { get; set; }\n\n    /// <summary>\n    /// \u53c2\u6570\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u53c2\u6570")]\n    public string? Args { get; set; }\n\n    /// <summary>\n    /// \u63cf\u8ff0\u4fe1\u606f\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u63cf\u8ff0\u4fe1\u606f")]\n    public string? Description { get; set; }\n\n    /// <summary>\n    /// \u72b6\u6001\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u72b6\u6001")]\n    public TriggerStatus Status { get; set; } = TriggerStatus.Ready;\n\n    /// <summary>\n    /// \u8d77\u59cb\u65f6\u95f4\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u8d77\u59cb\u65f6\u95f4")]\n    public DateTime? StartTime { get; set; }\n\n    /// <summary>\n    /// \u7ed3\u675f\u65f6\u95f4\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u7ed3\u675f\u65f6\u95f4")]\n    public DateTime? EndTime { get; set; }\n\n    /// <summary>\n    /// \u6700\u8fd1\u8fd0\u884c\u65f6\u95f4\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u6700\u8fd1\u8fd0\u884c\u65f6\u95f4")]\n    public DateTime? LastRunTime { get; set; }\n\n    /// <summary>\n    /// \u4e0b\u4e00\u6b21\u8fd0\u884c\u65f6\u95f4\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u4e0b\u4e00\u6b21\u8fd0\u884c\u65f6\u95f4")]\n    public DateTime? NextRunTime { get; set; }\n\n    /// <summary>\n    /// \u89e6\u53d1\u6b21\u6570\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u89e6\u53d1\u6b21\u6570")]\n    public long NumberOfRuns { get; set; }\n\n    /// <summary>\n    /// \u6700\u5927\u89e6\u53d1\u6b21\u6570\uff080:\u4e0d\u9650\u5236\uff0cn:N\u6b21\uff09\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u6700\u5927\u89e6\u53d1\u6b21\u6570")]\n    public long MaxNumberOfRuns { get; set; }\n\n    /// <summary>\n    /// \u51fa\u9519\u6b21\u6570\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u51fa\u9519\u6b21\u6570")]\n    public long NumberOfErrors { get; set; }\n\n    /// <summary>\n    /// \u6700\u5927\u51fa\u9519\u6b21\u6570\uff080:\u4e0d\u9650\u5236\uff0cn:N\u6b21\uff09\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u6700\u5927\u51fa\u9519\u6b21\u6570")]\n    public long MaxNumberOfErrors { get; set; }\n\n    /// <summary>\n    /// \u91cd\u8bd5\u6b21\u6570\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u91cd\u8bd5\u6b21\u6570")]\n    public int NumRetries { get; set; }\n\n    /// <summary>\n    /// \u91cd\u8bd5\u95f4\u9694\u65f6\u95f4\uff08ms\uff09\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u91cd\u8bd5\u95f4\u9694\u65f6\u95f4(ms)")]\n    public int RetryTimeout { get; set; } = 1000;\n\n    /// <summary>\n    /// \u662f\u5426\u7acb\u5373\u542f\u52a8\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u662f\u5426\u7acb\u5373\u542f\u52a8")]\n    public bool StartNow { get; set; } = true;\n\n    /// <summary>\n    /// \u662f\u5426\u542f\u52a8\u65f6\u6267\u884c\u4e00\u6b21\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u662f\u5426\u542f\u52a8\u65f6\u6267\u884c\u4e00\u6b21")]\n    public bool RunOnStart { get; set; } = false;\n\n    /// <summary>\n    /// \u662f\u5426\u5728\u542f\u52a8\u65f6\u91cd\u7f6e\u6700\u5927\u89e6\u53d1\u6b21\u6570\u7b49\u4e8e\u4e00\u6b21\u7684\u4f5c\u4e1a\n    /// </summary>\n    /// <remarks>\u89e3\u51b3\u56e0\u6301\u4e45\u5316\u6570\u636e\u5df2\u5b8c\u6210\u4e00\u6b21\u89e6\u53d1\u4f46\u542f\u52a8\u65f6\u4e0d\u518d\u6267\u884c\u7684\u95ee\u9898</remarks>\n    [SugarColumn(ColumnDescription = "\u662f\u5426\u5728\u542f\u52a8\u65f6\u91cd\u7f6e\u6700\u5927\u89e6\u53d1\u6b21\u6570\u7b49\u4e8e\u4e00\u6b21\u7684\u4f5c\u4e1a")]\n    public bool ResetOnlyOnce { get; set; } = true;\n\n    /// <summary>\n    /// \u66f4\u65b0\u65f6\u95f4\n    /// </summary>\n    [SugarColumn(ColumnDescription = "\u66f4\u65b0\u65f6\u95f4")]\n    public DateTime? UpdatedTime { get; set; }\n}\n')))),(0,a.kt)("h2",{id:"26113-\u4f5c\u4e1a\u96c6\u7fa4\u63a7\u5236"},"26.1.13 \u4f5c\u4e1a\u96c6\u7fa4\u63a7\u5236"),(0,a.kt)("p",null,"\u6846\u67b6\u63d0\u4f9b\u7b80\u5355\u7684\u96c6\u7fa4\u529f\u80fd\uff0c\u4f46\u5e76\u4e0d\u80fd\u8fbe\u5230\u8d1f\u8f7d\u5747\u8861\u7684\u6548\u679c\uff0c\u800c\u4ec5\u4ec5\u63d0\u4f9b\u4e86\u6545\u969c\u8f6c\u79fb\u7684\u529f\u80fd\uff0c\u5f53\u4e00\u4e2a\u670d\u52a1\u7684\u4f5c\u4e1a\u8c03\u5ea6\u5668\u5b95\u673a\u65f6\uff0c\u53e6\u4e00\u4e2a\u670d\u52a1\u7684\u4f5c\u4e1a\u8c03\u5ea6\u5668\u4f1a\u542f\u52a8\u3002"),(0,a.kt)("h3",{id:"261131-\u5b9e\u73b0\u96c6\u7fa4\u6545\u969c\u8f6c\u79fb"},"26.1.13.1 \u5b9e\u73b0\u96c6\u7fa4\u6545\u969c\u8f6c\u79fb"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u521b\u5efa ",(0,a.kt)("inlineCode",{parentName:"strong"},"JobClusterServer")," \u7c7b\u5e76\u5b9e\u73b0 ",(0,a.kt)("inlineCode",{parentName:"strong"},"IJobClusterServer")))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,9,21-37,46,55,65}",showLineNumbers:!0,"{1,9,21-37,46,55,65}":!0},'public class JobClusterServer : IJobClusterServer\n{\n    /// <summary>\n    /// \u5f53\u524d\u4f5c\u4e1a\u8c03\u5ea6\u5668\u542f\u52a8\u901a\u77e5\n    /// </summary>\n    /// <param name="context">\u4f5c\u4e1a\u96c6\u7fa4\u670d\u52a1\u4e0a\u4e0b\u6587</param>\n    public void Start(JobClusterContext context)\n    {\n        // \u5728\u4f5c\u4e1a\u96c6\u7fa4\u8868\u4e2d\uff0c\u5982\u679c clusterId \u4e0d\u5b58\u5728\uff0c\u5219\u65b0\u589e\u4e00\u6761\uff08\u5426\u5219\u66f4\u65b0\u4e00\u6761\uff09\uff0c\u5e76\u8bbe\u7f6e status \u4e3a ClusterStatus.Waiting\n    }\n\n    /// <summary>\n    /// \u7b49\u5f85\u88ab\u5524\u9192\n    /// </summary>\n    /// <param name="context">\u4f5c\u4e1a\u96c6\u7fa4\u670d\u52a1\u4e0a\u4e0b\u6587</param>\n    /// <returns><see cref="Task"/></returns>\n    public async Task WaitingForAsync(JobClusterContext context)\n    {\n        var clusterId = context.ClusterId;\n\n        while (true)\n        {\n            try\n            {\n                // \u5728\u8fd9\u91cc\u67e5\u8be2\u6570\u636e\u5e93\uff0c\u6839\u636e\u4ee5\u4e0b\u4e24\u79cd\u60c5\u51b5\u5904\u7406\n                // 1) \u5982\u679c\u4f5c\u4e1a\u96c6\u7fa4\u8868\u5df2\u6709 status \u4e3a ClusterStatus.Working \u5219\u7ee7\u7eed\u5faa\u73af\n                // 2) \u5982\u679c\u4f5c\u4e1a\u96c6\u7fa4\u8868\u4e2d\u8fd8\u6ca1\u6709\u5176\u4ed6\u670d\u52a1\u6216\u53ea\u6709\u81ea\u5df1\uff0c\u5219\u63d2\u5165\u4e00\u6761\u96c6\u7fa4\u670d\u52a1\u6216\u8c03\u7528 await WorkNowAsync(clusterId); \u4e4b\u540e return;\n                // 3) \u5982\u679c\u4f5c\u4e1a\u96c6\u7fa4\u8868\u4e2d\u6ca1\u6709 status \u4e3a ClusterStatus.Working \u7684\uff0c\u8c03\u7528 await WorkNowAsync(clusterId); \u4e4b\u540e return;\n\n                await WorkNowAsync(clusterId);\n                return;\n            }\n            catch { }\n\n            // \u63a7\u5236\u96c6\u7fa4\u5fc3\u8df3\u9891\u7387\n            await Task.Delay(3000);\n        }\n    }\n\n    /// <summary>\n    /// \u5f53\u524d\u4f5c\u4e1a\u8c03\u5ea6\u5668\u505c\u6b62\u901a\u77e5\n    /// </summary>\n    /// <param name="context">\u4f5c\u4e1a\u96c6\u7fa4\u670d\u52a1\u4e0a\u4e0b\u6587</param>\n    public void Stop(JobClusterContext context)\n    {\n        // \u5728\u4f5c\u4e1a\u96c6\u7fa4\u8868\u4e2d\uff0c\u66f4\u65b0 clusterId \u7684 status \u4e3a ClusterStatus.Crashed\n    }\n\n    /// <summary>\n    /// \u5f53\u524d\u4f5c\u4e1a\u8c03\u5ea6\u5668\u5b95\u673a\n    /// </summary>\n    /// <param name="context">\u4f5c\u4e1a\u96c6\u7fa4\u670d\u52a1\u4e0a\u4e0b\u6587</param>\n    public void Crash(JobClusterContext context)\n    {\n        // \u5728\u4f5c\u4e1a\u96c6\u7fa4\u8868\u4e2d\uff0c\u66f4\u65b0 clusterId \u7684 status \u4e3a ClusterStatus.Crashed\n    }\n\n    /// <summary>\n    /// \u6307\u793a\u96c6\u7fa4\u53ef\u4ee5\u5de5\u4f5c\n    /// </summary>\n    /// <param name="clusterId">\u96c6\u7fa4 Id</param>\n    /// <returns></returns>\n    private Task WorkNowAsync(string clusterId)\n    {\n        // \u5728\u4f5c\u4e1a\u96c6\u7fa4\u8868\u4e2d\uff0c\u66f4\u65b0 clusterId \u7684 status \u4e3a ClusterStatus.Working\n\n        // \u6a21\u62df\u6570\u636e\u5e93\u66f4\u65b0\u64cd\u4f5c\uff08\u8017\u65f6\uff09\n        await Task.Delay(3000);\n    }\n}\n')),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u6ce8\u518c\u96c6\u7fa4\u670d\u52a1"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3-4}",showLineNumbers:!0,"{3-4}":!0},'services.AddSchedule(options =>\n{\n      options.ClusterId = "cluster1";\n      options.AddClusterServer<JobClusterServer>();\n});\n')),(0,a.kt)("ol",{start:3},(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("strong",{parentName:"li"},"\u4f5c\u4e1a\u96c6\u7fa4\u8f93\u51fa\u65e5\u5fd7"))),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers {4,6,8,16}",showLineNumbers:!0,"{4,6,8,16}":!0},"info: 2022-12-05 18:26:11.4045753 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      Schedule hosted service is running.\ninfo: 2022-12-05 18:26:11.4126431 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #1\n      The job cluster of <cluster1> service has been enabled, and waiting for instructions.\nwarn: 2022-12-05 18:26:14.4333100 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #6\n      The job cluster of <cluster1> service worked now, and the current schedule hosted service will be preloading.\ninfo: 2022-12-05 18:26:14.4411758 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #6\n      Schedule hosted service is preloading...\ninfo: 2022-12-05 18:26:14.4684974 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #6\n      The <job1_trigger1> trigger for scheduler of <job1> successfully appended to the schedule.\ninfo: 2022-12-05 18:26:14.4701128 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #6\n      The scheduler of <job1> successfully appended to the schedule.\nwarn: 2022-12-05 18:26:14.4765709 +08:00 \u661f\u671f\u4e00 L System.Logging.ScheduleService[0] #6\n      Schedule hosted service preload completed, and a total of <1> schedulers are appended.\ninfo: 2022-12-05 18:26:19.5089541 +08:00 \u661f\u671f\u4e00 L MyJob[0] #16\n      <job1> [C] <job1 job1_trigger1> 5s 1ts 2022-12-05 18:26:19.434 -> 2022-12-05 18:26:24.441\n")),(0,a.kt)("h3",{id:"261132-\u4f5c\u4e1a\u96c6\u7fa4\u6570\u636e\u5e93\u8868\u8bbe\u8ba1"},"26.1.13.2 \u4f5c\u4e1a\u96c6\u7fa4\u6570\u636e\u5e93\u8868\u8bbe\u8ba1"),(0,a.kt)("p",null,"\u53ea\u9700\u5305\u542b ",(0,a.kt)("inlineCode",{parentName:"p"},"Id"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"ClusterId"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Description"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Status"),"\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"UpdatedTime")," \u5b57\u6bb5\u5373\u53ef\uff0c\u5176\u4e2d ",(0,a.kt)("inlineCode",{parentName:"p"},"Status")," \u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"ClusterStatus")," \u679a\u4e3e\u7c7b\u578b\u3002"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("strong",{parentName:"li"},(0,a.kt)("inlineCode",{parentName:"strong"},"ClusterStatus"))," \u5305\u542b\u4ee5\u4e0b\u679a\u4e3e\u6210\u5458",(0,a.kt)("ul",{parentName:"li"},(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Crashed"),"\uff1a\u5b95\u673a"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Working"),"\uff1a\u6b63\u5e38\u5de5\u4f5c"),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("inlineCode",{parentName:"li"},"Waiting"),"\uff1a\u7b49\u5f85\u88ab\u5524\u9192\uff0c\u9ed8\u8ba4\u503c")))),(0,a.kt)("h3",{id:"261133-\u5982\u4f55\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861"},"26.1.13.3 \u5982\u4f55\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861"),(0,a.kt)("p",null,"\u6846\u67b6\u53ea\u63d0\u4f9b\u4e86\u7b80\u5355\u7684\u6545\u969c\u8f6c\u79fb\u7684\u96c6\u7fa4\u529f\u80fd\uff0c\u5982\u9700\u5b9e\u73b0\u8d1f\u8f7d\u5747\u8861\uff0c\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"TCP/IP")," \u5957\u63a5\u5b57\u5b9e\u73b0\u3002"),(0,a.kt)("h2",{id:"26114-scheduleserve-\u9759\u6001\u7c7b"},"26.1.14 ",(0,a.kt)("inlineCode",{parentName:"h2"},"ScheduleServe")," \u9759\u6001\u7c7b"),(0,a.kt)("p",null,"\u8be5\u529f\u80fd ",(0,a.kt)("strong",{parentName:"p"},"\u5efa\u8bae")," \u4ec5\u9650\u4e0d\u80fd\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"services.AddXXX")," \u65b9\u5f0f\u4f7f\u7528\uff0c\u6bd4\u5982\u63a7\u5236\u53f0\uff0c",(0,a.kt)("inlineCode",{parentName:"p"},"Winfrom/WPF")," \u7b49\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3}",showLineNumbers:!0,"{1,3}":!0},"IDisposable dispose =  ScheduleServe.Run(options =>\n{\n    options.AddJob<MyJob>(Triggers.Secondly());\n});\n")),(0,a.kt)("p",null,"\u8fd9\u79cd\u65b9\u5f0f\u6709\u4e00\u4e2a\u9690\u85cf\u7684\u5de8\u5927\u9690\u85cf \u201c\u9a9a\u64cd\u4f5c\u201d\uff1a",(0,a.kt)("strong",{parentName:"p"},"\u53ef\u4ee5\u5728\u4efb\u4f55\u5730\u65b9\u521b\u5efa\u4f5c\u4e1a\u8c03\u5ea6\u670d\u52a1\uff0c\u591a\u6b21\u8c03\u7528\u53ef\u4ee5\u521b\u5efa\u591a\u4e2a\u4f5c\u4e1a\u8c03\u5ea6\u5668\u3002")),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("mdxAdmonitionTitle",{parentName:"admonition"},"\u63a8\u8350\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"Serve.Run()")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"Serve.RunGeneric()")," \u65b9\u5f0f\u66ff\u4ee3"),(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"TouchSocket")," \u6846\u67b6\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"Serve.Run()")," \u65b9\u5f0f\u652f\u6301\u8de8\u5e73\u53f0\u4f7f\u7528\uff0c\u8fd8\u80fd\u652f\u6301\u6ce8\u518c\u66f4\u591a\u670d\u52a1\uff0c\u5982\uff1a"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3,5}",showLineNumbers:!0,"{1,3,5}":!0},"Serve.Run(services =>\n{\n    services.AddSchedule(options =>\n    {\n        options.Add<MyJob>(Triggers.Secondly());\n    });\n})\n")),(0,a.kt)("p",{parentName:"admonition"},"\u5982\u65e0\u9700 ",(0,a.kt)("inlineCode",{parentName:"p"},"Web")," \u529f\u80fd\uff0c\u53ef\u901a\u8fc7 ",(0,a.kt)("inlineCode",{parentName:"p"},"Serve.RunGeneric")," \u66ff\u4ee3 ",(0,a.kt)("inlineCode",{parentName:"p"},"Serve.Run"),"\u3002")),(0,a.kt)("h2",{id:"26115-\u5982\u4f55\u90e8\u7f72"},"26.1.15 \u5982\u4f55\u90e8\u7f72"),(0,a.kt)("p",null,"\u5982\u679c\u5728\u9879\u76ee\u4e2d\u4f7f\u7528\u4e86\u5b9a\u65f6\u4efb\u52a1\u4e14\u90e8\u7f72\u5230 ",(0,a.kt)("inlineCode",{parentName:"p"},"IIS")," \u4e2d\uff0c\u90a3\u4e48\u9700\u8981\u8bbe\u7f6e ",(0,a.kt)("inlineCode",{parentName:"p"},"IIS")," \u7981\u6b62\u56de\u6536\uff0c",(0,a.kt)("a",{parentName:"p",href:"/docs/deploy-iis#3415-iis-%E5%9B%9E%E6%94%B6%E9%97%AE%E9%A2%98%E5%92%8C%E9%85%8D%E7%BD%AE"},"\u70b9\u51fb\u67e5\u770b ",(0,a.kt)("inlineCode",{parentName:"a"},"IIS")," \u56de\u6536\u95ee\u9898\u89e3\u51b3\u65b9\u6848")),(0,a.kt)("admonition",{title:"\u90e8\u7f72\u5efa\u8bae",type:"warning"},(0,a.kt)("p",{parentName:"admonition"},"\u5efa\u8bae\u5b9a\u65f6\u4efb\u52a1\u91c7\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"Worker Service")," \u72ec\u7acb\u90e8\u7f72\u65b9\u5f0f\uff0c\u4e0d\u5e94\u4f9d\u6258 ",(0,a.kt)("inlineCode",{parentName:"p"},"Web")," \u9879\u76ee\u8fdb\u7a0b\u4e2d\u3002",(0,a.kt)("a",{parentName:"p",href:"/touchsocket/docs/process-service"},"\u67e5\u770b\u3010 Worker Service\u3011\u7ae0\u8282"))),(0,a.kt)("h3",{id:"261151-worker-service-\u4ee3\u7801\u96c6\u6210\u4f8b\u5b50"},"26.1.15.1 ",(0,a.kt)("inlineCode",{parentName:"h3"},"Worker Service")," \u4ee3\u7801\u96c6\u6210\u4f8b\u5b50"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"1. \u5b89\u88c5 ",(0,a.kt)("inlineCode",{parentName:"strong"},"TouchSocket")," \u6216 ",(0,a.kt)("inlineCode",{parentName:"strong"},"Sundial")," \u5305")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash",metastring:"showLineNumbers",showLineNumbers:!0},"# \u5b8c\u6574\u7684\u5f00\u53d1\u6846\u67b6\ndotnet add package TouchSocket;\n\n# \u53ea\u9700\u8981\u5b9a\u65f6\u4efb\u52a1\u670d\u52a1\u529f\u80fd\ndotnet add package Sundial\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"2. \u6ce8\u518c ",(0,a.kt)("inlineCode",{parentName:"strong"},"Schedule")," \u670d\u52a1")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {3-4,19-22}",showLineNumbers:!0,"{3-4,19-22}":!0},"using Microsoft.Extensions.DependencyInjection;\nusing Microsoft.Extensions.Hosting;\nusing TouchSocket.Schedule;\n// using Sundial;\n\nnamespace TouchSocketWorkers;\n\npublic class Program\n{\n      public static void Main(string[] args)\n      {\n            CreateHostBuilder(args).Build().Run();\n      }\n\n      public static IHostBuilder CreateHostBuilder(string[] args) =>\n            Host.CreateDefaultBuilder(args)\n                .ConfigureServices((hostContext, services) =>\n                {\n                      services.AddSchedule(options =>\n                      {\n                          options.AddJob<MyJob>(Triggers.PeriodSeconds(5));\n                      });\n                });\n}\n")),(0,a.kt)("admonition",{title:"\u5c0f\u77e5\u8bc6",type:"tip"},(0,a.kt)("p",{parentName:"admonition"},"\u5982\u679c\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"Serve")," \u6a21\u5f0f\uff0c\u90a3\u4e48\u4ee3\u7801\u5c06\u975e\u5e38\u7cbe\u7b80\uff0c\u65e0\u9700\u4e0a\u9762\u7b2c\u4e8c\u4e2a\u6b65\u9aa4\u7684\u4ee3\u7801~\uff0c\u5982\uff1a"),(0,a.kt)("pre",{parentName:"admonition"},(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,3-6}",showLineNumbers:!0,"{1,3-6}":!0},"Serve.RunGeneric(services =>\n{\n      services.AddSchedule(options =>\n      {\n            options.AddJob<MyJob>(Triggers.PeriodSeconds(5));\n      });\n})\n"))),(0,a.kt)("h2",{id:"26116-dashboard-\u770b\u677f\u529f\u80fd"},"26.1.16 ",(0,a.kt)("inlineCode",{parentName:"h2"},"Dashboard")," \u770b\u677f\u529f\u80fd"),(0,a.kt)("admonition",{title:"\u7248\u672c\u8bf4\u660e",type:"important"},(0,a.kt)("p",{parentName:"admonition"},"\u4ee5\u4e0b\u5185\u5bb9\u4ec5\u9650 ",(0,a.kt)("inlineCode",{parentName:"p"},"TouchSocket 4.8.4 +")," \u7248\u672c\u4f7f\u7528\u3002")),(0,a.kt)("p",null,"\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"TouchSocket 4.8.4+")," \u7248\u672c\u5185\u7f6e\u4e86\u4e00\u4e2a\u5d4c\u5165\u7684\u5b9a\u65f6\u4efb\u52a1\u770b\u677f ",(0,a.kt)("inlineCode",{parentName:"p"},"UI"),"\uff0c\u53ea\u9700\u8981\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"Startup.cs")," \u4e2d\u542f\u7528\u5373\u53ef\uff0c\u5982\uff1a"),(0,a.kt)("admonition",{type:"tip"},(0,a.kt)("mdxAdmonitionTitle",{parentName:"admonition"},"\u5728 ",(0,a.kt)("inlineCode",{parentName:"mdxAdmonitionTitle"},"Sundial")," \u4e2d\u4f7f\u7528"),(0,a.kt)("p",{parentName:"admonition"},"\u5982\u679c\u4f7f\u7528\u7684\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"Sundial")," \u72ec\u7acb\u5f00\u6e90\u9879\u76ee\uff0c\u53ea\u9700\u8981\u5b89\u88c5 ",(0,a.kt)("inlineCode",{parentName:"p"},"Sundial.Dashboard")," \u5305\u5373\u53ef\uff0c\u65e0\u9700\u5b89\u88c5 ",(0,a.kt)("inlineCode",{parentName:"p"},"Sundial"),"\uff0c\u524d\u8005\u5df2\u6dfb\u52a0\u4e86\u540e\u8005\u7684\u5f15\u7528\u3002")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {2,5}",showLineNumbers:!0,"{2,5}":!0},"app.UseStaticFiles();\napp.UseScheduleUI();\n\n// \u8fd8\u53ef\u4ee5\u914d\u7f6e\u751f\u4ea7\u73af\u5883\u5173\u95ed\napp.UseScheduleUI(options =>\n{\n    options.DisableOnProduction = true;\n});\n")),(0,a.kt)("admonition",{title:"\u4e2d\u95f4\u4ef6\u8bf4\u660e",type:"caution"},(0,a.kt)("p",{parentName:"admonition"},(0,a.kt)("inlineCode",{parentName:"p"},"app.UseScheduleUI()")," \u5fc5\u987b\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"app.UseStaticFiles()")," \u4e4b\u540e\u6ce8\u518c\uff0c",(0,a.kt)("strong",{parentName:"p"},"\u4e14\u5f53\u524d\u7248\u672c\u6682\u672a\u63d0\u4f9b\u4efb\u4f55\u81ea\u5b9a\u4e49\u529f\u80fd\u3002"))),(0,a.kt)("p",null,"\u63a5\u7740\u6253\u5f00\u6d4f\u89c8\u5668\u5e76\u8bbf\u95ee ",(0,a.kt)("inlineCode",{parentName:"p"},"/schedule")," \u5730\u5740\u5373\u53ef\uff1a"),(0,a.kt)("img",{src:(0,o.Z)("img/job_dash.png")}),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"\u6ce8\u610f\uff1a\u5f53\u524d ",(0,a.kt)("inlineCode",{parentName:"strong"},"TouchSocket 4.8.4+")," \u7248\u672c\u6682\u672a\u63d0\u4f9b\u4efb\u4f55\u81ea\u5b9a\u4e49\u529f\u80fd\uff0c\u5305\u62ec ",(0,a.kt)("inlineCode",{parentName:"strong"},"/schedule")," \u5730\u5740\u914d\u7f6e\u3002")),(0,a.kt)("p",null,"\u524d\u7aef\u6e90\u7801\u5730\u5740\uff1a",(0,a.kt)("a",{parentName:"p",href:"https://gitee.com/rrqm_home/TouchSocket/tree/v4/clients/schedule-dashboard"},"https://gitee.com/rrqm_home/TouchSocket/tree/v4/clients/schedule-dashboard")),(0,a.kt)("h2",{id:"26117-\u5e38\u89c1\u95ee\u9898"},"26.1.17 \u5e38\u89c1\u95ee\u9898"),(0,a.kt)("h3",{id:"261171-\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u4e2d\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u5b58\u5728\u504f\u5dee"},"26.1.17.1 \u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u4e2d\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\u5b58\u5728\u504f\u5dee"),(0,a.kt)("p",null,"\u901a\u5e38\u6211\u4eec\u4f1a\u5728 ",(0,a.kt)("inlineCode",{parentName:"p"},"IJob")," \u5b9e\u73b0\u7c7b\u578b\u4e2d\u83b7\u53d6\u5f53\u524d\u65f6\u95f4\uff0c\u4f46\u662f\u8fd9\u4e2a\u65f6\u95f4\u53ef\u80fd\u5b58\u5728\u7740\u6781\u5c0f\u7684\u8bef\u5dee\uff0c\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {5,8}",showLineNumbers:!0,"{5,8}":!0},"public class MyJob : IJob\n{\n    public async Task ExecuteAsync(JobExecutingContext context, CancellationToken stoppingToken)\n    {\n        var nowTime = DateTime.Now; // \u6b64\u65f6\u7684\u65f6\u95f4\u672a\u5fc5\u662f\u771f\u5b9e\u89e6\u53d1\u65f6\u95f4\uff0c\u56e0\u4e3a\u8fd8\u5305\u542b\u521b\u5efa\u7ebf\u7a0b\uff0c\u521d\u59cb\u5316\u7b49\u7b49\u65f6\u95f4\n\n        // \u6b63\u786e\u7684\u505a\u6cd5\u662f\n        var nowTime = context.OccurrenceTime;\n    }\n}\n")),(0,a.kt)("h3",{id:"261172-\u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570\u5e8f\u5217\u5316\u53cd\u5e8f\u5217\u5316"},"26.1.17.2 \u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316"),(0,a.kt)("p",null,"\u6846\u67b6\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"Schedular")," \u9759\u6001\u7c7b\u65b9\u6cd5\uff1a",(0,a.kt)("inlineCode",{parentName:"p"},"Serialize/Deserialize")," \u53ef\u5bf9\u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570 ",(0,a.kt)("inlineCode",{parentName:"p"},"object[]")," \u7c7b\u578b\u8fdb\u884c\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u64cd\u4f5c\uff0c\u901a\u5e38\u5728\u5f00\u53d1\u5b9a\u65f6\u4efb\u52a1\u7ba1\u7406\u540e\u53f0\u65f6\u975e\u5e38\u6709\u7528\u3002\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,5}",showLineNumbers:!0,"{1,5}":!0},'// \u5e8f\u5217\u5316\uff0c\u65b9\u4fbf\u7ec4\u5408 `UI` \u4e0d\u540c\u8f93\u5165\u6846\u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570\nvar args = new object[] { "* * * * * *", CronStringFormat.WithSeconds };\nvar stringArgs = Schedular.Serialize(args);\n\n// \u53cd\u5e8f\u5217\u5316\uff0c\u65b9\u4fbf\u62c6\u5f00\u4f5c\u4e1a\u89e6\u53d1\u5668\u53c2\u6570\u5728 `UI` \u4e0d\u540c\u5217\u5c55\u793a\nvar stringArgs = "[\\"* * * * *\\",0]";\nvar args = Schedular.Deserialize<object[]>(stringArgs);\n')),(0,a.kt)("h3",{id:"261173-\u4f5c\u4e1a\u4fe1\u606f\u989d\u5916\u6570\u636e\u5e8f\u5217\u5316\u53cd\u5e8f\u5217\u5316"},"26.1.17.3 \u4f5c\u4e1a\u4fe1\u606f\u989d\u5916\u6570\u636e\u5e8f\u5217\u5316/\u53cd\u5e8f\u5217\u5316"),(0,a.kt)("p",null,"\u6846\u67b6\u63d0\u4f9b\u4e86 ",(0,a.kt)("inlineCode",{parentName:"p"},"Schedular")," \u9759\u6001\u7c7b\u65b9\u6cd5\uff1a",(0,a.kt)("inlineCode",{parentName:"p"},"Serialize/Deserialize")," \u53ef\u5bf9\u4f5c\u4e1a\u4fe1\u606f\u989d\u5916\u662f\u6570\u636e ",(0,a.kt)("inlineCode",{parentName:"p"},"Dictionary<string, object>")," \u7c7b\u578b\u8fdb\u884c\u5e8f\u5217\u5316\u548c\u53cd\u5e8f\u5217\u5316\u64cd\u4f5c\uff0c\u901a\u5e38\u5728\u5f00\u53d1\u5b9a\u65f6\u4efb\u52a1\u7ba1\u7406\u540e\u53f0\u65f6\u975e\u5e38\u6709\u7528\u3002\u5982\uff1a"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-cs",metastring:"showLineNumbers {1,5}",showLineNumbers:!0,"{1,5}":!0},'// \u5e8f\u5217\u5316\uff0c\u65b9\u4fbf\u7ec4\u5408 `UI` \u4e0d\u540c\u8f93\u5165\u6846\u4f5c\u4e1a\u4fe1\u606f\u989d\u5916\u6570\u636e\nvar jobData = new Dictionary<string, object> { { "name", "TouchSocket" } };\nvar stringJobData = Schedular.Serialize(jobData);\n\n// \u53cd\u5e8f\u5217\u5316\uff0c\u65b9\u4fbf\u62c6\u5f00\u4f5c\u4e1a\u4f5c\u4e1a\u4fe1\u606f\u989d\u5916\u6570\u636e\u5728 `UI` \u4e0d\u540c\u5217\u5c55\u793a\nvar stringJobData = "{\\"name\\":\\"TouchSocket\\"}";\nvar args = Schedular.Deserialize<Dictionary<string, object>>(stringJobData);\n')),(0,a.kt)("h3",{id:"261174-\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u5ef6\u8fdf\u5904\u7406"},"26.1.17.4 \u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u5ef6\u8fdf\u5904\u7406"),(0,a.kt)("p",null,"\u5728\u4f5c\u4e1a\u5904\u7406\u7a0b\u5e8f\u4e2d\u5982\u9700\u4f7f\u7528\u5230\u5ef6\u8fdf\u7ebf\u7a0b\u64cd\u4f5c\uff0c\u63a8\u8350\u4f7f\u7528 ",(0,a.kt)("inlineCode",{parentName:"p"},"Task.Delay")," \u800c\u4e0d\u662f ",(0,a.kt)("inlineCode",{parentName:"p"},"Thread.Sleep"),"\uff0c\u539f\u56e0\u662f\u540e\u8005\u662f\u540c\u6b65\u5ef6\u8fdf\u4f1a\u963b\u585e\u7ebf\u7a0b\uff0c\u800c\u4e14\u4e0d\u80fd\u53d6\u6d88\u3002"),(0,a.kt)("h2",{id:"26118-\u53cd\u9988\u4e0e\u5efa\u8bae"},"26.1.18 \u53cd\u9988\u4e0e\u5efa\u8bae"),(0,a.kt)("admonition",{title:"\u4e0e\u6211\u4eec\u4ea4\u6d41",type:"note"},(0,a.kt)("p",{parentName:"admonition"},"\u7ed9 TouchSocket \u63d0 ",(0,a.kt)("a",{parentName:"p",href:"https://gitee.com/rrqm_home/TouchSocket/issues/new?issue"},"Issue"),"\u3002")))}N.isMDXComponent=!0}}]);