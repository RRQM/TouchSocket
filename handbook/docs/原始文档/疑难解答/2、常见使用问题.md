---
title: 2、常见使用问题
url: https://www.yuque.com/rrqm/touchsocket/ty0z2l
---

<a name="qXw8O"></a>

## 1、【问】我在解析数据时，将数据转为16进制（或其他时）发现收到的包尾部有很长一段00（或者不知名数据）.... 请问这合理嘛？

![](..\assets\ty0z2l\1649121753532-6060d23d-4eb0-4d95-b36f-cca36be1214f.png)屏幕截图.png <a name="j0UU2"></a>

## 【解决】

合理。。。。那是不可能的。发生这样的问题，很大可能是在转换数据的时候，直接转换了ByteBlock.Buffer的全部。这是不对的，ByteBlock.Buffer是整个内存块的核心，在TouchSocket中，ByteBlock.Buffer的长度往往是大于实际数据长度的。而实际数据长度，应当获取ByteBlock.Len（或ByteBlock.Length）。也就是说，ByteBlock.Len才是此次接收的真实数据，而非ByteBlock.Buffer.Length；

<a name="KSqyX"></a>

## 2、【问】我在发送，或接收数据时，发生以下异常，是什么原因？

![image.png](..\assets\ty0z2l\1649643227477-bfcaca3c-c833-490e-b3c1-8fae090cb5be.png) <a name="nHbj3"></a>

## 【解决】

这个问题是由**适配器限制**引发的。原因是，TouchSocket内部限制了一次性发送的数据最大为1024*1024*10byte。这个设置是**安全设置**，如果有大数据的发送需求，可以考虑**其他方式（例如：分块，流式等）**实现。但是如果确实要修改此内容。请按以下步骤。

***服务器与客户端应该同样配置。***

```csharp
.SetMaxPackageSize(1024*1024*10)
```

<a name="XLkty"></a>

## 3、【问】客户端（TcpClient、WebSocketClient、HttpClient等）在一定时间内（约1分钟），如果没有数据交互的话，会自动断开？

<a name="N9Peo"></a>

## 【解决】

这个问题是由服务器的配置决定的。默认情况下，服务器会清理规定时间内的无数据客户端。具体配置看[TCP配置项](<..\二、Tcp组件\2.2 创建TcpService.md>) <a name="YjjWk"></a>

## 4、关于接收数据

TouchSocket在接收数据时，会将数据以ByteBlock的形式抛出，其ByteBlock.Buffer，则为数据容器，但是需要注意的是，实际数据长度应当以ByteBlock.Length(或ByteBlock.Len)为准。 <a name="sCgCj"></a>

## 5、关于ByteBlock *

ByteBlock的Buffer是Byte\[]类型，但是该对象是内存池核心，会重复使用，所以该对象绝对不能被其他对象引用。应当在ByteBlock的生命周期内（未Dispose）使用。
