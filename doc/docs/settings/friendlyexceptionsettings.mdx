---
id: friendlyexceptionsettings
title: 6. 友好异常配置
sidebar_label: 6. 友好异常配置
---

:::tip 配置智能提示和校验

如需编写配置的时候提供智能提示和校验，可查看 【[2.7 JSON Schema 使用](../jsonschema)】

只需要在 `.json` 文件头部添加下列配置即可：

```json showLineNumbers {2}
{
  "$schema": "https://gitee.com/dotnetchina/Furion/raw/v4/schemas/v4/furion-schema.json"
}
```

:::

## 6.1 关于配置

友好异常配置指的是 `Furion` 框架友好异常配置选项。

## 6.2 配置信息

- `FriendlyExceptionSettings`：配置根节点
  - `HideErrorCode`：隐藏错误码，`bool` 类型，默认 `false`
  - `DefaultErrorCode`：默认错误码，`string` 类型
  - `DefaultErrorMessage`：默认错误消息，`string` 类型
  - `ThrowBah`：是否将 `Oops.Oh` 默认抛出为业务异常，`bool` 类型，默认 `false`，设置 `true` 之后 `Oops.Oh` 默认进入 `OnValidateFailed` 处理，而不是 `OnException`
  - `LogError`：是否输出异常日志，`bool` 类型，默认 `true`

## 6.3 配置示例

```json showLineNumbers
{
  "FriendlyExceptionSettings": {
    "DefaultErrorMessage": "系统异常，请联系管理员"
  }
}
```

## 6.4 异常消息配置

`Furion` 框架还为友好异常消息提供外部配置

### 6.4.1 配置信息

- `ErrorCodeMessageSettings`：配置根节点
  - `Definitions`：配置异常错误码消息类型，`[错误状态码，错误消息][]` 类型，如：`["5000", "{0} 不能小于 {1}"]`

### 6.4.2 配置示例

```json showLineNumbers
{
  "ErrorCodeMessageSettings": {
    "Definitions": [
      ["5000", "{0} 不能小于 {1}"],
      ["5001", "我叫 {0} 名字", "百小僧"],
      ["5002", "Oops! 出错了"]
    ]
  }
}
```
